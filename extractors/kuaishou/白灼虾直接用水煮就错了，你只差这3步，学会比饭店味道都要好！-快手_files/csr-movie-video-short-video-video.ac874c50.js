(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["csr-movie-video-short-video-video"], { "0589": function (t, e, n) { "use strict"; var o = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { staticClass: "player-error" }, [n("p", { staticClass: "error-title", class: t.errorInfo.retryText ? "" : "middle" }, [t._v(" " + t._s(t.errorInfo.errorTitle) + " ")]), t.errorInfo.retryText ? n("button", { staticClass: "retry-btn", on: { click: function (e) { return t.$emit("retry-video", t.currentTime) } } }, [t._v(" " + t._s(t.errorInfo.retryText) + " ")]) : t._e()]) }, i = [], a = n("3052"), r = n("48d1"), l = Object(r["c"])({ props: { errorInfo: { type: Object, default: function () { return { errorTitle: "无法连接网络，请稍后再试", retryText: "点击重试" } } } }, setup: function () { var t = Object(a["n"])(), e = t.currentTime; return { currentTime: e } } }), s = l, u = (n("3ca9"), n("d802")), c = Object(u["a"])(s, o, i, !1, null, "96033432", null); e["a"] = c.exports }, "0d8b": function (t, e, n) { "use strict"; var o = n("4cde"), i = n.n(o); function a(t, e, n) { return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t } function r(t) { return l(t) || s(t) || u(t) || d() } function l(t) { if (Array.isArray(t)) return c(t) } function s(t) { if ("undefined" !== typeof Symbol && Symbol.iterator in Object(t)) return Array.from(t) } function u(t, e) { if (t) { if ("string" === typeof t) return c(t, e); var n = Object.prototype.toString.call(t).slice(8, -1); return "Object" === n && t.constructor && (n = t.constructor.name), "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? c(t, e) : void 0 } } function c(t, e) { (null == e || e > t.length) && (e = t.length); for (var n = 0, o = new Array(e); n < e; n++)o[n] = t[n]; return o } function d() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var f = n("5085"), v = n.n(f); function p(t) { return t.scrollHeight > t.clientHeight || t.scrollWidth > t.clientWidth } function h(t) { var e = [], n = t.parentNode; while (n && n !== document.documentElement) p(n) && e.push(n), n = n.parentNode; return e.concat(window) } var m = ["top", "left", "right", "bottom", "top-left", "top-right", "bottom-left", "bottom-right"], b = 10; function y(t) { return t.getBoundingClientRect() } function g(t) { var e = t.cloneNode(!0); document.body.appendChild(e), e.style.top = "-99999px", e.style.position = "fixed", e.style.display = "block", e.style.width = ""; var n = e.offsetWidth, o = e.offsetHeight; return document.body.removeChild(e), { width: n, height: o } } function w(t) { var e = t.top, n = t.right, o = t.bottom, i = t.left, a = []; return o.avaliable && o.space >= e.space && a.push("bottom"), e.avaliable && e.space > o.space && a.push("top"), i.avaliable && n.avaliable && a.length ? a.join("-") : i.avaliable && a.length && !n.avaliable ? (a.push("left"), a.join("-")) : n.avaliable && a.length && !i.avaliable ? (a.push("right"), a.join("-")) : a.length ? a.join("-") : n.avaliable && n.space >= i.space ? "right" : i.avaliable && i.space > n.space ? "left" : "bottom" } function k(t) { var e = t.tooltipSize, n = t.triggerRectInfo, o = window, i = o.innerWidth, a = o.innerHeight, r = { top: { avaliable: n.top >= e.height + b, space: n.top }, bottom: { avaliable: a - n.bottom >= e.height + b, space: a - n.bottom }, left: { avaliable: n.left >= e.width / 2, space: n.left }, right: { avaliable: i - n.right >= e.width / 2, space: i - n.right } }; return w(r) } function O() { var t = this.$refs.tooltip, e = this.$slots.default[0].elm; if (t && e && this.tooltipInDom) { var n = g(t), o = n.width, i = n.height; t.style.width = Math.ceil(o) + "px"; var a = y(e); switch (this.realPlacement = m.includes(this.placement) ? this.placement : k({ tooltipSize: { width: o, height: i }, triggerRectInfo: a }), this.realPlacement) { case "top": this.positionInfo.left = a.left - o / 2 + a.width / 2, this.positionInfo.top = a.top - i - b, this.arrowLeft = null; break; case "left": this.isAbsoluteMode ? (this.positionInfo.left = -(o + b), this.positionInfo.top = e.offsetHeight / 2 - i / 2) : (this.positionInfo.left = a.left - o - b, this.positionInfo.top = a.top + e.offsetHeight / 2 - i / 2), this.arrowLeft = null; break; case "right": this.positionInfo.left = a.left + e.offsetWidth + b, this.positionInfo.top = a.top + e.offsetHeight / 2 - i / 2, this.arrowLeft = null; break; case "bottom": this.positionInfo.left = a.left - o / 2 + a.width / 2, this.positionInfo.top = a.top + e.offsetHeight + b, this.arrowLeft = null; break; case "top-left": this.positionInfo.left = a.left - o + a.width, this.positionInfo.top = a.top - i - b, this.arrowLeft = o - a.width / 2; break; case "top-right": this.positionInfo.left = a.left, this.positionInfo.top = a.top - i - b, this.arrowLeft = a.width / 2; break; case "bottom-left": this.isAbsoluteMode ? (this.positionInfo.left = a.width - o, this.positionInfo.top = e.offsetHeight + b) : (this.positionInfo.left = a.left - o + a.width, this.positionInfo.top = a.top + e.offsetHeight + b), this.arrowLeft = o - a.width / 2; break; case "bottom-right": this.positionInfo.left = a.left, this.positionInfo.top = a.top + e.offsetHeight + b, this.arrowLeft = a.width / 2; break } } } function j(t, e) { return t ? "function" === typeof t && (t = [t]) : t = [], "function" === typeof e ? [].concat(r(t), [e]) : Array.isArray(e) ? [].concat(r(t), r(e)) : t } function I(t, e) { while (t) { if (t === e) return e; t = t.parentNode } return null } var P = { name: "pl-tooltip", props: { content: { type: String }, placement: { type: String, default: "auto" }, maxWidth: { type: Number, default: 200 }, delay: { type: Object, default: function () { return { show: 0, hide: 200 } } }, trigger: { default: "hover", validator: function (t) { return ["click", "hover"].includes(t) } }, insertToGlobal: { type: Boolean, default: !0 }, customClass: { type: String, default: "" }, manual: Boolean, isAbsoluteMode: Boolean }, data: function () { return { positionInfo: { top: 0, left: 0 }, arrowLeft: null, isShow: !1, realPlacement: "", tooltipInDom: !1, staticClass: "", attrClass: "", scopeId: "" } }, methods: { calculatePosition: O, triggerEvent: function (t) { this.$emit(t) }, show: function () { var t = this; if (this.timeoutId) return clearTimeout(this.timeoutId), void (this.timeoutId = null); this.createTooltip(), this.calculatePosition(), this.delay.show <= 0 ? this.isShow = !0 : this.timeoutId = setTimeout((function () { t.isShow = !0, t.timeoutId = null }), this.delay.show) }, hide: function () { var t = this; this.timeoutId && (clearTimeout(this.timeoutId), this.timeoutId = null), this.delay.hide <= 0 ? this.isShow = !1 : this.timeoutId = setTimeout((function () { t.isShow = !1, t.timeoutId = null }), this.delay.hide) }, destroyTooltip: function () { this.triggerEvent("after-hide"), this.tooltipInDom && (this.$refs.tooltip.parentNode.removeChild(this.$refs.tooltip), this.tooltipInDom = !1) }, createTooltip: function () { this.lastInsertToGlobal = this.insertToGlobal, this.lastInsertToGlobal ? document.body.appendChild(this.$refs.tooltip) : this.$el.insertAdjacentElement("afterend", this.$refs.tooltip), this.tooltipInDom = !0 } }, beforeCreate: function () { this.tooltip = new this.$root.constructor({ data: function () { return { node: "" } }, parent: this.$parent, render: function () { return this.node } }) }, beforeUpdate: function () { this.staticClass = this.$vnode.data.staticClass, this.attrClass = this.$vnode.data.class }, updated: function () { this.$el.classList.remove(this.$vnode.data.staticClass), this.$el.classList.remove(this.$vnode.data.class) }, mounted: function () { var t = this; this.calculatePosition(), this.staticClass = this.$vnode.data.staticClass, this.attrClass = this.$vnode.data.class, this.scopeId = this.$vnode.context.$options._scopeId, this.$el.classList.remove(this.$vnode.data.staticClass), this.$el.classList.remove(this.$vnode.data.class), this.tooltip.$mount(), this.scrollElList = h(this.$el), this.scrollElList.forEach((function (e) { e.addEventListener("scroll", t.calculatePosition, !1) })), "click" === this.trigger && (this.globalHide = function (e) { I(e.target, t.$refs.tooltip) || I(e.target, t.$slots.default[0].elm) || t.manual || t.hide() }, window.addEventListener("click", this.globalHide, !0)) }, beforeDestroy: function () { var t = this; this.scrollElList.forEach((function (e) { e.removeEventListener("scroll", t.calculatePosition) })), this.scrollEl = null, this.destroyTooltip(), this.tooltip.$destroy(), this.tooltip = null, this.timeoutId = null, "click" === this.trigger && window.removeEventListener("click", this.globalHide, !0) }, render: function () { var t = arguments[0], e = this.scopeId ? { attrs: a({}, this.scopeId, !0) } : {}, n = t("div", { class: "pl-tooltip-content", style: { "max-width": this.maxWidth + "px" } }, [this.$slots.content ? this.$slots.content : this.content]); "hover" !== this.trigger || this.manual || (n.data.on = n.data.on || {}, n.data.on.mouseenter = this.show, n.data.on.mouseleave = this.hide), this.tooltip.node = t("transition", { attrs: { name: "scale" }, on: { "before-enter": this.triggerEvent.bind(this, "before-show"), "after-enter": this.triggerEvent.bind(this, "after-show"), "before-leave": this.triggerEvent.bind(this, "before-hide"), "after-leave": this.destroyTooltip } }, [t("div", v()([{ class: ["pl-tooltip", this.realPlacement, this.staticClass, this.attrClass], ref: "tooltip", directives: [{ name: "show", value: this.isShow }], style: { top: this.positionInfo.top + "px", left: this.positionInfo.left + "px" } }, e]), [null === this.arrowLeft ? t("div", { class: "pl-tooltip-arrow" }) : t("div", { class: "pl-tooltip-arrow", style: { left: this.arrowLeft + "px" } }), n])]); var o = this.$slots.default[0]; if (!o.tag) throw new Error(["[platform-ui pl-tooltip error]: ", "trigger element should not be a text node."].join("")); return o.data = o.data || {}, o.data.on = o.data.on || {}, this.manual || ("hover" === this.trigger ? (o.data.on.mouseenter = j(o.data.on.mouseenter, this.show), o.data.on.mouseleave = j(o.data.on.mouseleave, this.hide)) : "click" !== this.trigger || this.tooltipInDom ? "click" === this.trigger && this.tooltipInDom && (o.data.on.click = j(o.data.on.click, this.hide)) : o.data.on.click = j(o.data.on.click, this.show)), o } }, C = P, x = void 0, _ = void 0, S = void 0, T = void 0, D = i()({}, x, C, _, T, S, void 0, void 0); e["a"] = D }, 1038: function (t, e, n) { }, "2bf2": function (t, e, n) { "use strict"; var o = n("4db40"), i = n.n(o); i.a }, "2ddc": function (t, e, n) { "use strict"; var o = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { directives: [{ name: "show", rawName: "v-show", value: !!t.duration, expression: "!!duration" }], class: [t.isHorizontal ? "player-progress-time-hori" : "player-progress-time"] }, [n("span", { staticClass: "current" }, [t._v(t._s(t.formatTime(t.currentTime)))]), t.isHorizontal ? n("span", { staticClass: "separate" }, [t._v("/")]) : t._e(), n("span", { staticClass: "total" }, [t._v(t._s(t.formatTime(t.duration)))])]) }, i = [], a = n("3052"), r = n("f112"), l = n("48d1"), s = n("d253"), u = n("b74e"), c = Object(l["c"])({ props: { timeKeyDown: { type: Boolean, default: !0 }, isHorizontal: { type: Boolean, default: !1 } }, setup: function (t) { var e = Object(a["n"])(), n = e.currentTime, o = e.duration; return t.timeKeyDown && Object(s["d"])(n, o, u["k"]), { currentTime: n, duration: o, formatTime: r["a"] } } }), d = c, f = (n("b399"), n("d802")), v = Object(f["a"])(d, o, i, !1, null, "229920f7", null); e["a"] = v.exports }, "2f07": function (t, e, n) { }, "327c": function (t, e, n) { "use strict"; var o = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("KwaiPlayerControlsVolume", { ref: "playerVolume", staticClass: "player-bar-volume", attrs: { initial: t.initialVolume, "mute-tip-show-time": t.muteTipShowTime, "can-change-volume": t.canChangeVolume } }, [n("div", { staticClass: "muted-icon", attrs: { slot: "volume-mute-icon" }, on: { click: function (e) { return t.handleClick(!1) } }, slot: "volume-mute-icon" }), n("div", { staticClass: "unmuted-icon", attrs: { slot: "volume-icon" }, on: { click: function (e) { return t.handleClick(!0) } }, slot: "volume-icon" })]) }, i = [], a = n("3052"), r = n("48d1"), l = n("d253"), s = n("b74e"), u = Object(r["c"])({ components: { KwaiPlayerControlsVolume: a["i"] }, props: { canPreset: { type: Boolean, default: !0 }, volumeKeyDown: { type: Boolean, default: !0 }, initVolumeConfig: { type: Object, default: function () { return { volume: .5, setLocal: !0, localName: "visionVolume" } } }, canChangeVolume: { type: Boolean, default: !0 }, muted: { type: Boolean, default: !1 } }, setup: function (t, e) { var n = e.root, o = e.emit, i = Object(a["n"])(), u = i.volume, c = Object(r["a"])((function () { var e, n; return "number" === typeof (null === (e = t.initVolumeConfig) || void 0 === e ? void 0 : e.volume) ? null === (n = t.initVolumeConfig) || void 0 === n ? void 0 : n.volume : .5 })), d = Object(r["a"])((function () { var e; return (null === (e = t.initVolumeConfig) || void 0 === e ? void 0 : e.localName) || "visionVolume" })), f = Object(r["q"])(2e3); function v(t) { t > 1 && (t = 1), t <= .1 && (t = 0), setTimeout((function () { u.value = t }), 100) } function p(e) { t.canChangeVolume && v(e) } function h(t) { 38 === t.keyCode ? p(u.value + .2) : p(u.value - .2) } function m(e) { t.canChangeVolume && o("click-volume", e) } function b() { var t = Number(localStorage.getItem("visionVolumeTime")); if (!t || Number(Date.now()) - t > 864e5) localStorage.setItem("visionVolumeTime", String(Date.now())), n.$nextTick((function () { p(c.value) })); else { var e = Number(localStorage.getItem(d.value)) || c.value; n.$nextTick((function () { p(e) })) } } return Object(r["t"])(u, (function (t) { o("volume-change", t), localStorage.setItem(d.value, String(t)) })), Object(r["t"])((function () { return c.value }), (function (t) { p(t) })), Object(r["t"])((function () { return t.muted }), (function (t) { t && v(0) }), { immediate: !0 }), Object(s["k"])("change-volume", (function (t) { p(t) })), t.volumeKeyDown && Object(l["h"])(h), Object(r["t"])((function () { return t.canPreset }), (function (t) { t && b() })), Object(r["l"])((function () { t.canPreset && b() })), { initialVolume: c, muteTipShowTime: f, handleClick: m } } }), c = u, d = (n("35ed"), n("4ee5"), n("d802")), f = Object(d["a"])(c, o, i, !1, null, "40acb1c0", null); e["a"] = f.exports }, "35ed": function (t, e, n) { "use strict"; var o = n("e416a"), i = n.n(o); i.a }, "3ca9": function (t, e, n) { "use strict"; var o = n("4791"), i = n.n(o); i.a }, 4791: function (t, e, n) { }, "4db40": function (t, e, n) { }, "4de9": function (t, e, n) { }, "4ee5": function (t, e, n) { "use strict"; var o = n("5bab"), i = n.n(o); i.a }, 5085: function (t, e) { var n = /^(attrs|props|on|nativeOn|class|style|hook)$/; function o(t, e) { return function () { t && t.apply(this, arguments), e && e.apply(this, arguments) } } t.exports = function (t) { return t.reduce((function (t, e) { var i, a, r, l, s; for (r in e) if (i = t[r], a = e[r], i && n.test(r)) if ("class" === r && ("string" === typeof i && (s = i, t[r] = i = {}, i[s] = !0), "string" === typeof a && (s = a, e[r] = a = {}, a[s] = !0)), "on" === r || "nativeOn" === r || "hook" === r) for (l in a) i[l] = o(i[l], a[l]); else if (Array.isArray(i)) t[r] = i.concat(a); else if (Array.isArray(a)) t[r] = [i].concat(a); else for (l in a) i[l] = a[l]; else t[r] = e[r]; return t }), {}) } }, "555f": function (t, e, n) { }, "5bab": function (t, e, n) { }, "6a7f": function (t, e, n) { "use strict"; var o = n("1038"), i = n.n(o); i.a }, "9a1a": function (t, e, n) { }, a0ac: function (t, e, n) { "use strict"; var o = n("4de9"), i = n.n(o); i.a }, b31b: function (t, e, n) { "use strict"; var o = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { staticClass: "video-container-player", class: [t.ie && "is-ie", t.type] }, [n("KwaiPlayer", { ref: "player", class: t.isFullscreen ? "full-screen-video" : "", attrs: { width: "100%", height: "100%", muted: t.muted, kernel: t.KwaiPlayerKernel, config: t.kernelConfig }, on: { ended: t.handleEnded, pause: t.handlePause, play: t.handlePlay, playing: t.handlePlaying, seeked: t.handleSeeked, error: t.handleError, loadstart: t.handleLoadStart } }, [n("div", { staticClass: "video-interactive-area", on: { click: t.useVideoPlay } }), t.live ? t._e() : n("KwaiPlayerBar", { attrs: { position: "bottom", "auto-hide": t.autoHide } }, [n("KwaiPlayerControlsProgressBar", { staticClass: "player-bar-progress", attrs: { slot: "top" }, slot: "top" }), n("KwaiPlayerControlsPlay", { staticClass: "player-bar-play", attrs: { slot: "left", "tips-data": { playText: t.controlsTipsData.playText, pauseText: t.controlsTipsData.pauseText } }, slot: "left" }, [n("div", { staticClass: "play-icon", class: t.isEnd ? "reload-icon" : "", attrs: { slot: "play-icon" }, slot: "play-icon" }), n("div", { staticClass: "pause-icon", attrs: { slot: "pause-icon" }, slot: "pause-icon" })]), t.isHorizontal ? n("pl-tooltip", { staticClass: "play-next-tool", attrs: { slot: "left", placement: t.isFullscreen ? "auto" : "top", "insert-to-global": !t.isFullscreen }, slot: "left" }, [n("div", { staticClass: "play-bar-next" }, [n("i", { staticClass: "next-icon", on: { click: t.nextVideoFn } })]), n("div", { attrs: { slot: "content" }, slot: "content" }, [t._v(" " + t._s(t.controlsTipsData.nextText) + " ")])]) : t._e(), n("PlayerTime", { ref: "playerTime", staticClass: "play-time-text", attrs: { slot: "left", "time-key-down": t.config.timeKeyDown, "is-horizontal": t.isHorizontal }, slot: "left" }), n("KwaiPlayerControlsVolume", { attrs: { slot: "right", "volume-key-down": t.config.volumeKeyDown, "can-preset": t.canPresetVolume, "can-change-volume": t.canChangeVolume, muted: t.muted }, on: { "volume-change": t.handleVolumeChange }, slot: "right" }), t.showPlaySet ? n("PlaySet", { staticClass: "play-set", attrs: { slot: "right" }, slot: "right" }, [n("AutoPlay", { attrs: { slot: "auto" }, slot: "auto", model: { value: t.autoPlay, callback: function (e) { t.autoPlay = e }, expression: "autoPlay" } })], 1) : t._e(), t.showPlayRotate ? n("KwaiPlayerControlsRotate", { staticClass: "player-rotate", attrs: { slot: "right" }, slot: "right" }) : t._e(), n("KwaiPlayerControlsFullscreen", { ref: "fullscreen", staticClass: "player-bar-fullscreen", attrs: { slot: "right", "tips-data": { fullscreenText: t.controlsTipsData.fullscreenText, exitFullscreenText: t.controlsTipsData.exitFullscreenText } }, on: { change: t.fullscreenChange }, slot: "right" }, [n("div", { staticClass: "exit-fullscreen", attrs: { slot: "normal-screen-icon" }, slot: "normal-screen-icon" }), n("div", { staticClass: "enter-fullscreen", attrs: { slot: "full-screen-icon" }, slot: "full-screen-icon" })])], 1), t._t("video-end", null, { autoPlay: t.autoPlay }), n("PlayerError", { directives: [{ name: "show", rawName: "v-show", value: t.showError, expression: "showError" }], attrs: { "error-info": t.errorInfo }, on: { "retry-video": t.retryVideo } }), n("KwaiPlayerCenterState", { scopedSlots: t._u([{ key: "loading", fn: function () { return [n("Loading", { attrs: { width: 80, height: 80 } })] }, proxy: !0 }]) }, [n("div", { attrs: { slot: "error" }, slot: "error" })]), t.usePanoramic ? n("KwaiPlayerPanoramic") : t._e(), t.isHorizontal && t.showDanmaku ? n("PlayerDanmaku") : t._e()], 2), t._t("custom")], 2) }, i = [], a = (n("9a1a"), n("0d8b")), r = n("48d1"), l = n("3052"), s = (n("78b8"), n("2ddc")), u = n("327c"), c = n("7ac2"), d = n("fd6b"), f = n("0589"), v = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("KwaiPlayerDanmaku", { ref: "danmakuContainer", staticClass: "visio-danmaku", attrs: { "can-listen-page-visible": !1, "danmaku-config": t.danmakuConfig }, on: { "click-danmaku": t.handleClick }, scopedSlots: t._u([{ key: "danmaku-item", fn: function (e) { var o = e.scope; return [n("div", { directives: [{ name: "show", rawName: "v-show", value: o.commentInfo.isLiked, expression: "scope.commentInfo.isLiked" }], staticClass: "danmaku-like", class: ["self" === o.commentInfo.from ? "danmaku-like-self" : ""] }, [n("i", { staticClass: "danmaku-like-icon", on: { click: function (e) { return e.stopPropagation(), t.handleLike(o, e) } } }, [n("i", { directives: [{ name: "show", rawName: "v-show", value: o.commentInfo.isLiked, expression: "scope.commentInfo.isLiked" }], staticClass: "like-icon-num" }, [t._v("+1")])])]), n("div", { staticClass: "danmaku-bcg", class: ["self" === o.commentInfo.from ? "danmaku-bcg-self" : ""] }, [n("i", { directives: [{ name: "show", rawName: "v-show", value: !o.commentInfo.isLiked, expression: "!scope.commentInfo.isLiked" }], staticClass: "danmaku-bcg-icon", on: { click: function (e) { return t.handleLike(o, e) } } })])] } }]) }) }, p = [], h = n("4795"), m = n.n(h), b = n("d2ae"), y = n("0f9e"), g = n("9530"), w = n.n(g); function k(t) { return k = "function" === typeof Symbol && "symbol" === typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" === typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, k(t) } function O() { var t = I(["\n            mutation visionSendDanmaku($photoId: String, $position: Long, $body: String) {\n                visionSendDanmaku(photoId: $photoId, position: $position, body: $body) {\n                    result\n                    danmakuId\n                }\n            }\n        "]); return O = function () { return t }, t } function j() { var t = I(["\n            query visionDanmaku($photoId: String, $positionFromInclude: Long, $positionToExclude: Long, $pcursor: String, $timestamp: Long){\n                visionDanmaku(\n                    photoId: $photoId, positionFromInclude: $positionFromInclude, positionToExclude: $positionToExclude, pcursor: $pcursor\n                    timestamp: $timestamp\n                ){\n                    result\n                    positionFromInclude\n                    positionToExclude\n                    pcursor\n                    danmakus {\n                        id\n                        body\n                        position\n                        userId\n                        isLiked\n                        likeCount\n                        quality\n                        isShow\n                    }\n                }\n            }\n        "]); return j = function () { return t }, t } function I(t, e) { return e || (e = t.slice(0)), Object.freeze(Object.defineProperties(t, { raw: { value: Object.freeze(e) } })) } function P(t, e, n, o, i, a, r) { try { var l = t[a](r), s = l.value } catch (u) { return void n(u) } l.done ? e(s) : Promise.resolve(s).then(o, i) } function C(t) { return function () { var e = this, n = arguments; return new Promise((function (o, i) { var a = t.apply(e, n); function r(t) { P(a, o, i, r, l, "next", t) } function l(t) { P(a, o, i, r, l, "throw", t) } r(void 0) })) } } function x(t) { return D(t) || T(t) || S(t) || _() } function _() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function S(t, e) { if (t) { if ("string" === typeof t) return E(t, e); var n = Object.prototype.toString.call(t).slice(8, -1); return "Object" === n && t.constructor && (n = t.constructor.name), "Map" === n || "Set" === n ? Array.from(t) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? E(t, e) : void 0 } } function T(t) { if ("undefined" !== typeof Symbol && Symbol.iterator in Object(t)) return Array.from(t) } function D(t) { if (Array.isArray(t)) return E(t) } function E(t, e) { (null == e || e > t.length) && (e = t.length); for (var n = 0, o = new Array(e); n < e; n++)o[n] = t[n]; return o } function $(t, e) { var n = Object.keys(t); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(t); e && (o = o.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), n.push.apply(n, o) } return n } function L(t) { for (var e = 1; e < arguments.length; e++) { var n = null != arguments[e] ? arguments[e] : {}; e % 2 ? $(Object(n), !0).forEach((function (e) { V(t, e, n[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : $(Object(n)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e)) })) } return t } function V(t, e, n) { return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t } function A(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } function K(t, e) { for (var n = 0; n < e.length; n++) { var o = e[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(t, o.key, o) } } function F(t, e, n) { return e && K(t.prototype, e), n && K(t, n), t } function H(t, e) { if ("function" !== typeof e && null !== e) throw new TypeError("Super expression must either be null or a function"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && N(t, e) } function N(t, e) { return N = Object.setPrototypeOf || function (t, e) { return t.__proto__ = e, t }, N(t, e) } function B(t) { var e = q(); return function () { var n, o = z(t); if (e) { var i = z(this).constructor; n = Reflect.construct(o, arguments, i) } else n = o.apply(this, arguments); return R(this, n) } } function R(t, e) { return !e || "object" !== k(e) && "function" !== typeof e ? M(t) : e } function M(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t } function q() { if ("undefined" === typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" === typeof Proxy) return !0; try { return Date.prototype.toString.call(Reflect.construct(Date, [], (function () { }))), !0 } catch (t) { return !1 } } function z(t) { return z = Object.setPrototypeOf ? Object.getPrototypeOf : function (t) { return t.__proto__ || Object.getPrototypeOf(t) }, z(t) } var U = function (t) { H(n, t); var e = B(n); function n() { var t; return A(this, n), t = e.apply(this, arguments), t.readDanmakuInterval = 3e4, t.startPosition = 0, t.endPosition = t.readDanmakuInterval, t.isPlay = !1, t } return F(n, [{ key: "fetchMoreDanmaku", value: function (t) { var e = t.photoId, n = t.position, o = t.pcursor; this.danmaku.loading || "no_more" === o || this.danmaku.fetchMore({ variables: { photoId: e, pcursor: o, positionFromInclude: n, positionToExclude: n + this.readDanmakuInterval }, updateQuery: function (t, e) { var n, o; return { visionDanmaku: L(L({}, (null === e || void 0 === e ? void 0 : e.visionDanmaku) || {}), {}, { danmakus: [].concat(x((null === t || void 0 === t || null === (n = t.visionDanmaku) || void 0 === n ? void 0 : n.danmakus) || []), x((null === e || void 0 === e || null === (o = e.visionDanmaku) || void 0 === o ? void 0 : o.danmakus) || [])) }) } } }) } }, { key: "sendDanmaku", value: function () { var t = C(m.a.mark((function t(e) { var n, o, i, a, r; return m.a.wrap((function (t) { while (1) switch (t.prev = t.next) { case 0: if (n = e.photoId, o = e.position, i = e.body, i && n && !(o < 0)) { t.next = 3; break } return t.abrupt("return"); case 3: return a = 0, t.prev = 4, t.next = 7, this.visionSendDanmakuMutation.mutate({ photoId: n, position: o, body: i }); case 7: a = null === (r = this.visionSendDanmakuMutation.data.visionSendDanmaku) || void 0 === r ? void 0 : r.result, t.next = 13; break; case 10: t.prev = 10, t.t0 = t["catch"](4), console.log(t.t0); case 13: return t.abrupt("return", a); case 14: case "end": return t.stop() } }), t, this, [[4, 10]]) }))); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "pcursor", get: function () { var t; return (null === (t = this.danmaku.data.visionDanmaku) || void 0 === t ? void 0 : t.pcursor) || "" } }, { key: "positionFromInclude", get: function () { var t; return (null === (t = this.danmaku.data.visionDanmaku) || void 0 === t ? void 0 : t.positionFromInclude) || 0 } }, { key: "positionToExclude", get: function () { var t; return (null === (t = this.danmaku.data.visionDanmaku) || void 0 === t ? void 0 : t.positionToExclude) || this.readDanmakuInterval } }, { key: "danmakuList", get: function () { var t; return (null === (t = this.danmaku.data.visionDanmaku) || void 0 === t ? void 0 : t.danmakus) || [] } }]), n }(b["a"]); function W(t, e, n, o, i, a, r) { try { var l = t[a](r), s = l.value } catch (u) { return void n(u) } l.done ? e(s) : Promise.resolve(s).then(o, i) } function G(t) { return function () { var e = this, n = arguments; return new Promise((function (o, i) { var a = t.apply(e, n); function r(t) { W(a, o, i, r, l, "next", t) } function l(t) { W(a, o, i, r, l, "throw", t) } r(void 0) })) } } function J(t) { var e = t.photoId, n = t.startPostion, o = t.currentTime, i = t.pcursor, a = t.canPull, r = t.model, l = r.readDanmakuInterval, s = n.value, u = Math.ceil(1e3 * o.value); u + 1 >= n.value + l ? (s = n.value + l + 1, n.value = s, i.value = "") : i.value = r.pcursor, a.value && r.fetchMoreDanmaku({ photoId: e, position: s, pcursor: i.value }) } function Q(t) { var e = t.photoId, n = t.currentTime, o = t.model, i = t.isDanmakuOpen, a = Object(r["q"])(0), s = Object(r["q"])(!0), u = Object(r["q"])(o.pcursor), c = null; Object(l["m"])("play", (function () { s.value = !0, c = setInterval((function () { i.value && J({ photoId: e.value, startPostion: a, currentTime: n, pcursor: u, canPull: s, model: o }) }), 2e3) })), Object(l["m"])("pause", (function () { s.value = !1, c && clearInterval(c) })), Object(l["m"])("ended", (function () { s.value = !1, u.value = "", c && clearInterval(c) })), Object(l["m"])("error", (function () { s.value = !1, c && clearInterval(c) })), Object(l["m"])("seeked", G(m.a.mark((function t() { return m.a.wrap((function (t) { while (1) switch (t.prev = t.next) { case 0: s.value = !0, u.value = "", a.value = Math.ceil(1e3 * n.value), o.startPosition = a.value, o.endPosition = a.value + o.readDanmakuInterval, c && clearInterval(c), c = setInterval((function () { i.value && J({ photoId: e.value, startPostion: a, currentTime: n, pcursor: u, canPull: s, model: o }) }), 2e3); case 7: case "end": return t.stop() } }), t) })))), Object(r["t"])((function () { return e.value }), (function () { o.startPosition = 0, o.endPosition = o.readDanmakuInterval, u.value = "", s.value = !1, c && clearInterval(c) })), Object(r["j"])((function () { c && clearInterval(c) })) } Object(y["c"])([Object(b["d"])({ query: w()(j()), variables: function (t) { var e = +new Date; return { photoId: t.params.photoId, positionFromInclude: this.startPosition, positionToExclude: this.endPosition, pcursor: "", timestamp: e } }, skip: function () { return !this.isPlay } })], U.prototype, "danmaku", void 0), Object(y["c"])([Object(b["c"])({ mutation: w()(O()), variables: function (t) { var e = t.photoId, n = t.position, o = t.body; return { photoId: e, position: n, body: o } } })], U.prototype, "visionSendDanmakuMutation", void 0); var X = n("b74e"), Y = n("77a5"), Z = n("a7bc"), tt = n("71b0"); function et(t, e, n, o, i, a, r) { try { var l = t[a](r), s = l.value } catch (u) { return void n(u) } l.done ? e(s) : Promise.resolve(s).then(o, i) } function nt(t) { return function () { var e = this, n = arguments; return new Promise((function (o, i) { var a = t.apply(e, n); function r(t) { et(a, o, i, r, l, "next", t) } function l(t) { et(a, o, i, r, l, "throw", t) } r(void 0) })) } } var ot = Object(r["c"])({ props: {}, components: { KwaiPlayerDanmaku: l["j"] }, setup: function (t, e) { var n = e.root, o = Object(l["n"])(), i = o.currentTime, a = o.paused, s = Object(r["p"])({ isFirstPlay: !0, canRestartDanmuku: !1, pauseAddDanmaku: !1 }), u = Object(b["f"])(U), c = Object(r["a"])((function () { var t; return null === (t = n.$route.params) || void 0 === t ? void 0 : t.photoId })), d = Object(r["a"])((function () { return u.danmakuList })), f = new Set, v = Object(X["l"])(), p = Object(Z["e"])(), h = { all: 0, subCount: 0, objCount: 0 }; function y() { h.all = 0, h.subCount = 0, h.objCount = 0 } function g() { p({ type: "SHOW", event_name: "DAMAKU_SHOW_CNT", event_value: { all_cnt: h.all, profile_cnt: h.objCount, my_profile_cnt: h.subCount } }), y() } var w = Object(l["l"])("danmakuSetting", { isDanmakuOpen: !1, density: "medium", opacity: 1 }), k = Object(r["p"])({ fontSize: 20, fontFamily: "PingFangSC, PingFangSC-Medium", lineHeight: 35, canChangeFont: !1, danmakuLineNum: 4, handleHover: !0, itemCallBack: function (t) { h.all++, "self" === t.from ? h.subCount++ : h.objCount++ } }), O = Object(b["f"])(Y["a"]), j = Object(r["a"])((function () { return !!(null === O || void 0 === O ? void 0 : O.userInfo.id) })), I = Object(r["q"])(null), P = Object(r["a"])((function () { return w.value.isDanmakuOpen })), C = Object(r["q"])([]); function x(t) { C.value.push(t) } function _() { var t, e, n = Math.ceil(1e3 * i.value), o = (null === (t = I.value) || void 0 === t || null === (e = t.screen) || void 0 === e ? void 0 : e.width) / 150 * 1e3; C.value.forEach((function (t) { var e; n <= t.position + o && (null === (e = I.value) || void 0 === e || e.send({ content: t.content, from: "self" }, !0)) })) } function S() { C.value = [] } function T() { C.value.length && (_(), S()) } function D(t) { return t && t.length > 30 ? t.slice(0, 30) + "..." : t } function E(t) { w.value.isDanmakuOpen = t } function $(t) { var e, n; null === (e = I.value) || void 0 === e || null === (n = e.pool) || void 0 === n || n.lines.forEach((function (e) { e.items.forEach((function (e) { f.has(t) && e.commentInfo.dmId === t && (e.commentInfo.isLiked = !0) })) })) } function L(t) { v("login", { source: tt["b"].PC_DAMAKU_LIKE_BUTTON, success: function () { f.add(t.commentInfo.dmId), $(t.commentInfo.dmId) } }) } function V(t, e) { if (!j.value) return v("reset-full", !1), void L(t); var n = t.commentInfo.dmId; f.has(n) ? (f.delete(n), t.commentInfo.isLiked = !1) : (f.add(t.commentInfo.dmId), t.commentInfo.isLiked = !0), p({ type: "CLICK", event_name: "DAMAKU_SHOW_CNT", event_value: { like_type: t.commentInfo.isLiked ? "LIKE" : "DISLIKE" } }) } function A(t, e) { t.commentInfo.isLiked || V(t, e) } return Object(r["t"])((function () { return c.value }), (function () { I.value.stop(), s.isFirstPlay = !0, P.value || g() })), Object(r["t"])((function () { return P.value }), (function (t) { !t && a.value && (s.canRestartDanmuku = !1) })), Q({ photoId: c, currentTime: i, model: u, isDanmakuOpen: P }), Object(l["m"])("play", (function () { if (s.isFirstPlay) return I.value.start(), s.isFirstPlay = !1, void (u.isPlay = !0); P.value && s.canRestartDanmuku ? I.value.restart() : I.value.start(), s.canRestartDanmuku = !0 })), Object(l["m"])("timeupdate", (function () { if (w.value.isDanmakuOpen && !s.pauseAddDanmaku) { var t = Math.ceil(1e3 * i.value); d.value.forEach((function (e) { if (e && t >= e.position + 300 && t <= e.position + 1e4 && !e.isShow) { var n, o = e.userId, i = { content: D(e.body), dmId: e.id, isLiked: !1 }; o === (null === O || void 0 === O || null === (n = O.userInfo) || void 0 === n ? void 0 : n.eid) && (i.from = "self"), f.has(i.dmId) && (i.isLiked = !0), I.value.send(i), e.isShow = !0 } })), T() } })), Object(l["m"])("pause", (function () { s.canRestartDanmuku = !0, I.value.pause() })), Object(l["m"])("seeked", (function () { u.isPlay = !0, a.value ? s.canRestartDanmuku = !1 : s.canRestartDanmuku = !0, I.value.clearAllDanmaku() })), Object(l["m"])("ended", (function () { I.value.stop() })), Object(X["k"])("send-danmu", function () { var t = nt(m.a.mark((function t(e) { var n, o, r, l, s; return m.a.wrap((function (t) { while (1) switch (t.prev = t.next) { case 0: return n = D(e.text), o = e.isCheck, r = Math.ceil(1e3 * i.value), a.value || !o ? x({ content: n, from: "self", dmId: -Date.now(), position: r, isLiked: !1 }) : null === (l = I.value) || void 0 === l || l.send({ content: n, from: "self", dmId: -Date.now(), isLiked: !1 }, !0), t.next = 6, u.sendDanmaku({ photoId: c.value, position: Math.ceil(1e3 * i.value), body: e.text }); case 6: s = t.sent, e.callback({ result: s }); case 8: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }()), Object(X["k"])("change-danmaku-show", (function (t) { E(t.show), !t.show && t.canSendLog && g() })), Object(X["k"])("reload-video", (function (t) { u.danmaku.refetch(), s.isFirstPlay = !0 })), Object(X["o"])((function () { return window }), "resize", (function () { s.pauseAddDanmaku = !0, setTimeout((function () { s.pauseAddDanmaku = !1 }), 100) })), Object(r["l"])((function () { window.addEventListener("beforeunload", g) })), Object(r["n"])((function () { window.removeEventListener("beforeunload", g) })), { danmakuContainer: I, danmakuConfig: k, handleLike: V, handleClick: A } } }), it = ot, at = (n("6a7f"), n("d802")), rt = Object(at["a"])(it, v, p, !1, null, "d18415d8", null), lt = rt.exports, st = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { ref: "playset", staticClass: "play-setting" }, [n("div", { directives: [{ name: "show", rawName: "v-show", value: t.show, expression: "show" }], ref: "opt", staticClass: "play-setting-container" }, [t._t("auto")], 2), n("div", { staticClass: "play-setting-btn", on: { click: function (e) { return t.changeShow(!t.show) } } })]) }, ut = []; function ct(t) { var e = Object(r["q"])(!1); return t ? (Object(r["l"])((function () { Object(r["g"])((function () { var n = null; if (n = t && t.value ? t.value : document.querySelector(t), n) { var o = new IntersectionObserver((function (t) { if (t[0]) { var n = t[0]; e.value = n.isIntersecting } })); o.observe(n), n.ob = o } })) })), Object(r["n"])((function () { var e; if (null === t || void 0 === t || null === (e = t.value) || void 0 === e ? void 0 : e.ob) t.value.ob.unobserve(t.value), t.value.ob.disconnect(); else if ("string" === typeof t) { var n, o, i = document.querySelector(t); null === i || void 0 === i || null === (n = i.ob) || void 0 === n || n.unobserve(i), null === i || void 0 === i || null === (o = i.ob) || void 0 === o || o.disconnect() } })), { show: e }) : { show: e } } var dt = Object(r["c"])({ setup: function () { var t = Object(r["q"])(!1), e = Object(r["q"])(null), n = ct(e), o = n.show, i = ct(".volume-slide"), a = i.show; function l(e) { t.value = !t.value } function s(n) { e.value.contains(n.target) || (t.value = !1) } return Object(X["k"])("close", (function () { t.value = !1 })), Object(r["l"])((function () { var t = document.body; t.addEventListener("click", s) })), Object(r["n"])((function () { var t = document.body; t.removeEventListener("click", s) })), Object(r["t"])((function () { return [o.value, a.value] }), (function (e) { e[0] && !e[1] || (t.value = !1) })), { show: t, changeShow: l, playset: e } } }), ft = dt, vt = (n("2bf2"), Object(at["a"])(ft, st, ut, !1, null, "3ed0fe42", null)), pt = vt.exports, ht = n("9b51"), mt = n("d253"), bt = n("bf6a"); function yt(t, e) { var n = Object.keys(t); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(t); e && (o = o.filter((function (e) { return Object.getOwnPropertyDescriptor(t, e).enumerable }))), n.push.apply(n, o) } return n } function gt(t) { for (var e = 1; e < arguments.length; e++) { var n = null != arguments[e] ? arguments[e] : {}; e % 2 ? yt(Object(n), !0).forEach((function (e) { wt(t, e, n[e]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : yt(Object(n)).forEach((function (e) { Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(n, e)) })) } return t } function wt(t, e, n) { return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t } var kt = Object(r["c"])({ components: { KwaiPlayer: l["a"], KwaiPlayerBar: l["b"], KwaiPlayerCenterState: l["c"], KwaiPlayerControlsFullscreen: l["d"], KwaiPlayerControlsPlay: l["e"], KwaiPlayerControlsProgressBar: l["f"], KwaiPlayerControlsProgressTime: l["g"], KwaiPlayerControlsVolume: u["a"], KwaiPlayerPanoramic: l["k"], PlayerTime: s["a"], Loading: c["a"], PlayerError: f["a"], PlaySet: pt, AutoPlay: d["a"], plTooltip: a["a"], PlayerDanmaku: lt, KwaiPlayerControlsRotate: l["h"] }, props: { src: { type: [Object, String] }, muted: { type: Boolean, default: !1 }, live: { type: Boolean, default: !1 }, config: { type: Object, default: function () { return { timeKeyDown: !0, volumeKeyDown: !0 } } }, type: { type: String }, isSpherical: { type: Boolean }, needResetPlayTime: Boolean, fullbackPlayUrl: { type: String, default: "" }, showPlaySet: { type: Boolean, default: !0 }, showPlayRotate: { type: Boolean, default: !0 }, showDanmaku: { type: Boolean, default: !0 }, canPresetVolume: { type: Boolean, default: !0 }, canChangeVolume: { type: Boolean, default: !0 }, controlsTipsData: { type: Object, default: function () { return { nextText: "下一个", fullscreenText: "全屏模式", exitFullscreenText: "普通模式", playText: "播放", pauseText: "暂停" } } } }, setup: function (t, e) { var n = Object(r["q"])(null), o = Object(b["f"])(ht["a"]), i = Object(r["p"])({ nativeFirst: !0, startFromSec: 0, isLive: t.live }), a = Object(r["a"])((function () { return "horizontal" === t.type })), l = Object(r["a"])((function () { return t.src })), s = Object(r["a"])((function () { return t.fullbackPlayUrl })), u = Object(r["a"])((function () { return t.muted })), c = Object(r["q"])(!0), d = Object(r["q"])(null); Object(r["t"])((function () { return c.value }), (function (t) { e.emit("onPlayChange", t) }), { immediate: !0 }); var f = Object(r["q"])(!1), v = Object(r["p"])({ playStatus: !1, autoHide: !0, isEnd: !1, showError: !1, isFullscreen: !1, errorInfo: { errorTitle: "无法连接网络，请稍后再试", retryText: "点击重试" } }), p = Object(r["q"])(Object(X["f"])()), h = Object(Z["e"])(), m = Object(X["l"])(), y = Object(r["a"])((function () { return t.isSpherical && !p.value })); Object(r["t"])((function () { return t.needResetPlayTime }), (function (t) { t && (i.startFromSec = 0) })); var g = Object(mt["b"])(mt["a"], { state: v, live: t.live }); function w() { var e, o, i, a; t.live || ((null === (e = n.value) || void 0 === e || null === (o = e.video) || void 0 === o ? void 0 : o.paused) ? null === (i = n.value) || void 0 === i || i.play() : null === (a = n.value) || void 0 === a || a.pause()) } function k() { var t, e, o; (null === (t = n.value) || void 0 === t || null === (e = t.video) || void 0 === e ? void 0 : e.paused) && (null === (o = n.value) || void 0 === o || o.play()) } function O() { v.autoHide = !1 } function j() { v.autoHide = !0, v.isEnd = !1, v.showError = !1 } function I() { e.emit("changeLoad", !1) } function P() { var t; o.kernelLoadedTime = +new Date, o.kernelInstance = null === (t = n.value) || void 0 === t ? void 0 : t.kernelInstance, Object(mt["e"])(o.kernelInstance, h) } function C() { e.emit("ended"), v.isEnd = !0 } function x(t) { var e; if (1003 === t.code || 1203 === t.code) return v.showError = !1, i.startFromSec = (null === (e = d.value) || void 0 === e ? void 0 : e.currentTime) || 0, m("refetch-video", {}); t instanceof Event || o.ignoreErrorList.find((function (e) { return t.message && t.message.indexOf(e) > -1 })) ? v.showError = !1 : v.showError = !0 } function _(t) { var e; v.isFullscreen = t; var o, i = (null === (e = n.value) || void 0 === e ? void 0 : e.rotation) || 0; if (t && i % 180 !== 0) null === (o = n.value) || void 0 === o || o.resetVideoCss(window.screen.width, window.screen.height); else if (!t && a.value && i % 180 !== 0) { var r, l, s = null === (r = n.value) || void 0 === r ? void 0 : r.playerContainer, u = s.clientWidth, c = s.clientHeight; null === (l = n.value) || void 0 === l || l.resetVideoCss(u, c) } else { var d; null === (d = n.value) || void 0 === d || d.resetVideoCss() } } Object(X["k"])("change-video", (function (e) { Object(mt["f"])({ summaryData: e.summaryQosData, waitingTime: e.waitingTime, pageLoadTime: e.pageLoadTime }, h), g.value && !t.live && (g.value = !1) })), Object(X["k"])("reload-video", (function (t) { var e; null === (e = n.value) || void 0 === e || e.play() })), Object(X["k"])("cancel-next", (function (t) { var e; null === (e = n.value) || void 0 === e || e.pause() })), Object(mt["g"])(o, n, { src: l, fullbackPlayUrl: s, muted: u, showDegradeTips: g }), Object(mt["c"])((function () { return w() }), X["k"]), Object(r["j"])((function () { var t; null === (t = n.value) || void 0 === t || t.resetVideo() })); var S = Object(r["q"])(null); function T(t) { S.value.fullscreenChange(t) } function D(t) { var e; (i.startFromSec = t, g.value) ? g.value = !1 : null === (e = n.value) || void 0 === e || e.reload(); v.showError = !1 } function E() { e.emit("next") } function $(t) { e.emit("volume-change", t) } return Object(X["k"])("reset-full", T), Object(r["t"])((function () { return v.showError }), (function (t) { e.emit("playStatusChange", t) }), { immediate: !0 }), gt(gt({ player: n, kernelConfig: i, KwaiPlayerKernel: bt["a"], showVideoEnd: f, useVideoPlay: w }, Object(r["s"])(v)), {}, { handlePause: O, handlePlay: j, handleEnded: C, handleSeeked: k, handleError: x, retryVideo: D, handleLoadStart: P, ie: p, isHorizontal: a, autoPlay: c, nextVideoFn: E, usePanoramic: y, fullscreenChange: _, playerTime: d, handlePlaying: I, fullscreen: S, handleVolumeChange: $ }) } }), Ot = kt, jt = (n("a0ac"), Object(at["a"])(Ot, o, i, !1, null, "0b5c917b", null)); e["a"] = jt.exports }, b399: function (t, e, n) { "use strict"; var o = n("dd2d"), i = n.n(o); i.a }, d0a8: function (t, e) { t.exports = function (t) { var e = {}; function n(o) { if (e[o]) return e[o].exports; var i = e[o] = { i: o, l: !1, exports: {} }; return t[o].call(i.exports, i, i.exports, n), i.l = !0, i.exports } return n.m = t, n.c = e, n.d = function (t, e, o) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: o }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var o = Object.create(null); if (n.r(o), Object.defineProperty(o, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var i in t) n.d(o, i, function (e) { return t[e] }.bind(null, i)); return o }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "/dist/", n(n.s = 116) }({ 0: function (t, e, n) { "use strict"; n.d(e, "a", (function () { return o })); var o = "sp" }, 1: function (t, e, n) { "use strict"; function o(t, e, n, o, i, a, r, l) { var s, u = "function" == typeof t ? t.options : t; if (e && (u.render = e, u.staticRenderFns = n, u._compiled = !0), o && (u.functional = !0), a && (u._scopeId = "data-v-" + a), r ? (s = function (t) { (t = t || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (t = __VUE_SSR_CONTEXT__), i && i.call(this, t), t && t._registeredComponents && t._registeredComponents.add(r) }, u._ssrRegister = s) : i && (s = l ? function () { i.call(this, this.$root.$options.shadowRoot) } : i), s) if (u.functional) { u._injectStyles = s; var c = u.render; u.render = function (t, e) { return s.call(e), c(t, e) } } else { var d = u.beforeCreate; u.beforeCreate = d ? [].concat(d, s) : [s] } return { exports: t, options: u } } n.d(e, "a", (function () { return o })) }, 116: function (t, e, n) { "use strict"; n.r(e); var o = n(0), i = "".concat(o.a, "-switch"), a = { name: i, beforeCreate: function () { this.className = i }, props: { value: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 } }, computed: { checkboxValue: { get: function () { return this.value }, set: function (t) { this.$emit("input", t), this.$emit("change", t) } } } }, r = n(1), l = Object(r.a)(a, (function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { class: t.className }, [n("div", { class: t.className + "__ui-wrapper" }, [n("input", { directives: [{ name: "model", rawName: "v-model", value: t.checkboxValue, expression: "checkboxValue" }], class: t.className + "__input", attrs: { type: "checkbox", disabled: t.disabled }, domProps: { checked: Array.isArray(t.checkboxValue) ? t._i(t.checkboxValue, null) > -1 : t.checkboxValue }, on: { change: function (e) { var n = t.checkboxValue, o = e.target, i = !!o.checked; if (Array.isArray(n)) { var a = t._i(n, null); o.checked ? a < 0 && (t.checkboxValue = n.concat([null])) : a > -1 && (t.checkboxValue = n.slice(0, a).concat(n.slice(a + 1))) } else t.checkboxValue = i } } }), t._v(" "), n("i", { class: t.className + "__ui" })]), t._v(" "), t.$slots.default ? n("span", { class: t.className + "__label" }, [t._t("default")], 2) : t._e()]) }), [], !1, null, null, null).exports; l.install = function (t) { t.component(l.name, l) }, e.default = l } }) }, dd2d: function (t, e, n) { }, e416a: function (t, e, n) { }, fa27: function (t, e, n) { "use strict"; var o = n("555f"), i = n.n(o); i.a }, fd6b: function (t, e, n) { "use strict"; var o = function () { var t = this, e = t.$createElement, n = t._self._c || e; return n("div", { staticClass: "auto-warpper" }, [n("div", { staticClass: "auto-title" }, [t._v(" 自动播放 ")]), n("sp-switch", { staticClass: "auto-btn", model: { value: t.curAutoPlay, callback: function (e) { t.curAutoPlay = e }, expression: "curAutoPlay" } })], 1) }, i = [], a = n("48d1"); function r(t) { var e = Object(a["q"])(!0); return Object(a["t"])(e, (function (e) { localStorage.setItem("autoplay", e ? "1" : "0"), t(e) })), Object(a["l"])((function () { e.value = "0" !== localStorage.getItem("autoplay") })), { curAutoPlay: e } } var l = n("d0a8"), s = n.n(l), u = (n("2f07"), Object(a["c"])({ components: { spSwitch: s.a }, model: { prop: "autoPlay", event: "change" }, setup: function (t, e) { var n = e.emit; function o(t) { n("change", t) } var i = r(o), a = i.curAutoPlay; return { curAutoPlay: a } } })), c = u, d = (n("fa27"), n("d802")), f = Object(d["a"])(c, o, i, !1, null, "68d3f7ea", null); e["a"] = f.exports } }]);
//# sourceMappingURL=csr-movie-video-short-video-video.ac874c50.js.map