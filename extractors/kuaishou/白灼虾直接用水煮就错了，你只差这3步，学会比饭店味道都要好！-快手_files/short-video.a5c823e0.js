(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["short-video"],{"00fd":function(e,t,n){var r=n("9e69"),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;function c(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(c){}var o=a.call(e);return r&&(t?e[u]=n:delete e[u]),o}e.exports=c},"039c":function(e,t,n){},"03dd":function(e,t,n){var r=n("eac5"),o=n("57a5"),i=Object.prototype,a=i.hasOwnProperty;function u(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}e.exports=u},"0483":function(e,t,n){},"07c7":function(e,t){function n(){return!1}e.exports=n},"087d":function(e,t){function n(e,t){var n=-1,r=t.length,o=e.length;while(++n<r)e[o+n]=t[n];return e}e.exports=n},"08cc":function(e,t,n){var r=n("1a8c");function o(e){return e===e&&!r(e)}e.exports=o},"0901":function(e,t,n){"use strict";var r=n("dd53"),o=n.n(r);o.a},"0b07":function(e,t,n){var r=n("34ac"),o=n("3698");function i(e,t){var n=o(e,t);return r(n)?n:void 0}e.exports=i},"0d24":function(e,t,n){(function(e){var r=n("2b3e"),o=n("07c7"),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===i,c=u?r.Buffer:void 0,s=c?c.isBuffer:void 0,l=s||o;e.exports=l}).call(this,n("6984")(e))},"0fa5":function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n("4795"),o=n.n(r),i=n("0f9e"),a=n("d2ae"),u=n("cf25"),c=n("7d89"),s=n.n(c);function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,u,"next",e)}function u(e){v(i,r,o,a,u,"throw",e)}a(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function w(e){var t=I();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var P=function(e){g(n,e);var t=w(n);function n(){var e;return m(this,n),e=t.apply(this,arguments),e._canShare=!1,e._handleCloseCaptcha=function(){},e}return y(n,[{key:"handleShareRequest",value:function(){var e=h(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object.assign({kpn:"KUAISHOU_VISION",kpf:"PC_WEB"},n,t),e.next=3,this.shareMutation.mutate(r);case 3:return e.next=5,this.handleCaptcha(r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"handleCaptcha",value:function(){var e=h(o.a.mark((function e(t){var n,r=this;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=function(){var e=h(o.a.mark((function e(n){var i,a,c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.captchaObj){e.next=4;break}return r.shareMutation.data.share&&(r._canShare=!0),n(),e.abrupt("return");case 4:return r._canShare=!1,e.next=7,Object(u["a"])({url:r.captchaObj.ztUnionVerifyUrl});case 7:if(i=e.sent,1!==i.result){e.next=17;break}return s.a.set("ztIdentityVerificationType",String(null!==(a=i.type)&&void 0!==a?a:""),{path:"/"}),s.a.set("ztIdentityVerificationCheckToken",null!==(c=i.token)&&void 0!==c?c:"",{path:"/"}),e.next=13,r.shareMutation.mutate(d({},t));case 13:r._canShare=!0,n(),e.next=18;break;case 17:0!==i.result?(r._canShare=!1,r._handleCloseCaptcha()):(r._canShare=!0,n());case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",new Promise((function(e){n(e)})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleQrShare",value:function(){var e=h(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.config,i=n.shareExtInfo,e.next=3,this.handleShareRequest({shareChannel:"WECHAT",shareMethod:"PICTURE",shareObjectId:t,extTokenStoreParams:i},r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"handleTokenShare",value:function(){var e=h(o.a.mark((function e(t,n){var r,i,a,u;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.config,i=n.shareExtInfo,a=n.extTransientParams,u=n.extRecoParams,e.next=3,this.handleShareRequest({shareChannel:"COPY_LINK",shareMethod:"TOKEN",shareObjectId:t,extTokenStoreParams:i,extTransientParams:a,extRecoParams:u},r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"handleCardShare",value:function(){var e=h(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.shareId,r=t.shareChannel,i=t.shareInfo,a=t.config,e.next=3,this.handleShareRequest({shareChannel:r,shareMethod:"CARD",shareObjectId:n,extTokenStoreParams:i},a);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendShareLog",value:function(){var e=h(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object.assign({kpn:"KUAISHOU_VISION",isSmallApp:!1},n,t),e.next=3,this.shareLogMutation.mutate(r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setHandleCloseCaptcha",value:function(e){this._handleCloseCaptcha=e}},{key:"shareResult",get:function(){return this.shareMutation.data.result}},{key:"cardShareObj",get:function(){var e=this.shareMutation.data.share.shareObject,t=e.shareId,n=e.shareObjectId,r=e.shareResourceType,o=e.coverUrls,i=void 0===o?[]:o,a=e.subTitle,u=e.shareUrl,c=e.title;return{shareId:t,shareObjectId:n,shareResourceType:r,image:i[0]||"",summary:a,url:u,title:c}}},{key:"tokenShareObj",get:function(){if(this.shareMutation.data.share){var e=this.shareMutation.data.share.shareObject,t=e.shareId,n=e.shareObjectId,r=e.shareResourceType,o=e.shareMessage;return{shareId:t,shareObjectId:n,shareResourceType:r,tokenUrl:o}}return{}}},{key:"qrShareObj",get:function(){if(this.shareMutation.data.share){var e=this.shareMutation.data.share.shareObject,t=e.shareId,n=e.shareObjectId,r=e.shareResourceType,o=e.shareUrl;return{shareId:t,shareObjectId:n,shareResourceType:r,qrUrl:o}}return{}}},{key:"captchaObj",get:function(){var e=this.shareMutation.data.payLoad;if(e){var t=JSON.parse(e);return t}}},{key:"canShare",get:function(){return this._canShare}}]),n}(a["a"]);Object(i["c"])([Object(a["e"])({url:"/rest/zt/share/w/any",method:"POST",headers:{contentType:"application/x-www-form-urlencoded"},variables:function(e){return e}})],P.prototype,"shareMutation",void 0),Object(i["c"])([Object(a["e"])({url:"/rest/zt/share/w/tp/once",method:"POST",headers:{contentType:"application/x-www-form-urlencoded"},variables:function(e){return e}})],P.prototype,"shareLogMutation",void 0)},1290:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},1310:function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},1368:function(e,t,n){var r=n("da03"),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function i(e){return!!o&&o in e}e.exports=i},"162b":function(e,t,n){"use strict";var r=n("b9e4"),o=n.n(r);o.a},1651:function(e,t,n){"use strict";var r=n("c10c"),o=n.n(r);o.a},1838:function(e,t,n){var r=n("c05f"),o=n("9b02"),i=n("8604"),a=n("f608"),u=n("08cc"),c=n("20ec"),s=n("f4d6"),l=1,f=2;function d(e,t){return a(e)&&u(t)?c(s(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,l|f)}}e.exports=d},"18d8":function(e,t,n){var r=n("234d"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=a},"1a8c":function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},"1af9":function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var r=n("4795"),o=n.n(r),i=n("0f9e"),a=n("d2ae"),u=n("9530"),c=n.n(u),s=n("b74e"),l=n("afbc"),f=n("90cd"),d=n("c540"),p=n("b765");function v(){var e=m(["\n            ","\n            query visionSearchPhoto(\n                $keyword: String\n                $pcursor: String\n                $searchSessionId: String\n                $page: String\n                $webPageArea: String\n            ) {\n                visionSearchPhoto(\n                    keyword: $keyword\n                    pcursor: $pcursor\n                    searchSessionId: $searchSessionId\n                    page: $page\n                    webPageArea: $webPageArea\n                ) {\n                    result\n                    llsid\n                    webPageArea\n                    feeds {\n                        ...feedContent\n                    }\n                    searchSessionId\n                    pcursor\n                    aladdinBanner {\n                        imgUrl\n                        link\n                    }\n                }\n            }\n        "]);return v=function(){return e},e}function h(){var e=m(["\n            query graphqlSearchUser(\n                $keyword: String\n                $pcursor: String\n                $searchSessionId: String\n            ) {\n                visionSearchUser(\n                    keyword: $keyword\n                    pcursor: $pcursor\n                    searchSessionId: $searchSessionId\n                ) {\n                    result\n                    users {\n                        fansCount\n                        photoCount\n                        isFollowing\n                        user_id\n                        headurl\n                        user_text\n                        user_name\n                        verified\n                        verifiedDetail {\n                            description\n                            iconType\n                            newVerified\n                            musicCompany\n                            type\n                        }\n                    }\n                    searchSessionId\n                    pcursor\n                }\n            }\n        "]);return h=function(){return e},e}function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(e){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,u,"next",e)}function u(e){y(i,r,o,a,u,"throw",e)}a(void 0)}))}}function O(e){return I(e)||k(e)||j(e)||w()}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e,t){if(e){if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function k(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function I(e){if(Array.isArray(e))return C(e)}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function E(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function D(e){var t=M();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==b(t)&&"function"!==typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var V=function(e){E(n,e);var t=D(n);function n(){var e;return x(this,n),e=t.apply(this,arguments),e.photoLimit=-1,e.canFetch=!1,e}return L(n,[{key:"refetchUser",value:function(){this.graphqlSearchUser.refetch()}},{key:"fetchMoreUser",value:function(){this.graphqlSearchUser.loading||this.graphqlSearchUser.fetchMore({variables:{pcursor:this.userPcursor,searchSessionId:this.userSearchSessionId},updateQuery:function(e,t){var n,r;return{visionSearchUser:S(S({},null===t||void 0===t?void 0:t.visionSearchUser),{},{users:[].concat(O((null===(n=e.visionSearchUser)||void 0===n?void 0:n.users)||[]),O((null===t||void 0===t||null===(r=t.visionSearchUser)||void 0===r?void 0:r.users)||[]))})}}})}},{key:"refetchPhoto",value:function(){this.graphqlSearchPhoto.refetch()}},{key:"fetchMorePhoto",value:function(e){this.graphqlSearchPhoto.loading||e&&!1===e.more||this.noMorePhotoData||this.graphqlSearchPhoto.fetchMore({variables:{pcursor:this.photoPcursor,searchSessionId:this.searchSessionId},updateQuery:function(e,t){var n,r;return{visionSearchPhoto:S(S({},null===t||void 0===t?void 0:t.visionSearchPhoto),{},{feeds:[].concat(O((null===(n=e.visionSearchPhoto)||void 0===n?void 0:n.feeds)||[]),O((null===t||void 0===t||null===(r=t.visionSearchPhoto)||void 0===r?void 0:r.feeds)||[]))})}}})}},{key:"getFollowInfo",value:function(){var e=g(o.a.mark((function e(t){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.userFollow.mutate({searchSessionId:this.searchSessionId,userIds:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dataError",get:function(){return this.graphqlSearchPhoto.error}},{key:"userSessionId",get:function(){var e;return null===(e=this.graphqlSearchUser.data.visionSearchUser)||void 0===e?void 0:e.searchSessionId}},{key:"userPcursor",get:function(){var e;return null===(e=this.graphqlSearchUser.data.visionSearchUser)||void 0===e?void 0:e.pcursor}},{key:"area",get:function(){var e;return null===(e=this.graphqlSearchPhoto.data.visionSearchPhoto)||void 0===e?void 0:e.webPageArea}},{key:"userSearchSessionId",get:function(){var e;return null===(e=this.graphqlSearchPhoto.data.visionSearchPhoto)||void 0===e?void 0:e.searchSessionId}},{key:"userList",get:function(){return this.graphqlSearchUser.data.visionSearchUser||{}}},{key:"photoList",get:function(){var e,t=this.graphqlSearchPhoto.data.visionSearchPhoto||{};return(null===(e=t.feeds)||void 0===e?void 0:e.map((function(e){var t;return Object(s["p"])(e,{videoPhotoCaption:Object(f["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})})))||[]}},{key:"photoPcursor",get:function(){var e;return null===(e=this.graphqlSearchPhoto.data.visionSearchPhoto)||void 0===e?void 0:e.pcursor}},{key:"noMorePhotoData",get:function(){return"no_more"===this.photoPcursor||null===this.photoPcursor}},{key:"searchSessionId",get:function(){var e;return(null===(e=this.graphqlSearchPhoto.data.visionSearchPhoto)||void 0===e?void 0:e.searchSessionId)||""}},{key:"feedVideoList",get:function(){return this.photoList}},{key:"feedVideoListLength",get:function(){return this.photoList.length}},{key:"llsid",get:function(){var e;return null===(e=this.graphqlSearchPhoto.data.visionSearchPhoto)||void 0===e?void 0:e.llsid}},{key:"banner",get:function(){var e;return null===(e=this.graphqlSearchPhoto.data.visionSearchPhoto)||void 0===e?void 0:e.aladdinBanner}},{key:"canNext",get:function(){return-1!==this.photoLimit&&this.photoLimit>this.photoList.length}},{key:"userFollowData",get:function(){return this.userFollow.data||{}}},{key:"userFollowList",get:function(){var e,t;return(null===(e=this.userFollow.data)||void 0===e||null===(t=e.followStatus)||void 0===t?void 0:t.reduce((function(e,t){return t.followed&&e.push(t.userId),e}),[]))||[]}}]),n}(a["a"]);Object(i["c"])([Object(a["d"])({query:c()(h()),variables:function(e){return{keyword:Object(d["b"])(e.query.searchKey)}},skip:function(e){return e.name===l["a"].ShortVideo}})],V.prototype,"graphqlSearchUser",void 0),Object(i["c"])([Object(a["d"])({query:c()(v(),p["a"]),variables:function(e){return{keyword:Object(d["b"])(e.query.searchKey),pcursor:e.query.currentPcursor||"",page:Object(s["d"])(e.name),webPageArea:e.query.area}},skip:function(e){return e.name===l["a"].ShortVideo&&!this.canFetch}})],V.prototype,"graphqlSearchPhoto",void 0),Object(i["c"])([Object(a["e"])({url:"/rest/v/search/user/following",method:"post",variables:function(e){return e}})],V.prototype,"userFollow",void 0)},"1c3c":function(e,t,n){var r=n("9e69"),o=n("2474"),i=n("9638"),a=n("a2be"),u=n("edfa"),c=n("ac41"),s=1,l=2,f="[object Boolean]",d="[object Date]",p="[object Error]",v="[object Map]",h="[object Number]",m="[object RegExp]",b="[object Set]",y="[object String]",g="[object Symbol]",O="[object ArrayBuffer]",w="[object DataView]",j=r?r.prototype:void 0,k=j?j.valueOf:void 0;function I(e,t,n,r,j,I,C){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!I(new o(e),new o(t)));case f:case d:case h:return i(+e,+t);case p:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case v:var P=u;case b:var S=r&s;if(P||(P=c),e.size!=t.size&&!S)return!1;var _=C.get(e);if(_)return _==t;r|=l,C.set(e,t);var x=a(P(e),P(t),r,j,I,C);return C["delete"](e),x;case g:if(k)return k.call(e)==k.call(t)}return!1}e.exports=I},"1cb9":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n("2ef0"),o={PLAIN_TEXT:"plainText",AT:"at",EMOTICON:"emoticon"};function i(e,t){return{type:o.EMOTICON,url:t,code:e}}function a(e){return{type:o.PLAIN_TEXT,value:e}}var u=/\[[^[]+?]/g;function c(e,t){var n=[],r=e.value,o=0,c=u.exec(e.value);while(c){var s=c[0];if(t[s]){var l=r.slice(o,c.index);n.push(a(l)),n.push(i(s,t[s])),o+=l.length+s.length}c=u.exec(e.value)}var f=r.slice(o,r.length);return n.push(a(f)),n}var s=function(e){return function(t){return t.reduce((function(t,n){return n.type===o.PLAIN_TEXT?t.concat(c(n,e)):t.concat([n])}),[])}};function l(e){var t=[],n="@",r="(",o="O",i=")",a=[],u=-1;if([n,r,o,i].some((function(t){return!e.includes(t)})))return[{type:"plainText",value:e}];for(var c=0;c<e.length;c++){var s=e[c];switch(s){case n:2===u||1===u?a.push(s):(t.push({type:"plainText",value:a.join("")}),a=[s]),u=0;break;case r:2===u||1===u?(a.push(s),u=0):0===u?(a.push(s),a.join("")!==n&&(u=1)):a.push(s);break;case o:2===u?(a.push(s),u=0):1===u?(a.push(s),u=2):a.push(s);break;case i:if(2===u)if(a[a.length-1]!==o){var l=a.join("").split(r);t.push({type:"at",value:{userId:l[1].slice(1),content:l[0]}}),a.length=0,u=-1}else a.push(s),u=0;else 1===u?(a.push(s),u=0):a.push(s);break;default:2===u?isNaN(u)&&(u=0):1===u&&(u=0),a.push(s)}}return t.push({type:"plainText",value:a.join("")}),t}function f(e){return e.reduce((function(e,t){return t.type===o.PLAIN_TEXT?e.concat(l(t.value)):e.concat([t])}),[])}var d={EMOJI:s,AT:f};function p(e,t){var n=Object(r["flow"])(t),o=[a(e)];return n(o)}},"1cec":function(e,t,n){var r=n("0b07"),o=n("2b3e"),i=r(o,"Promise");e.exports=i},"1efc":function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},"1fc8":function(e,t,n){var r=n("4245");function o(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}e.exports=o},"20ec":function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},"217b":function(e,t,n){"use strict";var r=n("9cbe"),o=n.n(r);o.a},"234d":function(e,t,n){var r=n("e380"),o=500;function i(e){var t=r(e,(function(e){return n.size===o&&n.clear(),e})),n=t.cache;return t}e.exports=i},"242e":function(e,t,n){var r=n("72af"),o=n("ec69");function i(e,t){return e&&r(e,t,o)}e.exports=i},"243f":function(e,t,n){var r=n("48a0");function o(e,t,n,o){return r(e,(function(e,r,i){t(o,e,n(e),i)})),o}e.exports=o},2474:function(e,t,n){var r=n("2b3e"),o=r.Uint8Array;e.exports=o},2478:function(e,t,n){var r=n("4245");function o(e){return r(this,e).get(e)}e.exports=o},2524:function(e,t,n){var r=n("6044"),o="__lodash_hash_undefined__";function i(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}e.exports=i},"253c":function(e,t,n){var r=n("3729"),o=n("1310"),i="[object Arguments]";function a(e){return o(e)&&r(e)==i}e.exports=a},"25ff":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"autoplay-button"},[n("p",{staticClass:"autoplay-button-text"},[e._v(" 自动播放 ")]),n("sp-switch",{model:{value:e.curAutoPlay,callback:function(t){e.curAutoPlay=t},expression:"curAutoPlay"}})],1)},o=[],i=n("48d1"),a=n("d0a8"),u=n.n(a);n("2f07");function c(e){var t=Object(i["q"])(!0);return Object(i["t"])(t,(function(t){localStorage.setItem("autoplay",t?"1":"0"),e("change",t)})),Object(i["l"])((function(){t.value="0"!==localStorage.getItem("autoplay")})),t}var s=Object(i["c"])({components:{spSwitch:u.a},model:{prop:"autoPlay",event:"change"},setup:function(e,t){var n=t.emit,r=c(n);return{curAutoPlay:r}}}),l=s,f=(n("bc76"),n("d802")),d=Object(f["a"])(l,r,o,!1,null,"f713ee34",null);t["a"]=d.exports},"267f":function(e,t,n){"use strict";var r=n("d2ec"),o=n.n(r);o.a},"26e8":function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},"28c9":function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},"29f3":function(e,t){var n=Object.prototype,r=n.toString;function o(e){return r.call(e)}e.exports=o},"2b3e":function(e,t,n){var r=n("585a"),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},"2c3c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"short-video-detail"},[n("div",{staticClass:"short-video-detail-container"},[n("ShortVideoWrapper",{attrs:{"video-info":e.detailModel.photo||{},"episode-loaded":e.episodeLoaded,"need-episode":e.needEpisode,status:e.detailModel.status,"auto-play":e.autoPlay,"is-end":e.isEnd,"is-anti":e.detailModel.isAnti,"show-info-panel":e.showInfoPanel,"invalid-tube":e.invalidTube,"hot-rank-info":e.feedModel},on:{"switch-video":e.switchVideo,onPlayChange:e.onPlayChange}},[n("template",{slot:"custom-ele"},[n("Toast",{ref:"toastInstance"})],1),n("template",{slot:"tools"},[n("transition",{attrs:{name:"toggle"}},[n("div",{staticClass:"toggle-info",class:e.showInfoPanel?"":"hide-status",on:{click:e.handleInfoPanel}},[n("svg-icon",{staticClass:"toggle-info-svg",attrs:{"icon-class":"show-icon"}})],1)])],1),n("template",{slot:"close"},[n("div",{staticClass:"close-page",on:{click:e.backTo}})])],2),n("transition",{attrs:{name:"show-info"}},[e.detailModel&&e.detailModel.photo?n("ShortVideoInfo",{directives:[{name:"show",rawName:"v-show",value:1===e.detailModel.status&&e.showInfoPanel,expression:"detailModel.status === 1 && showInfoPanel"}],attrs:{"video-info":e.detailModel.photo,"user-info":e.detailModel.author,"video-caption":e.detailModel.videoPhotoCaption?{text:e.detailModel.videoPhotoCaption}:{text:e.detailModel.caption,showOrigin:!0},"can-add-comment":e.detailModel.canAddComment,"tube-title":e.tubeTitle,"video-type":e.detailModel.type,"need-episode":e.needEpisode,"total-episode-count":e.totalEpisodeCount,"last-seen-episode":e.currentIndex,feeds:e.feedModel.feedVideoList,"ignore-view":e.ignoreView,"log-type":e.logType},on:{"follow-change":e.changeFollowStatus,"copy-success":e.handleCopySuccess,"feedback-success":e.handleFeedbackSuccess,"switch-video":e.chooseVideo}}):e._e()],1)],1)])},o=[],i=n("4795"),a=n.n(i),u=n("48d1"),c=n("d2ae"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"videoWrapper",staticClass:"short-video-wrapper"},[n("div",{staticClass:"backimg-warp"},[n("div",{staticClass:"backimg-area",style:{backgroundImage:"url("+e.videoInfo.coverUrl+")"}})]),e.videoInfo?n("VerticalPlayer",{directives:[{name:"show",rawName:"v-show",value:1===e.status,expression:"status === 1"}],staticClass:"video-area",style:{width:e.videoWidth+"px"},attrs:{src:e.videoResource,"fullback-play-url":e.videoInfo.photoUrl,poster:e.videoInfo.coverUrl,config:e.playerConfig,type:"vertical",muted:e.muted,"can-preset-volume":e.canPresetVolume,"can-change-volume":e.canChangeVolume,"is-spherical":1===e.videoInfo.stereoType||2===e.videoInfo.stereoType},on:{onPlayChange:e.onPlayChange},scopedSlots:e._u([{key:"video-end",fn:function(t){var r=t.autoPlay;return[n("VideoEnd",{attrs:{slot:"video-end","auto-play":r,"is-end":e.isEnd},on:{"switch-next-video":function(t){return e.$emit("switch-video",{type:"next",switchType:"AUTO_PLAY"})}},slot:"video-end"})]}}],null,!1,1108902831)},[n("template",{slot:"custom"},[n("VideoSwitch",{on:{"switch-last":function(t){return e.$emit("switch-video",{type:"last",switchType:"PAGE_BUTTON"})},"switch-next":function(t){return e.$emit("switch-video",{type:"next",switchType:"PAGE_BUTTON"})}}})],1)],2):e._e(),n("hot-rank-item",{attrs:{"video-info":e.videoInfo,"hot-rank-info":e.hotRankInfo}}),21===e.status||e.invalidTube?n("div",{staticClass:"photo-error"},[n("div",{staticClass:"error-icon"}),n("p",{staticClass:"error-text"},[e._v(" 作品已失效 ")])]):e._e(),e._t("custom-ele"),e._t("tools"),e._t("close")],2)},l=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-switch"},[n("div",{staticClass:"switch-item video-switch-last",on:{click:function(t){return e.$emit("switch-last")}}}),n("div",{staticClass:"switch-item video-switch-next",on:{click:function(t){return e.$emit("switch-next")}}})])},d=[],p=Object(u["c"])({setup:function(){return{}}}),v=p,h=(n("217b"),n("d802")),m=Object(h["a"])(v,f,d,!1,null,"b969ad76",null),b=m.exports,y=n("b31b"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showVideoEnd,expression:"showVideoEnd"}],staticClass:"video-end",attrs:{slot:"video-end"},slot:"video-end"},[e._v(" 即将切换 ")])},O=[],w=n("3052"),j=n("b74e");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=Object(u["c"])({components:{},props:{autoPlay:{type:Boolean,default:!0},isEnd:{type:Boolean}},setup:function(e,t){var n=Object(u["p"])({timeCount:5,timer:NaN,showVideoEnd:!1,canSwitch:!0,hasComment:!1}),r=Object(w["n"])(),o=r.currentTime,i=r.duration,a=Object(j["l"])();return Object(u["k"])((function(){n.showVideoEnd=!1,n.timer&&(n.timer=NaN)})),Object(w["m"])("timeupdate",(function(){var t=Math.round(i.value-o.value);t<=5?n.hasComment?n.showVideoEnd=!1:e.autoPlay&&!e.isEnd&&n.canSwitch?(n.showVideoEnd=!0,n.timeCount=t):n.showVideoEnd=!1:n.showVideoEnd=!1})),Object(w["m"])("ended",(function(){n.showVideoEnd=!1,e.autoPlay&&n.canSwitch&&!n.hasComment?!n.hasComment&&n.canSwitch&&t.emit("switch-next-video"):a("reload-video",{})})),Object(j["k"])("input-focus",(function(e){n.canSwitch=!e})),Object(j["k"])("input-text",(function(e){e.length?n.hasComment=!0:n.hasComment=!1})),Object(u["l"])((function(){Object(j["k"])("hide-end",(function(e){n.showVideoEnd=!1}))})),I({},Object(u["s"])(n))}}),S=P,_=(n("bd9a"),Object(h["a"])(S,g,O,!1,null,"aeafcfce",null)),x=_.exports;function T(e){var t=e.videoWidth,n=e.videoInfo,r=e.videoWrapper,o=e.showInfoPanel,i=-1;function a(){var e=n.value,o=e.videoRatio,i=e.stereoType;o&&requestAnimationFrame((function(){var e,n=document.body.clientHeight*o,a=null===(e=r.value)||void 0===e?void 0:e.clientWidth;t.value=o<1&&1!==i&&2!==i?n/a>=.75?.75*a:n:.7*a>=530?.7*a:530}))}Object(u["l"])((function(){Object(u["t"])((function(){return n.value}),(function(e,n){var o=e.videoRatio,i=e.stereoType;if(o){var a=document.body.clientHeight*o,u=(document.body.clientWidth>=1920?1920:document.body.clientWidth)-500;if(o<1&&1!==i&&2!==i){var c;if(n.id)u=null===(c=r.value)||void 0===c?void 0:c.clientWidth;return void(t.value=a/u>=.75?.75*u:a)}t.value=.7*u>=530?.7*u:530}})),Object(u["t"])((function(){return o.value}),(function(e){e&&(window.clearTimeout(i),i=window.setTimeout((function(){a()}),1e3))}))})),Object(j["o"])((function(){return window}),"resize",(function(){a()}))}var L=n("3a31"),E=n("fa88"),A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.hotRankInfo.trendingId,expression:"hotRankInfo.trendingId"}],staticClass:"hot-rank-container"},[n("div",{staticClass:"hot-rank-header"},[n("div",{staticClass:"hot-rank-title"},[e._v(" "+e._s(e.hotRankInfo.trendingId)+" ")]),n("div",{staticClass:"hot-rank-index"},[n("div",[e._v(e._s(e.currentIndex))]),n("div",{staticClass:"hot-rank-index-total"},[e._v(" /"+e._s(e.photoIds.length)+" ")])])]),n("div",{staticClass:"hot-rank-footer"},[n("div",{class:{"hot-rank":e.hotRank<=10&&e.hotRank>=1}},[e._v(" "+e._s("TOP"+e.hotRank)+" ")]),n("div",[e._v("热榜 · "+e._s(e.hotRankItem.hotValue)+"热度")]),n("img",{directives:[{name:"show",rawName:"v-show",value:e.hotRank>10&&e.hotRankItem.iconUrl,expression:"hotRank > 10 && hotRankItem.iconUrl"}],staticClass:"hot-rank-tag",attrs:{src:e.hotRankItem.iconUrl}})])])},D=[],R=Object(u["c"])({props:{videoInfo:{type:Object},hotRankInfo:{type:[E["a"],Object],default:function(){return{}}}},setup:function(e,t){var n=Object(u["a"])((function(){return e.hotRankInfo||{}})),r=Object(u["a"])((function(){return e.videoInfo||{}})),o=Object(u["a"])((function(){var e,t,r;return(null===(e=n.value)||void 0===e||null===(t=e.hotRankMap)||void 0===t?void 0:t[null===(r=n.value)||void 0===r?void 0:r.trendingId])||{}})),i=Object(u["a"])((function(){var e;return(null===(e=o.value)||void 0===e?void 0:e.photoIds)||[]})),a=Object(u["a"])((function(){var e,t,n,o=null===(e=r.value)||void 0===e?void 0:e.id;return(null!==(t=null===(n=i.value)||void 0===n?void 0:n.indexOf(o))&&void 0!==t?t:-1)+1})),c=Object(u["a"])((function(){var e,t,r,o=null===(e=n.value)||void 0===e||null===(t=e.hotRankIdList)||void 0===t?void 0:t.indexOf(null===(r=n.value)||void 0===r?void 0:r.trendingId);return"number"===typeof o&&o>=0?o+1:0}));return{photoIds:i,hotRank:c,hotRankItem:o,currentIndex:a}}}),$=R,M=(n("0901"),Object(h["a"])($,A,D,!1,null,"459f956c",null)),q=M.exports,V=Object(u["c"])({components:{VideoSwitch:b,VerticalPlayer:y["a"],VideoEnd:x,HotRankItem:q},props:{videoInfo:{type:Object},status:{type:Number},autoPlay:{type:Boolean},isEnd:{type:Boolean},episodeLoaded:{type:Boolean},needEpisode:{type:Boolean},isAnti:{type:Boolean},showInfoPanel:{type:Boolean,default:!0},invalidTube:{type:Boolean},hotRankInfo:{type:[E["a"],Object],default:function(){return{}}}},setup:function(e,t){var n=Object(u["q"])(530),r=Object(u["q"])(null),o=Object(u["p"])({volumeKeyDown:!1}),i=Object(u["q"])(!1),a=Object(u["a"])((function(){return e.videoInfo})),c=Object(u["a"])((function(){return e.showInfoPanel})),s=Object(u["a"])((function(){var e;return null===(e=a.value)||void 0===e?void 0:e.videoResource}));function l(e){t.emit("onPlayChange",e)}var f=Object(L["a"])(a),d=f.muted,p=f.canChangeVolume,v=f.canPresetVolume;return Object(u["l"])((function(){Object(u["t"])((function(){return e.videoInfo}),(function(t,n){(null===t||void 0===t?void 0:t.id)||(e.needEpisode?e.episodeLoaded&&(i.value=!0):e.isAnti||(i.value=!0))}),{immediate:!0})})),T({videoWidth:n,videoInfo:a,videoWrapper:r,showInfoPanel:c}),{videoWrapper:r,playerConfig:o,onPlayChange:l,videoWidth:n,errorPhoto:i,videoResource:s,muted:d,canChangeVolume:p,canPresetVolume:v}}}),U=V,N=(n("b858"),Object(h["a"])(U,s,l,!1,null,"a0faa830",null)),F=N.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"short-video-info"},[n("div",{staticClass:"short-video-info-container"},[e.needEpisode?n("EpisodePanel",{attrs:{title:e.tubeTitle,description:"更新至 "+e.totalEpisodeCount+"集",segmentation:40,"total-episode-num":e.totalEpisodeCount,"current-episode":e.lastSeenEpisode,"ignore-view":e.ignoreView},on:{clickTotal:e.changeTotal,clickItem:e.chooseTab}},[n("VideoInteractive",{staticClass:"episode-interactive",attrs:{slot:"custom-ele",info:e.videoInfo,author:e.userInfo,"use-type":"vertical","video-type":e.videoType,"share-video-type":"short-video","ignore-options":e.ignoreOptions,feeds:e.feeds,"share-base-config":e.shareBaseConfig},on:{"copy-success":function(t){return e.$emit("copy-success")},"feedback-success":function(t){return e.$emit("feedback-success")}},slot:"custom-ele"})],1):n("div",[n("div",{staticClass:"profile-user"},[n("div",{staticClass:"left-part"},[n("div",{staticClass:"profile-user-name"},[n("Avatar",{staticClass:"profile-user-name-avatar",attrs:{avatar:e.userInfo.headerUrl},on:{click:function(t){return e.gotoProfile("HEAD")}}}),n("div",{staticClass:"title-warp"},[n("span",{staticClass:"profile-user-name-title",on:{click:function(t){return e.gotoProfile("DESCRIBE")}}},[e._v(" "+e._s(e._f("filterXss")(e._f("transEmoji")(e.userInfo.name)))+" ")]),n("span",{staticClass:"photo-time"},[e._v(e._s(e.elapseTime))])])],1)]),n("div",{staticClass:"right-part"},[e.isAuthor?e._e():n("FollowButton",{staticClass:"short-video-follow",attrs:{"user-id":e.userInfo.id,"exp-tag":e.videoInfo.expTag,follow:e.following,"log-type":e.logType},on:{"follow-change":e.changeFollowStatus}})],1)]),n("div",{staticClass:"short-video-info-container-detail"},[e.videoCaption.showOrigin?n("p",{staticClass:"video-info-title"},[e._v(" "+e._s(e.videoCaption.text)+" ")]):n("p",{staticClass:"video-info-title",domProps:{innerHTML:e._s(e.videoCaption.text)}})]),n("VideoInteractive",{staticClass:"vertical-interactive",attrs:{info:e.videoInfo,author:e.userInfo,"use-type":"vertical","has-uninterested":!0,"video-type":e.videoType,"share-video-type":"short-video","ignore-options":e.ignoreOptions,feeds:e.feeds,"log-type":e.logType,"share-base-config":e.shareBaseConfig},on:{"copy-success":function(t){return e.$emit("copy-success")},"feedback-success":function(t){return e.$emit("feedback-success")}}})],1),e.showComment?n("Comment",{staticClass:"vertical-comment",attrs:{"current-work":e.videoInfo,"current-author":e.userInfo,"can-add-comment":e.canAddComment,"input-placeholder":0===e.canAddComment?"说点什么...":"仅作者及作者好友可评论","is-dark":!0,"log-type":e.logType},on:{"block-comment":e.handleBlockComment}}):e._e()],1),n("Toast",{ref:"toast",attrs:{"icon-type":"error"}}),e._t("auto-play-btn")],2)},z=[],H=n("7ea0"),Q=n("d45f"),W=n("97c5"),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"episode-panel"},[n("h2",{staticClass:"episode-panel-title"},[e._v(" "+e._s(e.title)+" ")]),n("p",{staticClass:"episode-panel-desc"},[e._v(" "+e._s(e.description)+" ")]),e._t("custom-ele"),e.segmentation>0?n("div",{staticClass:"episode-panel-segmentation",class:[e.totalEpisodeNum>200?"panel-switch":"",5===e.segmentationList.slice(e.startSeg,e.curSeg).length?"full-panel":""]},[e.totalEpisodeNum>200?n("div",{staticClass:"panel-switch-pre",on:{click:function(t){return e.handleCurSeg("pre")}}}):e._e(),e.totalEpisodeNum>200?n("div",{staticClass:"panel-switch-next",on:{click:function(t){return e.handleCurSeg("next")}}}):e._e(),e._l(e.segmentationList.slice(e.startSeg,e.curSeg),(function(t,r){return n("p",{key:t.value,class:e.currentPart.value===t.value?"actived":"",on:{click:function(n){return e.checkPart(t,r)}}},[e._v(" "+e._s(t.value)+" ")])}))],2):e._e(),e.currentPart?n("div",{staticClass:"episode-panel-item"},e._l(e.partNum,(function(t){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showCard(e.currentPart.start+t-1),expression:"showCard(currentPart.start + num - 1)"}],key:e.currentPart.start+t-1,staticClass:"single-episode",class:e.isHigh(e.currentPart.start+t-1)?"choosed":"",on:{click:function(n){return e.changeVideo(e.currentPart.start+t-1)}}},[e._v(" "+e._s(e.currentPart.start+t-1)+" ")])})),0):e._e(),n("h2",{staticClass:"comment-title"},[e._v(" 评论 ")])],2)},J=[];function Y(e,t){for(var n=e>0?Math.ceil(t/e):1,r=[],o=0;o<n;o++){var i=e*o+1;o<n-1?r.push({start:i,end:e*(o+1),value:"".concat(i,"-").concat(e*(o+1))}):r.push({start:i,end:t,value:"".concat(i,"-").concat(t)})}return r}function G(e,t){return ne(e)||te(e,t)||Z(e,t)||X()}function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e,t){if(e){if("string"===typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){o=!0,i=c}finally{try{r||null==u["return"]||u["return"]()}finally{if(o)throw i}}return n}}function ne(e){if(Array.isArray(e))return e}var re=Object(u["c"])({props:{title:String,description:String,segmentation:{type:Number,default:0},totalEpisodeNum:{type:Number,default:0},currentEpisode:{type:Number,default:1},ignoreView:{type:Array,default:[]}},setup:function(e,t){var n=t.emit,r=Object(u["q"])([]),o=Object(u["q"])({}),i=Object(u["q"])(0),a=Object(u["q"])(5),c=Object(u["a"])((function(){return a.value-5}));function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;"pre"===e&&5===a.value||"next"===e&&a.value>=r.value.length||("pre"===e&&(a.value=a.value-5*t),"next"===e&&(a.value=a.value+5*t))}function l(e,t){o.value=e,n("clickTotal",e,t)}Object(u["t"])((function(){return[e.currentEpisode,e.totalEpisodeNum]}),(function(t){var n=G(t,2),i=n[0],a=n[1];r.value=Y(e.segmentation,a),o.value=r.value.find((function(e){return e.start<=i+1&&e.end>=i+1}))}),{immediate:!0}),Object(u["t"])((function(){return o.value}),(function(t){var n;if(t){t.end-t.start<=e.segmentation-1&&(i.value=t.end-t.start+1);var u=c.value/5-((null===o||void 0===o||null===(n=o.value)||void 0===n?void 0:n.start)-1)/200,l=u&&u?Math.abs(u):1;return r.value[a.value]&&t.start>=r.value[a.value].start?s("next",l):t.end<r.value[c.value].start?s("pre",l):void 0}}),{immediate:!0});var f=Object(u["q"])(0);function d(e){f.value=e,n("clickItem",e+1)}function p(t){return t===e.currentEpisode+1}function v(t){return t<=e.totalEpisodeNum&&!e.ignoreView.includes(t-1)}return{segmentationList:r,currentPart:o,partNum:i,checkPart:l,changeVideo:d,isHigh:p,showCard:v,handleCurSeg:s,curSeg:a,startSeg:c}}}),oe=re,ie=(n("d672"),Object(h["a"])(oe,K,J,!1,null,"b4c25608",null)),ae=ie.exports,ue=n("77a5"),ce=n("ff22"),se=n("fd5a"),le=n("a7bc"),fe=n("90cd"),de=n("866d");function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){me(i,r,o,a,u,"next",e)}function u(e){me(i,r,o,a,u,"throw",e)}a(void 0)}))}}var ye=Object(u["c"])({components:{FollowButton:H["a"],VideoInteractive:Q["a"],Comment:W["a"],Avatar:se["a"],EpisodePanel:ae,Toast:de["a"]},props:{userInfo:{type:Object},videoInfo:{type:Object},canAddComment:{type:Number},videoCaption:{type:Object},videoType:{type:Number},needEpisode:Boolean,totalEpisodeCount:{type:Number,default:0},lastSeenEpisode:{type:Number,default:1},feeds:{type:Array,default:function(){return[]}},tubeTitle:{type:String,default:""},ignoreView:{type:Array},logType:{type:String}},filters:{transEmoji:j["j"],filterXss:fe["a"]},setup:function(e,t){var n=Object(le["e"])(),r=Object(u["p"])({showComment:!0,ignoreOptions:["streamSource"]}),o=Object(u["a"])((function(){return e.userInfo.following})),i=Object(u["q"])(""),s=Object(u["q"])(null),l=Object(c["f"])(ue["a"]),f=Object(u["a"])((function(){var t;return l.userInfo.id===(null===(t=e.userInfo)||void 0===t?void 0:t.id)})),d=(Object(j["l"])(),Object(u["q"])({subBiz:"SINGLE_ROW_WEB",sdkVersion:"1.1.2.2.0"}));function p(e){t.emit("follow-change",e)}function v(r){var o;if(n({type:"CLICK",logType:e.logType||null,event_name:"AUTHOR_PORTRAIT_BUTTON",event_value:{portrait_type:r}}),null===(o=e.userInfo)||void 0===o?void 0:o.id){var i=t.root.$router.resolve({path:"/profile/".concat(e.userInfo.id)});window.open(i.href,"_blank")}}function h(e,n){t.emit("switchPage",e.start-1,n)}function m(e){e<1||!e||t.emit("switch-video",{index:e-2,canSendLog:!0})}function b(){var e;null===(e=s.value)||void 0===e||e.show("评论失败")}return Object(u["l"])((function(){Object(u["t"])((function(){var t;return null===(t=e.videoInfo)||void 0===t?void 0:t.timestamp}),(function(e){e&&(i.value=String(Object(ce["a"])({begin:new Date(e),end:new Date(Math.max(e,+new Date))})))}),{immediate:!0})})),Object(u["t"])((function(){return t.root.$route.params.photoId}),be(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.showComment=!1,e.next=3,t.root.$nextTick((function(){r.showComment=!0}));case 3:case"end":return e.stop()}}),e)})))),ve(ve({toast:s,following:o},Object(u["s"])(r)),{},{isAuthor:f,changeFollowStatus:p,elapseTime:i,gotoProfile:v,changeTotal:h,chooseTab:m,shareBaseConfig:d,handleBlockComment:b})}}),ge=ye,Oe=(n("1651"),Object(h["a"])(ge,B,z,!1,null,"09c1df08",null)),we=Oe.exports,je=n("76e9"),ke=n.n(je),Ie=n("2ef0"),Ce=n("9b51"),Pe=n("25ff"),Se=n("5433"),_e=n.n(Se),xe=n("0f9e"),Te=n("9530"),Le=n.n(Te),Ee=n("2bbe");function Ae(){var e=De(["\n        ","\n        query visionShortVideoReco(\n            $semKeyword: String,\n            $semCrowd: String,\n            $utmSource: String, \n            $utmMedium: String,\n            $page: String,\n            $photoId: String,\n            $utmCampaign: String\n        ){\n            visionShortVideoReco(\n                semKeyword: $semKeyword,\n                semCrowd: $semCrowd,\n                utmSource: $utmSource,\n                utmMedium: $utmMedium,\n                page: $page,\n                photoId: $photoId,\n                utmCampaign: $utmCampaign\n            ){\n                    llsid\n                    feeds {\n                        type\n                        author {\n                            id\n                            name\n                            following\n                            headerUrl\n                        }\n                        photo {\n                            ...photoContent\n                        }\n                        tags {\n                            type\n                            name\n                        }\n                        canAddComment\n                    }\n                }\n            }\n        "]);return Ae=function(){return e},e}function De(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Re(e){return Re="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function $e(e){return Ue(e)||Ve(e)||qe(e)||Me()}function Me(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qe(e,t){if(e){if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}function Ve(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ue(e){if(Array.isArray(e))return Ne(e)}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function Be(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Fe(i,r,o,a,u,"next",e)}function u(e){Fe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return t&&He(e.prototype,t),n&&He(e,n),e}function We(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}function Ke(e,t){return Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ke(e,t)}function Je(e){var t=Xe();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){return!t||"object"!==Re(t)&&"function"!==typeof t?Ge(e):t}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}var et=function(e){We(n,e);var t=Je(n);function n(){var e;return ze(this,n),e=t.apply(this,arguments),e.canFetch=!0,e}return Qe(n,[{key:"getShortVideoList",value:function(){var e=Be(a.a.mark((function e(){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.graphShortVideoList.loading){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.graphShortVideoList.fetchMore({variables:{photoId:this.$route.params.photoId},updateQuery:function(e,t){var n,r,o;return{visionShortVideoReco:{feeds:[].concat($e((null===(n=e.visionShortVideoReco)||void 0===n?void 0:n.feeds)||[]),$e((null===t||void 0===t||null===(r=t.visionShortVideoReco)||void 0===r?void 0:r.feeds)||[])),__typename:null===(o=e.visionShortVideoReco)||void 0===o?void 0:o.__typename}}}});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"feedVideoList",get:function(){var e,t,n=null===(e=this.graphShortVideoList.data.visionShortVideoReco)||void 0===e||null===(t=e.feeds)||void 0===t?void 0:t.map((function(e){var t;return e.status=1,e.videoPhotoCaption=Object(fe["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption),e}));return n||[]}},{key:"feedVideoListLength",get:function(){var e,t;return(null===(e=this.graphShortVideoList.data.visionShortVideoReco)||void 0===e||null===(t=e.feeds)||void 0===t?void 0:t.length)||0}},{key:"llsid",get:function(){var e;return null===(e=this.graphShortVideoList.data.visionShortVideoReco)||void 0===e?void 0:e.llsid}}]),n}(c["a"]);Object(xe["c"])([Object(c["d"])({query:Le()(Ae(),Ee["a"]),fetchPolicy:"cache-and-network",variables:function(e){return{semKeyword:e.query.keyword,semCrowd:e.query.renqun_youhua,utmSource:e.query.utm_source,utmMedium:e.query.utm_medium,page:Object(j["d"])(e.name),photoId:e.params.photoId,utmCampaign:e.query.utm_campaign}},skip:function(){return!this.canFetch}})],et.prototype,"graphShortVideoList",void 0);var tt=n("fe89"),nt=n("75fd"),rt=n("8cec"),ot=n("529e"),it=n("1af9"),at=n("c6c4"),ut=n("b765"),ct=n("4953"),st=n("20c8");function lt(){var e=pt(["\n            mutation visionTubeView($photoId: String, $tubeId: String) {\n                visionTubeView(photoId: $photoId, tubeId: $tubeId) {\n                    result\n                }\n            }\n        "]);return lt=function(){return e},e}function ft(){var e=pt(["\n            ","\n            query visionTubeEpisodeQuery($tubeId: String, $episodeNumber: Int, $page: String, $channelId: Int, $webPageArea: String) {\n                visionTubeEpisode(tubeId: $tubeId, episodeNumber: $episodeNumber, page: $page, channelId: $channelId, webPageArea: $webPageArea) {\n                    ...feedContent\n                    result\n                    status\n                }\n            }\n        "]);return ft=function(){return e},e}function dt(){var e=pt(["\n            query visionTubeInfoQuery($tubeId: String, $pcursor: String, $page: String, $token: String, $st: Long) {\n                visionTubeInfo(tubeId: $tubeId, pcursor: $pcursor, page: $page, token: $token, st: $st) {\n                    name\n                    caption\n                    tubeId\n                    lastSeenEpisode {\n                        episodeNumber\n                        lastSeenTime\n                    }\n                    offlineEpisodes {\n                        episodeNumber\n                        name\n                        photoId\n                    }\n                    description\n                    viewCount\n                    viewCountStr\n                    totalEpisodeCount\n                    totalEpisodeCountIgnoreStatus\n                    lastEpisodeName\n                    coverUrl\n                    poster\n                    result\n                    llsid\n                    expTag\n                    serverExpTag\n                }\n            }\n        "]);return dt=function(){return e},e}function pt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function vt(e){return vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function ht(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ht(i,r,o,a,u,"next",e)}function u(e){ht(i,r,o,a,u,"throw",e)}a(void 0)}))}}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),e}function kt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}function It(e,t){return It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},It(e,t)}function Ct(e){var t=_t();return function(){var n,r=xt(e);if(t){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pt(this,n)}}function Pt(e,t){return!t||"object"!==vt(t)&&"function"!==typeof t?St(e):t}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function xt(e){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xt(e)}var Tt="/rest/v/tube/info",Lt=function(e){kt(n,e);var t=Ct(n);function n(){var e;return Ot(this,n),e=t.apply(this,arguments),e.tubeId="",e.preId="",e.preData={},e.curEpisodeNum=-1,e}return jt(n,[{key:"updateTube",value:function(e,t){var n=this;this.theaterInfo.fetchMore({variables:{tubeId:e,page:Object(j["d"])(this.$vm.$root.$route.name)},updateQuery:function(r,o){return n.tubeId=e,t&&t(o),{visionTubeInfo:yt({},null===o||void 0===o?void 0:o.visionTubeInfo)}}})}},{key:"viewRecord",value:function(){var e=mt(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.photoId,r=t.tubeId,e.next=3,this.tubeViewMutation.mutate({photoId:n,tubeId:r});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"invalidTube",get:function(){var e;return 30051===(null===(e=this.theaterInfo.data.visionTubeInfo)||void 0===e?void 0:e.result)}},{key:"lastSeenEpisode",get:function(){var e,t,n,r;return this.theaterInfo.loading?-1:(null===(e=this.theaterInfo)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.visionTubeInfo)||void 0===n||null===(r=n.lastSeenEpisode)||void 0===r?void 0:r.episodeNumber)||0}},{key:"totalEpisodeCount",get:function(){var e;return null===(e=this.theaterInfo.data.visionTubeInfo)||void 0===e?void 0:e.totalEpisodeCount}},{key:"totalEpisodeCountIgnoreStatus",get:function(){var e;return null===(e=this.theaterInfo.data.visionTubeInfo)||void 0===e?void 0:e.totalEpisodeCountIgnoreStatus}},{key:"ignoreView",get:function(){var e,t;return(null===(e=this.theaterInfo.data.visionTubeInfo)||void 0===e||null===(t=e.offlineEpisodes)||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.episodeNumber})))||[]}},{key:"ignorePhotoId",get:function(){var e,t;return(null===(e=this.theaterInfo.data.visionTubeInfo)||void 0===e||null===(t=e.offlineEpisodes)||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.photoId})))||[]}},{key:"name",get:function(){var e;return null===(e=this.theaterInfo.data.visionTubeInfo)||void 0===e?void 0:e.name}},{key:"detail",get:function(){var e,t;return(null===(e=this.theaterFeed)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.visionTubeEpisode)||{}}},{key:"photoId",get:function(){var e,t;return(null===(e=this.detail)||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.id)||""}},{key:"llsid",get:function(){return this.detail.llsid||""}}]),n}(c["a"]);Object(xe["c"])([Object(c["d"])({query:Le()(dt()),variables:function(e){var t,n,r=(null===(t=e.query)||void 0===t?void 0:t.tubeId)||this.tubeId;if(this.preId===r)return this.preData;var o=Date.now(),i={tubeId:(null===(n=e.query)||void 0===n?void 0:n.tubeId)||this.tubeId,page:Object(j["d"])(e.name),token:Object(ct["a"])({did:Object(st["a"])("did"),ts:o,uri:Tt}),st:o};return this.preId=r,this.preData=i,i},prefetch:!1,fetchPolicy:"network-only"})],Lt.prototype,"theaterInfo",void 0),Object(xe["c"])([Object(c["d"])({query:Le()(ft(),ut["a"]),variables:function(e){var t,n,r,o,i;return{tubeId:(null===e||void 0===e||null===(t=e.query)||void 0===t?void 0:t.tubeId)||this.tubeId,episodeNumber:this.curEpisodeNum,page:null===e||void 0===e||null===(n=e.query)||void 0===n?void 0:n.fromPage,channelId:(null===e||void 0===e||null===(r=e.query)||void 0===r?void 0:r.fromChannal)?Number(null===e||void 0===e||null===(o=e.query)||void 0===o?void 0:o.fromChannal):null,webPageArea:null===(i=e.query)||void 0===i?void 0:i.area}},fetchPolicy:"network-only",skip:function(){return this.curEpisodeNum<0}})],Lt.prototype,"theaterFeed",void 0),Object(xe["c"])([Object(c["c"])({mutation:Le()(lt()),variables:function(e){var t=e.photoId,n=e.tubeId;return{photoId:t,tubeId:n}}})],Lt.prototype,"tubeViewMutation",void 0);var Et=n("5737"),At=n("cfa5"),Dt=n("afbc");function Rt(){var e=$t(["\n            query hotQlympicVideoQuery($trendingId: String, $page: String, $webPageArea: String) {\n                olympicHotData(trendingId: $trendingId, page: $page, webPageArea: $webPageArea) {\n                    result\n                    llsid\n                    expTag\n                    serverExpTag\n                    pcursor\n                    webPageArea\n                    feeds {\n                        type\n                        trendingId\n                        author {\n                            id\n                            name\n                            headerUrl\n                            following\n                            headerUrls {\n                                url\n                            }\n                        }\n                        photo {\n                            id\n                            duration\n                            caption\n                            likeCount\n                            realLikeCount\n                            coverUrl\n                            photoUrl\n                            coverUrls {\n                                url\n                            }\n                            timestamp\n                            expTag\n                            animatedCoverUrl\n                            stereoType\n                            videoRatio\n                        }\n                        canAddComment\n                        llsid\n                        status\n                        currentPcursor\n                    }\n                }\n            }\n        "]);return Rt=function(){return e},e}function $t(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Mt(e){return Mt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function qt(e){return Ft(e)||Nt(e)||Ut(e)||Vt()}function Vt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ut(e,t){if(e){if("string"===typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}function Nt(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Ft(e){if(Array.isArray(e))return Bt(e)}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return t&&Kt(e.prototype,t),n&&Kt(e,n),e}function Yt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}function Gt(e,t){return Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gt(e,t)}function Xt(e){var t=tn();return function(){var n,r=nn(e);if(t){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(e,t){return!t||"object"!==Mt(t)&&"function"!==typeof t?en(e):t}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nn(e){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nn(e)}var rn=function(e){Yt(n,e);var t=Xt(n);function n(){var e;return Wt(this,n),e=t.apply(this,arguments),e.trendingId="",e.webPageArea=null,e.name="hotQ",e.canFetch=!1,e}return Jt(n,[{key:"fetchMorePhoto",value:function(e){var t="last"===e.direction,n=this.hotRankIdList&&0===this.hotRankIdList.indexOf(e.curId);if(!(this.hotVideo.loading&&!t||t&&n)){var r=t&&this.hotRankIdList&&this.hotRankIdList.indexOf(e.curId)>0;e&&(this.trendingId=this.getNextRankId(e.curId,r)),this.hotVideo.fetchMore({variables:{trendingId:this.trendingId,webPageArea:null===e||void 0===e?void 0:e.webPageArea},updateQuery:function(e,t){var n,o,i,a;return{olympicHotData:Ht(Ht({},(null===t||void 0===t?void 0:t.olympicHotData)||{}),{},{feeds:r?[].concat(qt((null===t||void 0===t||null===(n=t.olympicHotData)||void 0===n?void 0:n.feeds)||[]),qt((null===e||void 0===e||null===(o=e.olympicHotData)||void 0===o?void 0:o.feeds)||[])):[].concat(qt((null===e||void 0===e||null===(i=e.olympicHotData)||void 0===i?void 0:i.feeds)||[]),qt((null===t||void 0===t||null===(a=t.olympicHotData)||void 0===a?void 0:a.feeds)||[]))})}}})}}},{key:"getNextRankId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hotRankIdList){var n=this.hotRankIdList.length||0,r=this.hotRankIdList.indexOf(e);if(t&&r>0)return this.hotRankIdList[r-1];if(r>-1&&r<n)return this.hotRankIdList[r+1]}return e}},{key:"hotVideoList",get:function(){var e=this.hotVideo.data.olympicHotData;return((null===e||void 0===e?void 0:e.feeds)||[]).map((function(e){var t;return Object(j["p"])(e,{videoPhotoCaption:Object(fe["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})}))}},{key:"feedVideoList",get:function(){return this.hotVideoList}},{key:"feedVideoListLength",get:function(){return this.hotVideoList.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.hotVideo.data.olympicHotData)||void 0===e?void 0:e.llsid}},{key:"area",get:function(){var e;return(null===(e=this.hotVideo.data.olympicHotData)||void 0===e?void 0:e.webPageArea)||""}}]),n}(c["a"]);Object(xe["c"])([Object(c["d"])({query:Le()(Rt()),variables:function(e){return this.trendingId=e.query.trendingId?decodeURIComponent(e.query.trendingId):this.trendingId,{trendingId:this.trendingId,page:Object(j["d"])(e.name),webPageArea:this.webPageArea||e.query.area}},fetchPolicy:"cache-first",skip:function(e){return e.name===Dt["a"].ShortVideo&&!this.canFetch}})],rn.prototype,"hotVideo",void 0);var on={profile:tt["a"],find:nt["a"],hashtag:ot["a"],search:it["a"],like:at["a"],theater:Lt,hotrank:E["a"],brilliant:rt["a"],profilelike:Et["a"],samecity:At["a"],hotolympic:rn},an=["authorId","streamSource","tagName","currentPcursor","userId","searchKey","trendingId","tubeId","area","thirdTab","fromPage","fromChannal","olympic","tabId","backPage"],un={noArgsFetch:["hashtag","like","profilelike","brilliant","samecity","find"],needArgsFetch:["profile","search","hotrank","theater","hotolympic"]},cn=["find","like","samecity","brilliant","olympic"],sn=["search","profile"],ln=["hotolympic","hotrank"];function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e,t,n){var r=0;return r="next"===e?n===t-1?t-1:n+1:-1===n?n:n-1,r}function hn(e){var t=Object(u["q"])();Object(u["l"])((function(){var n=_e()(window,"keydown",!1).filter((function(e){return 38===e.keyCode||40===e.keyCode}));t.value=n.subscribe({next:function(t){e(t),t.preventDefault()}})})),Object(u["j"])((function(){var e;null===(e=t.value)||void 0===e||e.unsubscribe()}))}function mn(e,t,n){var r="".concat(t,"_").concat(n);return e.findIndex((function(e,o){var i,a;return n&&n>-1?"".concat(null===e||void 0===e||null===(a=e.photo)||void 0===a?void 0:a.id,"_").concat(o)===r:(null===e||void 0===e||null===(i=e.photo)||void 0===i?void 0:i.id)===t}))}function bn(e){var t=on[e]||et;return Object(c["f"])(t)}function yn(e,t,n){return un.noArgsFetch.includes(t)?e.fetchMoreData():un.needArgsFetch.includes(t)?e.fetchMorePhoto(n):e.getShortVideoList()}function gn(e){var t=e.model,n=e.canFetch,r=e.state,o=e.streamSource,i=e.args,a=void 0===i?{}:i,c=e.canMore,s=void 0===c||c,l=e.isRank,f=r.videoIndex,d=r.hasRankList,p="function"===typeof s?s():s;t.feedVideoListLength||(t.canFetch=n),f===t.feedVideoListLength-1&&f>=0&&yn(t,o,dn(dn({},a),{},{more:p})),l&&0===f&&d&&yn(t,o,dn(dn({},a),{},{direction:"last",more:p}));var v=Object(u["t"])((function(){return t.feedVideoListLength}),(function(e){(1===e||l&&!d)&&(yn(t,o,dn(dn({},a),{},{more:p,hasRankList:d})),d||(r.hasRankList=!0)),v()}))}function On(e){var t=e.feedVideoList,n=e.index,r=e.videoModel,o=e.canFetch;return t[n]?(r.canRefetch=!1,t[n]):(r.canRefetch=o,r)}function wn(e){var t,n,r=e.nextIndex,o=e.state,i=e.feedModel,a=o.startVideoId;return-1===r?a:null===(t=i.feedVideoList[r])||void 0===t||null===(n=t.photo)||void 0===n?void 0:n.id}function jn(e){var t=e.canMore,n=e.args,r=e.state,o=e.isPrevRank,i=e.feedModel,a=e.streamSource,u=r.videoIndex;(u>=i.feedVideoListLength-1||o&&r.hasRankList)&&t&&(yn(i,a,n),!r.hasRankList&&ln.includes(a)&&(r.hasRankList=!0))}function kn(e){var t=e.feedModel,n=e.curPhotoId,r=e.arg;Object(u["t"])((function(){return n.value}),(function(e){if(e){if(r.canRecord&&!r.canRecord())return;t.viewRecord({photoId:e,tubeId:r.tubeId})}}),{immediate:!0})}function In(e){var t=e.direction,n=e.currentIndex,r=e.totalEpisodeCount,o=e.callback,i=e.toastShowFunc;"last"===t&&n<=0||("next"===t&&n>=r-1?i&&i():("next"===t&&o(n+1),"last"===t&&o(n-1)))}function Cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e;if(!n.includes(e))return e;while(n.includes(e))e++;if(e>=t){while(r>0&&n.includes(r))r--;e=r}return e}function Pn(e){var t=Object(u["p"])({originValue:e,isDisorderListModel:!1,isLimitPage:!1,isRankPage:!1});return!cn.includes(e)&&e||(t.isDisorderListModel=!0),sn.includes(e)&&(t.isLimitPage=!0),ln.includes(e)&&(t.isRankPage=!0),t}var Sn=n("859b");function _n(e,t){return An(e)||En(e,t)||Tn(e,t)||xn()}function xn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e,t){if(e){if("string"===typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){o=!0,i=c}finally{try{r||null==u["return"]||u["return"]()}finally{if(o)throw i}}return n}}function An(e){if(Array.isArray(e))return e}function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){$n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e,t){return t.reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),{})}function qn(e,t,n){return n.forEach((function(n){t[n]&&Object.assign(e,$n({},n,t[n]))})),e}function Vn(e,t,n){var r=n.replaceCur,o=n.callback,i=n.needKeepQuery,a=void 0===i?[]:i,u=n.detailModel,c=n.oldIndex,s=n.curIndex,l=t.$route.query,f=t.$route.params.photoId;l=qn(l,u.value,["currentPcursor","trendingId"]);var d="/short-video/".concat(e),p=Mn(l,a);e!==f||c!==s?r?t.$router.replace({path:d,query:Rn({},p)}):t.$router.push({path:d,query:Rn({},p)}):o&&o()}function Un(e,t){var n=t.root,r=t.currentUser,o=t.feedModel,i=Object(j["l"])();Object(j["k"])("showLogin",(function(t){!e.needLogin||t.show||(null===r||void 0===r?void 0:r.userInfo.id)||n.$router.push("/")})),Object(u["t"])((function(){return o.dataError}),(function(t){t.message&&t.message.includes("No Login")&&(e.needLogin=!0,i("login",{success:function(){location.reload()}}))}))}function Nn(e){var t=e.photoPackage,n=e.playerModel,r=e.logType,o=e.timingData,i=e.detailModel,a=e.state,c=e.root,s=Object(j["l"])(),l=Object(le["e"])(),f=Object(u["t"])((function(){return t.value}),(function(e){var n=["type","identity","s_author_id","index","exp_tag","llsid"],r=n.every((function(t){return!!e[t]}));r&&(s("headShow",t.value),f())}));function d(e){l({type:"CLICK",logType:r.value,event_name:"SWITCH_PHOTO",event_value:{switch_type:e},event_content:{photo_package:t.value}})}function p(){var e,u,f=n.summaryQosData,d=n.kernelLoadedTime-o.beginTime,p=n.kernelInitTime-o.navigationStartTime;l({type:"VIDEO_PLAY",event_name:"VIDEO_PLAY",logType:r.value,event_value:{play_duration:null===f||void 0===f?void 0:f.actual_play_duration,auto_play_judge:a.autoPlay?"TRUE":"FALSE",waiting_kernel_time:d,page_load_time:p,third_icon:c.$route.query.thirdTab},event_content:{photo_package:t.value},otherLog:{photo_duration:null===(e=i.value)||void 0===e||null===(u=e.photo)||void 0===u?void 0:u.duration}}),s("change-video",{summaryQosData:f,waitingTime:d,pageLoadTime:p}),o.navigationStartTime=+new Date}return{sendSwitchLog:d,sendVideoPlayLog:p}}function Fn(e){var t=e.detailModel,n=e.timingData,r=e.logType,o=e.state,i=e.root,a=e.feedModel,c=e.photoPackage,s=e.needEpisode,l=e.watchId,f=Object(u["e"])("realshowCollectKey"),d=f.realShowLogModel,p=Object(le["e"])();Object(u["l"])((function(){n.navigationStartTime=performance&&performance.timing.navigationStart,Object(u["t"])((function(){var e;return[null===t||void 0===t||null===(e=t.value)||void 0===e?void 0:e.photo]}),(function(e){var u=_n(e,1),f=u[0];if(!t.value.isAnti&&(null===f||void 0===f?void 0:f.id)){var v,h,m,b,y,g;n.beginTime=+new Date,o.watchId=l;var O={play_type:"VERTICAL",watch_id:o.watchId,photo_duration:f.duration,detail_type:s.value?"SMALL_THEATER":"COMMON"},w=i.$route.query.tubeId;w&&Object.assign(O,{series_id:w}),p({type:"PV",logType:r.value,params:O,beginTime:n.beginTime,contentPackage:{photo_package:c.value}}),d.sendRealshowLogImmediately([{llsid:a.llsid,feed:[{feed_type:"PHOTO",s_author_id:null===(v=t.value)||void 0===v||null===(h=v.author)||void 0===h?void 0:h.id,s_photo_id:null===(m=t.value)||void 0===m||null===(b=m.photo)||void 0===b?void 0:b.id,exp_tag:null===(y=t.value)||void 0===y||null===(g=y.photo)||void 0===g?void 0:g.expTag,show_index_plus_one:o.videoIndex<0?o.videoIndex+2:o.videoIndex+1,session_id:Sn["a"].sessionId,enter_action:"OTHER"}]}])}}),{immediate:!0})}))}var Bn=n("341a");function zn(e){return sessionStorage.getItem(e)}function Hn(e,t){return sessionStorage.setItem(e,t)}var Qn=n("1670");function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){Jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e,t){return tr(e)||er(e,t)||Xn(e,t)||Gn()}function Gn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xn(e,t){if(e){if("string"===typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(e,t):void 0}}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(c){o=!0,i=c}finally{try{r||null==u["return"]||u["return"]()}finally{if(o)throw i}}return n}}function tr(e){if(Array.isArray(e))return e}function nr(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function rr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){nr(i,r,o,a,u,"next",e)}function u(e){nr(i,r,o,a,u,"throw",e)}a(void 0)}))}}var or=Object(u["c"])({name:"shortVideo",metaInfo:function(){return{title:this.pageTitle,meta:[{name:"keywords",content:"快手,快手官网,快手下载,kuaishou,快手直播伴侣,快手app,短视频app,快手直播"},{name:"description",content:"快手是一款国民级短视频App。在快手，了解真实的世界，认识有趣的人，也可以记录真实而有趣的自己。快手，拥抱每一种生活。"}]}},components:{ShortVideoWrapper:F,ShortVideoInfo:we,AutoplayButton:Pe["a"],Toast:de["a"]},setup:function(e,t){var n=t.root,r=Object(le["e"])(),o=Object(c["f"])(ue["a"]),i=Object(u["p"])({navigationStartTime:0,beginTime:+new Date}),s=Pn(n.$route.query.streamSource),l=bn(s.originValue),f=Object(c["f"])(Ce["a"]),d=Object(c["f"])(Bn["a"]),p=Object(u["a"])((function(){return n.$route.params.photoId})),v=Object(u["a"])((function(){return"find"===s.originValue||"brilliant"===s.originValue?Qn["a"]:null})),h=Object(u["a"])((function(){return"theater"===s.originValue})),m=Object(u["a"])((function(){return l.totalEpisodeCountIgnoreStatus})),b=Object(u["a"])((function(){return l.ignoreView})),y=Object(u["a"])((function(){return l.ignorePhotoId||[]})),g=Object(u["a"])((function(){return l.lastSeenEpisode})),O=Object(u["a"])((function(){return l.name})),w=Object(u["a"])((function(){return h.value&&l.invalidTube})),k=Object(u["p"])({videoIndex:h.value?0:mn(l.feedVideoList,p.value),startVideoId:p.value,watchId:"",autoPlay:!0,backUrl:"/",backQuery:{},showInfoPanel:!0,showToggle:!1,errVideoList:[],needLogin:!1,noMorePhotoToast:!1,episodeLoaded:!1,hasRankList:l.area&&!(l.area.indexOf("detail")>-1)}),I=Object(u["q"])(null),C=Object(j["l"])();function P(){return!(!(null===o||void 0===o?void 0:o.userInfo.id)&&s.isLimitPage)||(null===l||void 0===l?void 0:l.canNext)}var S=Object(u["a"])((function(){return n.$route.query}));gn({model:l,canFetch:!0,state:k,streamSource:s.originValue,args:{tabId:S.value.tabId,curId:S.value.trendingId,canNextIfEmpty:!0},canMore:P,isRank:s.isRankPage});var _=Object(u["q"])(0),x=-1===k.videoIndex,T=Object(u["q"])({}),L=Object(u["a"])((function(){var e,t;return"".concat((null===(e=T.value)||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)||"短视频","-快手")})),E=Object(u["a"])((function(){var e,t,n,r;return{type:"PHOTO",identity:p.value,s_author_id:null===(e=T.value)||void 0===e||null===(t=e.author)||void 0===t?void 0:t.id,index:k.videoIndex<0?k.videoIndex+2:k.videoIndex+1,exp_tag:null===(n=T.value)||void 0===n||null===(r=n.photo)||void 0===r?void 0:r.expTag,llsid:l.llsid}}));function A(e){var t=e.index,n=e.canSendLog;if(m.value){n&&r({type:"CLICK",event_name:"CHOICE_VIDEO_NUM_BUTTON",event_value:{num:t+1},event_content:{photo_package:E.value}});var o=Cn(t,m.value,b.value);_.value=o,l.curEpisodeNum=o}}function D(e){k.autoPlay=e}h.value?(Object(u["t"])((function(){return g.value}),(function(e){e>=0&&A({index:e,canSendLog:!1})}),{immediate:!0}),Object(u["t"])((function(){return l.detail}),(function(e){var t;(k.episodeLoaded=!0,e&&e.photo)&&(Vn(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.id,n,{replaceCur:!0,needKeepQuery:an,detailModel:T,oldIndex:k.videoIndex,curIndex:_.value}),T.value=e,k.videoIndex=_.value)}))):(T.value=On({feedVideoList:l.feedVideoList,index:k.videoIndex,videoModel:d,canFetch:s.isDisorderListModel&&!!k.startVideoId}),Object(u["t"])((function(){return l.feedVideoList}),(function(e,t){e.length>0&&0===t.length&&(s.isDisorderListModel||(k.videoIndex=mn(e,k.startVideoId),T.value=On({feedVideoList:e,index:k.videoIndex,videoModel:d})),l.canFetch=!1)}))),Un(k,{root:n,currentUser:o,feedModel:l});var R=Nn({photoPackage:E,logType:v,playerModel:f,timingData:i,detailModel:T,state:k,root:n}),$=R.sendSwitchLog,M=R.sendVideoPlayLog,q=Object(u["a"])((function(){var e;return k.videoIndex===(null===l||void 0===l||null===(e=l.feedVideoList)||void 0===e?void 0:e.length)-1})),V=Object(Ie["debounce"])(function(){var e=rr(a.a.mark((function e(t){var r,o,i,u,c,f,v,b;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.type,o=t.switchType,i=t.replaceCur,$(o),!h.value){e.next=4;break}return e.abrupt("return",In({direction:r,currentIndex:_.value,totalEpisodeCount:m.value,callback:function(e){A({index:e,canSendLog:!1})},toastShowFunc:function(){var e;!k.noMorePhotoToast&&(null===(e=I.value)||void 0===e||e.show("您已看完最新一集，请耐心等待更新")),k.noMorePhotoToast=!0,C("reload-video",{})}}));case 4:if(k.videoIndex=mn(l.feedVideoList,p.value,k.videoIndex),u=vn(r,l.feedVideoListLength,k.videoIndex),c=wn({nextIndex:u,state:k,feedModel:l}),"last"!==r||!s.isRankPage||0!==k.videoIndex||k.hasRankList){e.next=9;break}return e.abrupt("return");case 9:if(-1!==k.videoIndex||!x||"last"!==r){e.next=11;break}return e.abrupt("return");case 11:if(0!==k.videoIndex||x&&s.isDisorderListModel||"last"!==r){e.next=13;break}return e.abrupt("return");case 13:if(!k.errVideoList.includes(c)){e.next=21;break}if(u=vn(r,l.feedVideoListLength,k.videoIndex),c=wn({nextIndex:u,state:k,feedModel:l}),"last"===r?k.videoIndex--:k.videoIndex++,c){e.next=19;break}return e.abrupt("return");case 19:e.next=13;break;case 21:C("hide-end",{}),f=k.videoIndex,k.videoIndex=u,T.value=On({feedVideoList:l.feedVideoList,index:k.videoIndex,videoModel:d}),v=T.value.trendingId?{curId:T.value.trendingId,direction:r,canNextIfEmpty:!0,hasRankList:k.hasRankList}:{},b=s.isRankPage&&"last"===r&&0===k.videoIndex,jn({canMore:P(),args:v,state:k,isPrevRank:b,feedModel:l,streamSource:s.originValue}),Vn(c,n,{replaceCur:i,needKeepQuery:an,detailModel:T,oldIndex:f,curIndex:k.videoIndex,callback:function(){var e,t=P()?"没有更多内容":"登录后查看更多内容";!k.noMorePhotoToast&&"LOAD"!==o&&(null===(e=I.value)||void 0===e||e.show(t)),k.noMorePhotoToast=!0,C("reload-video",{})}});case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),100),U=!1;function N(e){38===e.keyCode?V({type:"last",switchType:"KEYBOARD"}):V({type:"next",switchType:"KEYBOARD"})}function F(e){T.value.author.following=e}function B(){n.$router.replace({path:k.backUrl,query:Kn({},k.backQuery)})}function z(){var e;null===(e=I.value)||void 0===e||e.show("复制成功")}function H(){var e;null===(e=I.value)||void 0===e||e.show("我们将减少此类型视频播放"),V({type:"next",switchType:"NO_INTEREST"})}function Q(){k.showInfoPanel=!k.showInfoPanel,k.showToggle=!1,n.$nextTick((function(){k.showToggle=!0}))}return Object(u["t"])((function(){var e;return[null===T||void 0===T||null===(e=T.value)||void 0===e?void 0:e.status,l.feedVideoList]}),(function(e){var t=Yn(e,2),n=t[0],r=t[1];if(!U&&r&&0!==r.length&&!isNaN(Number(n))&&!T.value.isAnti){var o=r.find((function(e){return e.id===p.value}));if(1!==Number(n)||!o&&!s.isDisorderListModel){var i,a;U=!0,k.errVideoList.push(p.value);var u="profilelike"===s.originValue?"该作品暂不支持查看":null===(i=T.value)||void 0===i?void 0:i.errorVideoText;null===(a=I.value)||void 0===a||a.show(u,2500),setTimeout((function(){var e;V({type:"next",switchType:"KEYBOARD",replaceCur:!0}),null===(e=I.value)||void 0===e||e.show("已为您播放其他精彩视频"),U=!1}),3e3)}}})),Object(u["t"])((function(){return[p.value,y.value]}),(function(e){e[1].includes(e[0])&&h.value&&V({type:"next",switchType:"KEYBOARD",replaceCur:!0})}),{immediate:!0}),hn(N),h.value&&kn({feedModel:l,curPhotoId:p,arg:{tubeId:S.value.tubeId,canRecord:function(){return!y.value.includes(p.value)}}}),Fn({detailModel:T,timingData:i,logType:v,state:k,root:n,feedModel:l,photoPackage:E,needEpisode:h,watchId:ke()()}),Object(u["l"])((function(){window.addEventListener("beforeunload",M),k.showToggle=!0})),Object(u["j"])((function(){window.removeEventListener("beforeunload",M)})),Object(j["k"])("video-like",(function(e){T.value.photo.liked=e.liked,T.value.photo.realLikeCount=e.count})),Object(j["k"])("refetch-video",(function(){d.canRefetch=!0,d.videoDetail.refetch(),T.value=d,T.value.isAnti=!0})),Object(le["a"])((function(e){return Kn(Kn({},e),{},{event_value:Kn(Kn({},e.event_value),{},{play_type:"VERTICAL"}),event_content:Kn(Kn({},e.event_content),{},{photo_package:E.value})})})),Kn(Kn(Kn({log:r},Object(u["s"])(i)),Object(u["s"])(k)),{},{detailModel:T,switchVideo:V,changeFollowStatus:F,sendVideoPlayLog:M,backTo:B,handleCopySuccess:z,handleFeedbackSuccess:H,broadcast:C,isEnd:q,handleInfoPanel:Q,onPlayChange:D,needEpisode:h,totalEpisodeCount:m,lastSeenEpisode:g,feedModel:l,chooseVideo:A,currentIndex:_,curPhotoId:p,tubeTitle:O,ignoreView:b,logType:v,invalidTube:w,pageTitle:L,toastInstance:I})},beforeRouteLeave:function(e,t,n){this.sendVideoPlayLog(),this.log({type:"PV",action:"leave",beginTime:this.beginTime}),n()},beforeRouteUpdate:function(e,t,n){e.path!==t.path&&(t.params.photoId&&(this.sendVideoPlayLog(),this.log({type:"PV",action:"leave",beginTime:this.beginTime})),n())},beforeRouteEnter:function(e,t,n){n((function(e){if(!e.$isServer){var n=e.$router.resolve(t),r="/"===n.href&&zn("backUrl")?zn("backUrl"):n.href;Hn("backUrl",r),e.backUrl=r,e.backQuery=t.query}}))}}),ir=or,ar=(n("67c9"),Object(h["a"])(ir,r,o,!1,null,"79d91316",null));t["default"]=ar.exports},"2d7c":function(e,t){function n(e,t){var n=-1,r=null==e?0:e.length,o=0,i=[];while(++n<r){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}e.exports=n},"2ea1":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"share-tooltip-content",style:{opacity:e.canShow?1:0}},[n("div",{staticClass:"share-tooltip-main"},[n("div",{staticClass:"left-part"},[n("p",{staticClass:"tip"},[e._v(" 微信扫码分享 ")]),n("div",{staticClass:"qrcode-box"},[n("qrcode",{attrs:{size:e.qrSize,text:e.qrUrl}})],1)]),n("div",{staticClass:"right-part"},[n("ul",{staticClass:"share-list"},e._l(e.shareTypes,(function(t){return n("li",{key:t.name,staticClass:"share-list-item"},[n("div",{class:t.name,on:{click:function(n){return e.handleShare(t)}}}),e._v(" "+e._s(t.text)+" ")])})),0),n("div",{staticClass:"copy"},[n("div",{staticClass:"copy-input"},[n("span",{staticClass:"copy-info"},[e._v("视频地址")]),n("input",{staticClass:"copy-input-input",attrs:{type:"text",readonly:"readonly"},domProps:{value:e.url}}),n("pl-button",{staticClass:"copy-btn",attrs:{size:"small",type:"primary"},on:{click:e.copy}},[n("span",{staticClass:"btn-text"},[e._v("复制")])])],1)])])])])},o=[],i=n("4795"),a=n.n(i),u=(n("9a1a"),n("0d8b")),c=(n("e951"),n("3825")),s=n("48d1"),l=n("4151"),f=n.n(l),d=n("7ff1"),p=n("c540"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"qrcode",style:{width:""+e.size,height:""+e.size}},[e.qrcodeUrl?n("img",{staticClass:"qrcode-img",attrs:{src:e.qrcodeUrl,alt:"qrcode"}}):n("div",{staticClass:"qrcode-loading"})])},h=[],m=n("a6b0"),b=n.n(m),y=Object(s["c"])({props:{text:{type:String,default:""},size:{type:[Number,String],default:200},qrSize:{type:Number,default:100}},setup:function(e){var t=Object(s["a"])((function(){return e.text?"https://ksurl.cn/createqrcode?".concat(b.a.stringify({content:e.text,width:e.qrSize,height:e.qrSize,contentType:"URL",toShortUrl:!1})):""}));return{qrcodeUrl:t}}}),g=y,O=(n("f337"),n("d802")),w=Object(O["a"])(g,v,h,!1,null,"03bf1d48",null),j=w.exports,k=n("0fa5"),I=n("d2ae"),C=n("a7bc"),P=n("76e9"),S=n.n(P);function _(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,u,"next",e)}function u(e){_(i,r,o,a,u,"throw",e)}a(void 0)}))}}var T=[{name:"qq",text:"QQ",logName:"QQ",shareChannel:"QQ",url:function(e,t){var n=e.url,r=e.title,o=e.source,i=e.image,a=e.summary,u={url:Object(p["a"])(n,{share_channel:"QQ",share_id:t}),title:r,source:o,pics:i,summary:a};return"http://connect.qq.com/widget/shareqq/index.html?".concat(b.a.stringify(u))}},{name:"qzone",text:"QQ空间",logName:"QQZOOM",shareChannel:"QZone",url:function(e,t){var n=e.url,r=e.title,o=e.source,i=e.description,a=e.summary,u=e.image,c={url:Object(p["a"])(n,{share_channel:"QQZOOM",share_id:t}),title:r,desc:i,summary:a,site:o,pics:u};return"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?".concat(b.a.stringify(c))}},{name:"weibo",text:"微博",logName:"MICROBLOG",shareChannel:"WEIBO",url:function(e,t){var n=e.url,r=e.title,o=e.image,i={url:Object(p["a"])(n,{share_channel:"MICROBLOG",share_id:t}),title:r,pic:o};return"https://service.weibo.com/share/share.php?".concat(b.a.stringify(i))}}];function L(e){return E.apply(this,arguments)}function E(){return E=x(a.a.mark((function e(t){var n,r,o,i,u,c;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.shareId,r=t.shareModel,o=t.shareType,i=t.id,u=t.shareInfo,c=t.shareConfig,e.next=3,r.handleCardShare({shareId:i,shareChannel:o.shareChannel,shareInfo:u,config:c});case 3:return e.abrupt("return",o.url(r.cardShareObj,n));case 4:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return D=x(a.a.mark((function e(t){var n,r,o,i,u,c,s,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.shareType,r=t.shareModel,o=t.log,i=t.id,u=t.shareInfo,c=t.shareConfig,s=t.logType,l=S()(),e.t0=window,e.next=5,L({shareId:l,shareModel:r,shareType:n,id:i,shareInfo:u,shareConfig:c});case 5:e.t1=e.sent,e.t0.open.call(e.t0,e.t1,"_blank"),o({type:"CLICK",event_name:"SHARE_TOOL_BUTTON",logType:s,event_value:{tool_name:n.logName,share_id:l}});case 8:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function R(e,t){var n=S()();e({type:"CLICK",event_name:"SHARE_COPY_BUTTON",logType:t,event_value:{share_id:n}})}function $(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$(i,r,o,a,u,"next",e)}function u(e){$(i,r,o,a,u,"throw",e)}a(void 0)}))}}var q=Object(s["c"])({components:{plButton:c["a"],qrcode:j,plTooltip:u["a"]},props:{id:{type:String},shareInfo:{type:Object},videoType:{type:String},ignoreOptions:{type:Array,default:function(){return[]}},shareBaseConfig:{type:Object,required:!0},logType:{type:String},showShare:Boolean,qrSize:{type:String,default:"100px"}},setup:function(e,t){var n=t.root,r=t.emit,o=Object(C["e"])(),i=Object(s["p"])(T),u=Object(s["p"])(f()(i,"name")),c=Object(I["f"])(k["a"]),l=Object(s["a"])((function(){return Object(p["d"])(n.$route.fullPath.split("?")[1],e.ignoreOptions)})),v=Object(s["a"])((function(){return e.showShare&&c.canShare})),h=Object(s["q"])(""),m=Object(s["q"])(""),b=Object(s["q"])(""),y=Object(s["q"])("https://www.kuaishou.com/");function g(){r("close-captcha")}function O(){return w.apply(this,arguments)}function w(){return w=M(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.id,!n){t.next=5;break}return t.next=4,c.handleTokenShare(n,{config:e.shareBaseConfig,shareExtInfo:{title:null===(r=e.shareInfo)||void 0===r?void 0:r.title,nickname:null===(o=e.shareInfo)||void 0===o?void 0:o.nickname,coverUrl:null===(i=e.shareInfo)||void 0===i?void 0:i.coverUrl,queries:l.value,photoId:n,videoType:e.videoType}});case 4:m.value=c.tokenShareObj.tokenUrl;case 5:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}Object(s["l"])((function(){y.value="https://".concat(window.location.host,"/")}));var j=Object(d["a"])(".copy-btn",m),P=j.mainCopyMethod;function S(t){var n,r,i;A({shareType:t,shareModel:c,log:o,id:e.id,shareInfo:{title:null===(n=e.shareInfo)||void 0===n?void 0:n.title,nickname:null===(r=e.shareInfo)||void 0===r?void 0:r.nickname,coverUrl:null===(i=e.shareInfo)||void 0===i?void 0:i.coverUrl,queries:l.value,photoId:e.id,videoType:e.videoType},shareConfig:e.shareBaseConfig,logType:e.logType})}function _(){return x.apply(this,arguments)}function x(){return x=M(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return P.value&&P.value(),R(o,e.logType),r("copy"),t.next=5,O();case 5:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}return Object(s["t"])((function(){return e.showShare}),function(){var t=M(a.a.mark((function t(n){var r,i,u,s;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.id,!r||!n||b.value===r&&c.canShare){t.next=10;break}return h.value="",b.value=r,c.setHandleCloseCaptcha(g),t.next=7,c.handleQrShare(r,{config:e.shareBaseConfig,shareExtInfo:{title:null===(i=e.shareInfo)||void 0===i?void 0:i.title,nickname:null===(u=e.shareInfo)||void 0===u?void 0:u.nickname,coverUrl:null===(s=e.shareInfo)||void 0===s?void 0:s.coverUrl,queries:l.value,photoId:r,videoType:e.videoType}});case 7:return h.value=c.qrShareObj.qrUrl,t.next=10,O();case 10:n&&o({type:"SHOW",event_name:"SHARE_POPUP_CARD"});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{immediate:!0}),{qrUrl:h,tokenUrl:m,shareTypes:i,shareTypesMap:u,handleShare:S,copy:_,url:y,canShow:v}}}),V=q,U=(n("7ffc"),Object(O["a"])(V,r,o,!1,null,"0fc121c6",null));t["a"]=U.exports},"2fcc":function(e,t){function n(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}e.exports=n},"30c9":function(e,t,n){var r=n("9520"),o=n("b218");function i(e){return null!=e&&o(e.length)&&!r(e)}e.exports=i},"32f4":function(e,t,n){var r=n("2d7c"),o=n("d327"),i=Object.prototype,a=i.propertyIsEnumerable,u=Object.getOwnPropertySymbols,c=u?function(e){return null==e?[]:(e=Object(e),r(u(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},"341a":function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("0f9e"),o=n("9530"),i=n.n(o),a=n("d2ae"),u=n("afbc"),c=n("90cd"),s=n("b74e");function l(){var e=f(["\n            query visionVideoDetail($photoId: String, $type: String, $page: String, $webPageArea: String){\n                visionVideoDetail(photoId: $photoId, type: $type, page: $page, webPageArea: $webPageArea){\n                    status\n                    type\n                    author {\n                        id\n                        name\n                        following\n                        headerUrl\n                    }\n                    photo {\n                        id\n                        duration\n                        caption\n                        likeCount\n                        realLikeCount\n                        coverUrl\n                        photoUrl\n                        liked\n                        timestamp\n                        expTag\n                        llsid\n                        viewCount\n                        videoRatio\n                        stereoType\n                        musicBlocked\n                        manifest {\n                            mediaType\n                            businessType\n                            version\n                            adaptationSet {\n                                id\n                                duration\n                                representation {\n                                    id\n                                    defaultSelect\n                                    backupUrl\n                                    codecs\n                                    url\n                                    height\n                                    width\n                                    avgBitrate\n                                    maxBitrate\n                                    m3u8Slice\n                                    qualityType\n                                    qualityLabel\n                                    frameRate\n                                    featureP2sp\n                                    hidden\n                                    disableAdaptive\n                                }\n                            }\n                        }\n                        manifestH265\n                        photoH265Url\n                        coronaCropManifest\n                        coronaCropManifestH265\n                        croppedPhotoH265Url\n                        croppedPhotoUrl\n                        videoResource\n                    }\n                    tags {\n                        type\n                        name\n                    }\n                    commentLimit {\n                        canAddComment\n                    }\n                    llsid\n                    danmakuSwitch\n                }\n            }\n        "]);return l=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function w(e){var t=I();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var P={1:"hls",2:"mp4",3:"flv"},S={21:"当前作品已失效",208003:"找不到该作品，为你推荐了热门作品",208004:"找不到该作品，为你推荐了热门作品",208005:"暂未支持显示图片作品，请在移动端查看"},_=function(e){g(n,e);var t=w(n);function n(){var e;return m(this,n),e=t.apply(this,arguments),e.canRefetch=!1,e.photoId="",e}return y(n,[{key:"fetchData",value:function(e){var t=this;this.videoDetail.loading||(this.photoId=e,this.videoDetail.fetchMore({updateQuery:function(e,n){var r;return t.canRefetch=!1,{visionVideoDetail:v({__typename:(null===(r=e.visionVideoDetail)||void 0===r?void 0:r.__typename)||"VisionVideoDetail"},(null===n||void 0===n?void 0:n.visionVideoDetail)||{})}}}))}},{key:"author",get:function(){var e;return(null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.author)||{}}},{key:"photo",get:function(){var e;return(null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.photo)||{}}},{key:"hasManifest",get:function(){var e,t;return!!(null===(e=this.photo.manifest)||void 0===e||null===(t=e.adaptationSet)||void 0===t?void 0:t.length)||!1}},{key:"mediaType",get:function(){var e,t;return this.hasManifest?P[(null===(e=this.photo)||void 0===e||null===(t=e.manifest)||void 0===t?void 0:t.mediaType)||2]:P[2]}},{key:"supDanmaku",get:function(){var e;return null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.danmakuSwitch}},{key:"playInfo",get:function(){var e=this.$route,t=this.photo;if(e.name===u["a"].ShortVideo)return t.videoResource;var n=t.coronaCropManifest||t.croppedPhotoUrl,r=t.coronaCropManifestH265||t.croppedPhotoH265Url;return n&&!r?{h264:n}:{h264:n||t.manifest||t.photoUrl,hevc:r||t.manifestH265||t.photoH265Url}}},{key:"videoPhotoCaption",get:function(){var e,t=null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.photo;return t?Object(c["c"])(null===t||void 0===t?void 0:t.caption):""}},{key:"videoTags",get:function(){var e;return(null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.tags)||[]}},{key:"canAddComment",get:function(){var e,t;return(null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e||null===(t=e.commentLimit)||void 0===t?void 0:t.canAddComment)||0}},{key:"status",get:function(){var e;return null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.status}},{key:"errorVideoText",get:function(){return"number"===typeof this.status?1!==this.status?S[this.status]||"当前作品已失效":"":"当前作品已失效"}},{key:"type",get:function(){var e;return null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.type}},{key:"llsid",get:function(){var e;return null===(e=this.videoDetail.data.visionVideoDetail)||void 0===e?void 0:e.llsid}}]),n}(a["a"]);Object(r["c"])([Object(a["d"])({query:i()(l()),variables:function(e){var t=e.query.page||e.name;return{photoId:e.params.photoId||this.photoId,page:Object(s["d"])(t),webPageArea:e.query.area}},prefetch:!0,skip:function(e){return(e.name===u["a"].ShortVideo||e.name===u["a"].NewReco)&&!this.canRefetch}})],_.prototype,"videoDetail",void 0)},"34ac":function(e,t,n){var r=n("9520"),o=n("1368"),i=n("1a8c"),a=n("dc57"),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,f=s.toString,d=l.hasOwnProperty,p=RegExp("^"+f.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(e){if(!i(e)||o(e))return!1;var t=r(e)?p:c;return t.test(a(e))}e.exports=v},3698:function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},3729:function(e,t,n){var r=n("9e69"),o=n("00fd"),i=n("29f3"),a="[object Null]",u="[object Undefined]",c=r?r.toStringTag:void 0;function s(e){return null==e?void 0===e?u:a:c&&c in Object(e)?o(e):i(e)}e.exports=s},3768:function(e,t,n){"use strict";var r=n("6fb0"),o=n.n(r);o.a},"39ff":function(e,t,n){var r=n("0b07"),o=n("2b3e"),i=r(o,"WeakMap");e.exports=i},"3a31":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("48d1");function o(e){var t=Object(r["a"])((function(){return!(!e.value||"boolean"!==typeof e.value.musicBlocked)&&e.value.musicBlocked})),n=Object(r["a"])((function(){return t.value})),o=Object(r["a"])((function(){return!t.value})),i=Object(r["a"])((function(){return!t.value}));return{muted:n,canPresetVolume:o,canChangeVolume:i}}},"3b4a":function(e,t,n){var r=n("0b07"),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=o},"3bb4":function(e,t,n){var r=n("08cc"),o=n("ec69");function i(e){var t=o(e),n=t.length;while(n--){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}e.exports=i},4151:function(e,t,n){var r=n("872a"),o=n("50c6"),i=o((function(e,t,n){r(e,n,t)}));e.exports=i},4245:function(e,t,n){var r=n("1290");function o(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=o},42845:function(e,t){function n(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}e.exports=n},"42a2":function(e,t,n){var r=n("b5a7"),o=n("79bc"),i=n("1cec"),a=n("c869"),u=n("39ff"),c=n("3729"),s=n("dc57"),l="[object Map]",f="[object Object]",d="[object Promise]",p="[object Set]",v="[object WeakMap]",h="[object DataView]",m=s(r),b=s(o),y=s(i),g=s(a),O=s(u),w=c;(r&&w(new r(new ArrayBuffer(1)))!=h||o&&w(new o)!=l||i&&w(i.resolve())!=d||a&&w(new a)!=p||u&&w(new u)!=v)&&(w=function(e){var t=c(e),n=t==f?e.constructor:void 0,r=n?s(n):"";if(r)switch(r){case m:return h;case b:return l;case y:return d;case g:return p;case O:return v}return t}),e.exports=w},4511:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"setting-entry"},[n("PlTooltip",{ref:"tip",staticClass:"setting-tooltip",attrs:{placement:"bottom-left","max-width":430,"is-absolute-mode":e.isAbsoluteMode,"insert-to-global":!e.isAbsoluteMode}},[n("div",{staticClass:"setting-icon"},[n("div",{staticClass:"setting-icon-dot"}),n("div",{staticClass:"setting-icon-dot"}),n("div",{staticClass:"setting-icon-dot"})]),n("div",{staticClass:"setting-panel",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"setting-panel-item",on:{click:e.handleReport}},[e._v(" "+e._s(e.reportName)+" ")])])])],1)},o=[],i=n("4795"),a=n.n(i),u=(n("9a1a"),n("0d8b")),c=n("a7bc"),s=n("b74e"),l=n("48d1"),f={1:{name:"视频",logName:"PHOTO"},2:{name:"用户",logName:"AUTHOR"},8:{name:"评论",logName:"COMMENT"}},d=n("2ef0");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,u,"next",e)}function u(e){m(i,r,o,a,u,"throw",e)}a(void 0)}))}}var y=Object(l["c"])({props:{isLogin:{type:Boolean},reportOptions:{type:Object,default:function(){return{reportType:1,page:"",targetId:"",reportedUserId:"",extraPhotoId:""}}}},components:{PlTooltip:u["a"]},setup:function(e){var t=Object(s["l"])(),n=Object(l["a"])((function(){return"举报".concat(f[e.reportOptions.reportType].name)})),r=Object(l["q"])(!0),o=Object(c["e"])(),i=Object(d["debounce"])(b(a.a.mark((function n(){return a.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o({type:"CLICK",event_name:"REPORT_BUTTON",event_value:{btn_type:f[e.reportOptions.reportType].logName}}),e.isLogin){n.next=3;break}return n.abrupt("return",t("login",{}));case 3:t("change-report-panel",v({},e.reportOptions));case 4:case"end":return n.stop()}}),n)}))),500);return Object(s["k"])("change-tooltip-mode",(function(e){r.value=e})),{handleReport:i,menuSymbol:f,reportName:n,isAbsoluteMode:r}}}),g=y,O=(n("88bc"),n("d802")),w=Object(O["a"])(g,r,o,!1,null,"5adf2c60",null);t["a"]=w.exports},4827:function(e,t,n){},"48a0":function(e,t,n){var r=n("242e"),o=n("950a"),i=o(r);e.exports=i},"49f4":function(e,t,n){var r=n("6044");function o(){this.__data__=r?r(null):{},this.size=0}e.exports=o},"4c17":function(e,t,n){},"50c6":function(e,t,n){var r=n("a0c4"),o=n("243f"),i=n("badf"),a=n("6747");function u(e,t){return function(n,u){var c=a(n)?r:o,s=t?t():{};return c(n,e,i(u,2),s)}}e.exports=u},"50d8":function(e,t){function n(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}e.exports=n},"529e":function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n("0f9e"),o=n("d2ae"),i=n("9530"),a=n.n(i),u=n("b765"),c=n("b74e"),s=n("afbc"),l=n("90cd");function f(){var e=p(["\n            ","\n            query hashTagDataQuery(\n                $tagName: String\n                $pcursor: String\n                $fromPhotoId: String\n                $page: String\n                $webPageArea: String\n            ) {\n                hashTagData(\n                    tagName: $tagName\n                    pcursor: $pcursor\n                    fromPhotoId: $fromPhotoId\n                    page: $page\n                    webPageArea: $webPageArea\n                ) {\n                    result\n                    llsid\n                    pcursor\n                    sessionId\n                    webPageArea\n                    feeds {\n                        ...feedContent\n                    }\n                }\n            }\n        "]);return f=function(){return e},e}function d(){var e=p(["\n            query tagInfoDataQuery($tagName: String, $fromPhotoId: String) {\n                tagInfoData(tagName: $tagName, fromPhotoId: $fromPhotoId) {\n                    result\n                    similarTags {\n                        photoCount\n                        textTag {\n                            id\n                            name\n                            rich\n                            tag\n                        }\n                        type\n                        exp_tag\n                    }\n                    tagInfo {\n                        textRichInfo {\n                            tagId\n                            iconUrls {\n                                url\n                            }\n                            tag\n                            isCollected\n                            description\n                        }\n                        hasChallenge\n                        photoCountText\n                        photoCount\n                        viewCountText\n                        viewCount\n                        cover\n                    }\n                }\n            }\n        "]);return d=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e){return g(e)||y(e)||b(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function y(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function g(e){if(Array.isArray(e))return O(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function x(e){var t=E();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var D=function(e){S(n,e);var t=x(n);function n(){var e;return I(this,n),e=t.apply(this,arguments),e.canFetch=!1,e}return P(n,[{key:"fetchMoreData",value:function(){this.hashTag.loading||"no_more"===this.pcursor||this.hashTag.fetchMore({variables:{pcursor:this.pcursor},updateQuery:function(e,t){var n,r;return{hashTagData:j(j({},(null===t||void 0===t?void 0:t.hashTagData)||{}),{},{feeds:[].concat(h((null===e||void 0===e||null===(n=e.hashTagData)||void 0===n?void 0:n.feeds)||[]),h((null===t||void 0===t||null===(r=t.hashTagData)||void 0===r?void 0:r.feeds)||[]))})}}})}},{key:"area",get:function(){var e;return null===(e=this.hashTag.data.hashTagData)||void 0===e?void 0:e.webPageArea}},{key:"hashTagInfo",get:function(){return this.tagInfo.data.tagInfoData}},{key:"hashTagList",get:function(){var e=this.hashTag.data.hashTagData;return((null===e||void 0===e?void 0:e.feeds)||[]).map((function(e){var t;return Object(c["p"])(e,{videoPhotoCaption:Object(l["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})}))}},{key:"pcursor",get:function(){var e;return(null===(e=this.hashTag.data.hashTagData)||void 0===e?void 0:e.pcursor)||""}},{key:"noMore",get:function(){var e,t=null===(e=this.hashTag.data.hashTagData)||void 0===e?void 0:e.pcursor;return"no_more"===t||null===t}},{key:"feedVideoList",get:function(){return this.hashTagList}},{key:"feedVideoListLength",get:function(){return this.hashTagList.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.hashTag.data.hashTagData)||void 0===e?void 0:e.llsid}}]),n}(o["a"]);Object(r["c"])([Object(o["d"])({query:a()(d()),variables:function(e){return{tagName:e.params.name,tagSource:e.query.source,fromPhotoId:e.query.photoId}},prefetch:!0,fetchPolicy:"cache-and-network",skip:function(e){return e.name===s["a"].ShortVideo}})],D.prototype,"tagInfo",void 0),Object(r["c"])([Object(o["d"])({query:a()(f(),u["a"]),variables:function(e){return{tagName:e.params.name||decodeURIComponent(e.query.tagName),fromPhotoId:e.query.photoId,pcursor:e.name===s["a"].ShortVideo&&e.query.curPcursor||"",page:Object(c["d"])(e.name),webPageArea:e.query.area}},prefetch:!0,fetchPolicy:"cache-and-network",skip:function(e){return e.name===s["a"].ShortVideo&&!this.canFetch}})],D.prototype,"hashTag",void 0)},"55a3":function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},5737:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n("0f9e"),o=n("9530"),i=n.n(o),a=n("d2ae"),u=n("b74e"),c=n("afbc"),s=n("90cd"),l=n("b765");function f(){var e=d(["\n        ","\n        query visionProfileLikePhotoList($pcursor: String, $page: String, $webPageArea: String) {\n            visionProfileLikePhotoList(pcursor: $pcursor, page: $page, webPageArea: $webPageArea) {\n                    result\n                    llsid\n                    webPageArea\n                    feeds {\n                        ...feedContent\n                    }\n                    hostName\n                    pcursor\n                }\n            }\n        "]);return f=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){return y(e)||b(e)||m(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function b(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function y(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function _(e){var t=L();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var A=function(e){P(n,e);var t=_(n);function n(){var e;return k(this,n),e=t.apply(this,arguments),e.canFetch=!1,e.isGuest=!0,e}return C(n,[{key:"fetchMoreData",value:function(){this.likePhoto.loading||"no_more"===this.pcursor||null===this.pcursor||this.likePhoto.fetchMore({variables:{pcursor:this.pcursor},updateQuery:function(e,t){var n,r;return{visionProfileLikePhotoList:w(w({},null===t||void 0===t?void 0:t.visionProfileLikePhotoList),{},{feeds:[].concat(v((null===(n=e.visionProfileLikePhotoList)||void 0===n?void 0:n.feeds)||[]),v((null===t||void 0===t||null===(r=t.visionProfileLikePhotoList)||void 0===r?void 0:r.feeds)||[]))})}}})}},{key:"dataError",get:function(){return this.likePhoto.error}},{key:"area",get:function(){var e;return null===(e=this.likePhoto.data.visionProfileLikePhotoList)||void 0===e?void 0:e.webPageArea}},{key:"pcursor",get:function(){var e;return null===(e=this.likePhoto.data.visionProfileLikePhotoList)||void 0===e?void 0:e.pcursor}},{key:"feedVideoList",get:function(){var e,t;return(null===(e=this.likePhoto.data.visionProfileLikePhotoList)||void 0===e||null===(t=e.feeds)||void 0===t?void 0:t.map((function(e){var t;return Object(u["p"])(e,{videoPhotoCaption:Object(s["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})})))||[]}},{key:"feedVideoListLength",get:function(){return this.feedVideoList.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.likePhoto.data.visionProfileLikePhotoList)||void 0===e?void 0:e.llsid}},{key:"hasNoLikedPhoto",get:function(){return 0===this.feedVideoListLength&&("no_more"===this.pcursor||null===this.pcursor)}}]),n}(a["a"]);Object(r["c"])([Object(a["d"])({query:i()(f(),l["a"]),variables:function(e){return{pcursor:e.name===c["a"].ShortVideo&&e.query.currentPcursor||"",page:Object(u["d"])(e.name),webPageArea:e.query.area}},skip:function(e){return e.name===c["a"].ShortVideo&&!this.canFetch||e.name!==c["a"].ShortVideo&&this.isGuest}})],A.prototype,"likePhoto",void 0)},"57a5":function(e,t,n){var r=n("91e9"),o=r(Object.keys,Object);e.exports=o},"585a":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("7d15"))},"5acf":function(e,t,n){"use strict";var r=n("ac8c"),o=n.n(r);o.a},"5d3a":function(e,t,n){},"5e2e":function(e,t,n){var r=n("28c9"),o=n("69d5"),i=n("b4c0"),a=n("fba5"),u=n("67ca");function c(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype["delete"]=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=u,e.exports=c},"5e8c":function(e,t,n){},6044:function(e,t,n){var r=n("0b07"),o=r(Object,"create");e.exports=o},"642a":function(e,t,n){var r=n("966f"),o=n("3bb4"),i=n("20ec");function a(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}e.exports=a},"656b":function(e,t,n){var r=n("e2e4"),o=n("f4d6");function i(e,t){t=r(t,e);var n=0,i=t.length;while(null!=e&&n<i)e=e[o(t[n++])];return n&&n==i?e:void 0}e.exports=i},6747:function(e,t){var n=Array.isArray;e.exports=n},"67c9":function(e,t,n){"use strict";var r=n("5e8c"),o=n.n(r);o.a},"67ca":function(e,t,n){var r=n("cb5a");function o(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}e.exports=o},"69d5":function(e,t,n){var r=n("cb5a"),o=Array.prototype,i=o.splice;function a(e){var t=this.__data__,n=r(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():i.call(t,n,1),--this.size,!0}e.exports=a},"6ade":function(e,t,n){e.exports=n.p+"img/defaultAvatar.57e332d9.svg"},"6c5a":function(e,t,n){},"6fb0":function(e,t,n){},"6fcd":function(e,t,n){var r=n("50d8"),o=n("d370"),i=n("6747"),a=n("0d24"),u=n("c098"),c=n("73ac"),s=Object.prototype,l=s.hasOwnProperty;function f(e,t){var n=i(e),s=!n&&o(e),f=!n&&!s&&a(e),d=!n&&!s&&!f&&c(e),p=n||s||f||d,v=p?r(e.length,String):[],h=v.length;for(var m in e)!t&&!l.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,h))||v.push(m);return v}e.exports=f},"72af":function(e,t,n){var r=n("99cd"),o=r();e.exports=o},"73ac":function(e,t,n){var r=n("743f"),o=n("b047"),i=n("99d3"),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},"73d1":function(e,t,n){},"743f":function(e,t,n){var r=n("3729"),o=n("b218"),i=n("1310"),a="[object Arguments]",u="[object Array]",c="[object Boolean]",s="[object Date]",l="[object Error]",f="[object Function]",d="[object Map]",p="[object Number]",v="[object Object]",h="[object RegExp]",m="[object Set]",b="[object String]",y="[object WeakMap]",g="[object ArrayBuffer]",O="[object DataView]",w="[object Float32Array]",j="[object Float64Array]",k="[object Int8Array]",I="[object Int16Array]",C="[object Int32Array]",P="[object Uint8Array]",S="[object Uint8ClampedArray]",_="[object Uint16Array]",x="[object Uint32Array]",T={};function L(e){return i(e)&&o(e.length)&&!!T[r(e)]}T[w]=T[j]=T[k]=T[I]=T[C]=T[P]=T[S]=T[_]=T[x]=!0,T[a]=T[u]=T[g]=T[c]=T[O]=T[s]=T[l]=T[f]=T[d]=T[p]=T[v]=T[h]=T[m]=T[b]=T[y]=!1,e.exports=L},"75fd":function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n("0f9e"),o=n("d2ae"),i=n("9530"),a=n.n(i),u=n("4bda"),c=n("b74e"),s=n("90cd"),l=n("afbc");function f(){var e=d(["\n            ","\n            query brilliantDataQuery(\n                $pcursor: String,\n                $semKeyword: String,\n                $semCrowd: String,\n                $utmSource: String,\n                $utmMedium: String,\n                $page: String,\n                $photoId: String,\n                $utmCampaign: String,\n                $webPageArea: String) {\n                brilliantData(\n                    pcursor: $pcursor,\n                    semKeyword: $semKeyword,\n                    semCrowd: $semCrowd,\n                    utmSource: $utmSource,\n                    utmMedium: $utmMedium,\n                    page: $page,\n                    photoId: $photoId,\n                    utmCampaign: $utmCampaign,\n                    webPageArea: $webPageArea) {\n                    ...photoResult\n                }\n            }\n        "]);return f=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){return y(e)||b(e)||m(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function b(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function y(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function _(e){var t=L();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var A=function(e){P(n,e);var t=_(n);function n(){var e;return k(this,n),e=t.apply(this,arguments),e.canFetch=!1,e}return C(n,[{key:"fetchMoreData",value:function(){!this.brilliant.loading&&"no_more"!==this.pcursor&&this.pcursor&&this.brilliant.fetchMore({variables:{pcursor:this.pcursor},updateQuery:function(e,t){var n,r;return{brilliantData:w(w({},(null===t||void 0===t?void 0:t.brilliantData)||{}),{},{feeds:[].concat(v((null===e||void 0===e||null===(n=e.brilliantData)||void 0===n?void 0:n.feeds)||[]),v((null===t||void 0===t||null===(r=t.brilliantData)||void 0===r?void 0:r.feeds)||[]))})}}})}},{key:"brilliantList",get:function(){var e=this.brilliant.data.brilliantData;return((null===e||void 0===e?void 0:e.feeds)||[]).map((function(e){var t;return Object(c["p"])(e,{videoPhotoCaption:Object(s["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})}))}},{key:"area",get:function(){var e;return null===(e=this.brilliant.data.brilliantData)||void 0===e?void 0:e.webPageArea}},{key:"pcursor",get:function(){var e;return null===(e=this.brilliant.data.brilliantData)||void 0===e?void 0:e.pcursor}},{key:"noMore",get:function(){var e;return"no_more"===(null===(e=this.brilliant.data.brilliantData)||void 0===e?void 0:e.pcursor)}},{key:"feedVideoList",get:function(){return this.brilliantList}},{key:"feedVideoListLength",get:function(){return this.brilliantList.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.brilliant.data.brilliantData)||void 0===e?void 0:e.llsid}}]),n}(o["a"]);Object(r["c"])([Object(o["d"])({query:a()(f(),u["a"]),variables:function(e){return{semKeyword:e.query.keyword||"",semCrowd:e.query.renqun_youhua||"",utmSource:e.query.utm_source||"",utmMedium:e.query.utm_medium||"",page:Object(c["d"])(e.name),webPageArea:e.query.area,photoId:e.params.photoId||"",utmCampaign:e.query.utm_campaign}},fetchPolicy:"cache-and-network",skip:function(e){return e.name===l["a"].ShortVideo&&!this.canFetch}})],A.prototype,"brilliant",void 0)},"76dd":function(e,t,n){var r=n("ce86");function o(e){return null==e?"":r(e)}e.exports=o},"76e9":function(e,t,n){var r=self.crypto||self.msCrypto,o="-_",i=36;while(i--)o+=i.toString(36);i=36;while(i---10)o+=i.toString(36).toUpperCase();e.exports=function(e){var t="",n=r.getRandomValues(new Uint8Array(e||21));i=e||21;while(i--)t+=o[63&n[i]];return t}},7948:function(e,t){function n(e,t){var n=-1,r=null==e?0:e.length,o=Array(r);while(++n<r)o[n]=t(e[n],n,e);return o}e.exports=n},"79bc":function(e,t,n){var r=n("0b07"),o=n("2b3e"),i=r(o,"Map");e.exports=i},"7a48":function(e,t,n){var r=n("6044"),o=Object.prototype,i=o.hasOwnProperty;function a(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}e.exports=a},"7ac2":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{width:e.width,height:e.height,viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M40 40l8.201-8.201c4.53-4.53 11.873-4.53 16.402 0A11.598 11.598 0 0 1 68 40c0 6.405-5.193 11.598-11.598 11.598a11.598 11.598 0 0 1-8.201-3.397L40 40l-8.201-8.201c-4.53-4.53-11.873-4.53-16.402 0A11.598 11.598 0 0 0 12 40c0 6.405 5.193 11.598 11.598 11.598 3.076 0 6.026-1.222 8.201-3.397L40 40z","stroke-dasharray":"160","stroke-linecap":"round",stroke:e.color,"stroke-width":"7",fill:"none","fill-rule":"evenodd"}},[n("animate",{attrs:{id:"b",attributeName:"stroke-dashoffset",begin:"0s;a.end",dur:"500ms",from:"0",to:"155",calcMode:"linear"}}),n("animate",{attrs:{id:"a",attributeName:"stroke-dashoffset",begin:"b.end",dur:"500ms",from:"165",to:"320",calcMode:"linear"}})])])},o=[],i=n("48d1"),a=Object(i["c"])({props:{width:[Number,String],height:[Number,String],color:{type:String,default:"#FE3666"}}}),u=a,c=n("d802"),s=Object(c["a"])(u,r,o,!1,null,null,null);t["a"]=s.exports},"7b83":function(e,t,n){var r=n("7c64"),o=n("93ed"),i=n("2478"),a=n("a524"),u=n("1fc8");function c(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype["delete"]=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=u,e.exports=c},"7b97":function(e,t,n){var r=n("7e64"),o=n("a2be"),i=n("1c3c"),a=n("b1e5"),u=n("42a2"),c=n("6747"),s=n("0d24"),l=n("73ac"),f=1,d="[object Arguments]",p="[object Array]",v="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function b(e,t,n,h,b,y){var g=c(e),O=c(t),w=g?p:u(e),j=O?p:u(t);w=w==d?v:w,j=j==d?v:j;var k=w==v,I=j==v,C=w==j;if(C&&s(e)){if(!s(t))return!1;g=!0,k=!1}if(C&&!k)return y||(y=new r),g||l(e)?o(e,t,n,h,b,y):i(e,t,w,n,h,b,y);if(!(n&f)){var P=k&&m.call(e,"__wrapped__"),S=I&&m.call(t,"__wrapped__");if(P||S){var _=P?e.value():e,x=S?t.value():t;return y||(y=new r),b(_,x,n,h,y)}}return!!C&&(y||(y=new r),a(e,t,n,h,b,y))}e.exports=b},"7bde":function(e,t,n){},"7be8":function(e,t,n){},"7c64":function(e,t,n){var r=n("e24b"),o=n("5e2e"),i=n("79bc");function a(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}e.exports=a},"7d1f":function(e,t,n){var r=n("087d"),o=n("6747");function i(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}e.exports=i},"7e64":function(e,t,n){var r=n("5e2e"),o=n("efb6"),i=n("2fcc"),a=n("802a"),u=n("55a3"),c=n("d02c");function s(e){var t=this.__data__=new r(e);this.size=t.size}s.prototype.clear=o,s.prototype["delete"]=i,s.prototype.get=a,s.prototype.has=u,s.prototype.set=c,e.exports=s},"7ea0":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"follow-button",class:{follow:e.follow},on:{click:e.followClick}},[e.follow?e._e():n("div",{staticClass:"follow-button-icon"}),e._v(" "+e._s(e.displayText)+" ")])},o=[],i=n("4795"),a=n.n(i),u=n("48d1"),c=n("d2ae"),s=n("95bc"),l=n("b74e"),f=n("77a5"),d=n("a7bc"),p=n("71b0"),v=n("557f"),h=n("1675");function m(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,u,"next",e)}function u(e){m(i,r,o,a,u,"throw",e)}a(void 0)}))}}var y=Object(u["c"])({props:{follow:Boolean,userId:String,noLog:Boolean,expTag:String,from:String,logType:String},setup:function(e,t){var n=Object(u["a"])((function(){return e.follow?"已关注":"关注"})),r=Object(c["f"])(s["a"]),o=Object(c["f"])(f["a"]),i=Object(c["f"])(v["a"]),m=Object(l["l"])(),y=Object(d["e"])();function g(){return O.apply(this,arguments)}function O(){return O=b(a.a.mark((function n(){return a.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null===o||void 0===o?void 0:o.userInfo.id){n.next=4;break}m("login",{source:e.from||p["b"].FOLLOW,success:function(){var n=b(a.a.mark((function n(r){return a.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.emit("follow-login",{info:r}),n.next=3,i.getUserInfo(e.userId);case 3:i.userInfo.isFollowing||g();case 4:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}()}),n.next=11;break;case 4:if(!e.userId){n.next=11;break}if(e.userId!==(null===o||void 0===o?void 0:o.userInfo.id)){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,r.follow(e.userId,e.follow,e.expTag);case 9:1===r.result&&(e.noLog||y({event_name:"USER_FOLLOW_BUTTON",logType:e.logType||null,event_value:{follow_type:e.follow?"DISFOLLOW":"FOLLOW"}}),e.follow?t.emit("follow-change",!1):1===r.followStatus&&t.emit("follow-change",!0)),1!==r.result&&r.errMsg&&Object(h["a"])(r.errMsg);case 11:case"end":return n.stop()}}),n)}))),O.apply(this,arguments)}return{isFollow:e.follow,displayText:n,followClick:g}}}),g=y,O=(n("b2c7"),n("d802")),w=Object(O["a"])(g,r,o,!1,null,"68cd9209",null);t["a"]=w.exports},"7ed2":function(e,t){var n="__lodash_hash_undefined__";function r(e){return this.__data__.set(e,n),this}e.exports=r},"7ff1":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("48d1");function o(e,t){var o=Object(r["q"])(null),i=Object(r["q"])();return Object(r["l"])((function(){if(navigator.clipboard)i.value=function(){navigator.clipboard.writeText(t.value)};else{var r=n("b311");o.value=new r(e,{text:function(){return t.value}})}})),Object(r["j"])((function(){var e;null===(e=o.value)||void 0===e||e.destroy()})),{clipboard:o,mainCopyMethod:i}}},"7ffc":function(e,t,n){"use strict";var r=n("4c17"),o=n.n(r);o.a},"802a":function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},"813e":function(e,t,n){},"84c6":function(e,t,n){"use strict";var r=n("73d1"),o=n.n(r);o.a},8604:function(e,t,n){var r=n("26e8"),o=n("e2c0");function i(e,t){return null!=e&&o(e,t,r)}e.exports=i},"872a":function(e,t,n){var r=n("3b4a");function o(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}e.exports=o},"88bc":function(e,t,n){"use strict";var r=n("7be8"),o=n.n(r);o.a},"8cec":function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n("0f9e"),o=n("d2ae"),i=n("9530"),a=n.n(i),u=n("4bda"),c=n("b74e"),s=n("90cd"),l=n("afbc");function f(){var e=d(["\n            ","\n            query brilliantTypeDataQuery($pcursor: String, $hotChannelId: String $page: String, $webPageArea: String) {\n                brilliantTypeData(pcursor: $pcursor, hotChannelId: $hotChannelId page: $page, webPageArea: $webPageArea) {\n                    ...photoResult\n                }\n            }\n        "]);return f=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){return y(e)||b(e)||m(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function b(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function y(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function _(e){var t=L();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var A=function(e){P(n,e);var t=_(n);function n(){var e;return k(this,n),e=t.apply(this,arguments),e.hotChannelId="",e.allBrilliantData={"00":[]},e.canFetch=!1,e}return C(n,[{key:"fetchMoreData",value:function(){var e=this;this.brilliant.loading||"no_more"===this.pcursor||this.brilliant.fetchMore({variables:{pcursor:this.pcursor},updateQuery:function(t,n){var r,o,i,a=e.allBrilliantData[e.hotChannelId];a&&a.length&&(t={brilliantTypeData:a});var u={brilliantTypeData:w(w({},(null===n||void 0===n?void 0:n.brilliantTypeData)||{}),{},{feeds:[].concat(v((null===(r=t)||void 0===r||null===(o=r.brilliantTypeData)||void 0===o?void 0:o.feeds)||[]),v((null===n||void 0===n||null===(i=n.brilliantTypeData)||void 0===i?void 0:i.feeds)||[]))})};return u}})}},{key:"getCurrentTheaterList",value:function(e){return this.brilliantList&&this.brilliantList.map((function(e){return Object(c["p"])(e,{poster:null===e||void 0===e?void 0:e.coverUrl})}))||[]}},{key:"area",get:function(){var e;return null===(e=this.brilliant.data.brilliantTypeData)||void 0===e?void 0:e.webPageArea}},{key:"brilliantList",get:function(){var e,t,n=this.hotChannelId;return this.allBrilliantData[n]&&(null===(e=this.allBrilliantData[n])||void 0===e||null===(t=e.feeds)||void 0===t?void 0:t.map((function(e){var t;return Object(c["p"])(e,{videoPhotoCaption:Object(s["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})})))||[]}},{key:"pcursor",get:function(){var e;return null===(e=this.brilliant.data.brilliantTypeData)||void 0===e?void 0:e.pcursor}},{key:"noMore",get:function(){var e;return"no_more"===(null===(e=this.brilliant.data.brilliantTypeData)||void 0===e?void 0:e.pcursor)}},{key:"feedVideoList",get:function(){return this.brilliantList}},{key:"feedVideoListLength",get:function(){return this.brilliantList.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.brilliant.data.brilliantTypeData)||void 0===e?void 0:e.llsid}}]),n}(o["a"]);Object(r["c"])([Object(o["d"])({query:a()(f(),u["a"]),variables:function(e){var t=e.name===l["a"].ShortVideo&&e.query.hotChannelId&&this.hotChannelId,n=t&&e.query.hotChannelId||this.hotChannelId;return{hotChannelId:n,page:Object(c["d"])(e.name),webPageArea:e.query.area}},fetchPolicy:"cache-first",skip:function(e){return e.name===l["a"].ShortVideo&&!this.canFetch||!this.hotChannelId}})],A.prototype,"brilliant",void 0)},"91e9":function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},"93c8":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("48d1");function r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;t.value=!0,e.value=n,setTimeout((function(){t.value=!1,e.value=""}),r)}},"93ed":function(e,t,n){var r=n("4245");function o(e){var t=r(this,e)["delete"](e);return this.size-=t?1:0,t}e.exports=o},"950a":function(e,t,n){var r=n("30c9");function o(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);var i=n.length,a=t?i:-1,u=Object(n);while(t?a--:++a<i)if(!1===o(u[a],a,u))break;return n}}e.exports=o},9520:function(e,t,n){var r=n("3729"),o=n("1a8c"),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";function s(e){if(!o(e))return!1;var t=r(e);return t==a||t==u||t==i||t==c}e.exports=s},9638:function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},"966f":function(e,t,n){var r=n("7e64"),o=n("c05f"),i=1,a=2;function u(e,t,n,u){var c=n.length,s=c,l=!u;if(null==e)return!s;e=Object(e);while(c--){var f=n[c];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}while(++c<s){f=n[c];var d=f[0],p=e[d],v=f[1];if(l&&f[2]){if(void 0===p&&!(d in e))return!1}else{var h=new r;if(u)var m=u(p,v,d,e,t,h);if(!(void 0===m?o(v,p,i|a,u,h):m))return!1}}return!0}e.exports=u},"97c5":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-container",class:e.isDark?"dark-mode":""},[e.showCount?n("div",{staticClass:"comment-header"},[e._v(" "+e._s(e.comment.commentCount)+"条评论 ")]):e._e(),n("CommentInput",{ref:"input",staticClass:"comment-input",attrs:{"max-length":500,placeholder:e.inputPlaceholder,disabled:1===e.canAddComment,"is-reply":!1,"is-dark":e.isDark},on:{submit:e.sendComment},model:{value:e.comment.commentEditState.commentContent,callback:function(t){e.$set(e.comment.commentEditState,"commentContent",t)},expression:"comment.commentEditState.commentContent"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.comment.commentListQuery.loading&&0===e.comment.commentList.length,expression:"!comment.commentListQuery.loading && comment.commentList.length === 0"}],staticClass:"no-comment-tip"},[e._v(" 还没有评论~ ")]),e.comment.commentList.length>0?n("div",e._l(e.comment.commentList,(function(t){return n("comment-item",{key:t.commentId,staticClass:"comment-list-item",attrs:{comment:t,"current-work":e.currentWork,"current-author":e.currentAuthor,"can-add-comment":e.canAddComment,"input-placeholder":e.inputPlaceholder,"is-dark":e.isDark,"log-type":e.logType},on:{"block-comment":function(t){return e.$emit("block-comment")}}})})),1):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.comment.commentList.length||e.comment.commentListQuery.loading,expression:"comment.commentList.length !== 0 || comment.commentListQuery.loading"}],ref:"spinning",staticClass:"spinning"},[e.noMore?e._e():n("Loading",{attrs:{width:25,height:25}}),e.noMore?n("div",{staticClass:"text"},[e._v(" 已经到底了，没有更多评论了 ")]):e._e()],1)],1)},o=[],i=n("4795"),a=n.n(i),u=n("48d1"),c=n("d2ae"),s=n("77a5"),l=n("b74e"),f=n("af90"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"comment-item",class:e.isDark?"dark-mode":""},[r("div",{staticClass:"comment-item-portrait-con",on:{click:function(t){return e.useJumpToProfile(e.comment.authorId)}}},[r("img",{staticClass:"comment-item-portrait",attrs:{src:e.comment.headurl},on:{error:function(t){e.comment.headurl=n("6ade")}}})]),r("div",{staticClass:"comment-item-body"},[r("div",{staticClass:"comment-item-author"},[r("div",{staticClass:"router-link",on:{click:function(t){return e.useJumpToProfile(e.comment.authorId)}}},[r("span",{staticClass:"author-name"},[e._v(e._s(e._f("filterXss")(e._f("transEmoji")(e.comment.authorName))))]),e.comment.status===e.model.comment.status.success||e.comment.status===e.model.comment.status.done?r("span",{staticClass:"comment-item-time"},[e._v(" "+e._s(e.elapseTime)+" ")]):e._e()])]),r("div",{staticClass:"comment-item-content"},[r("CommentContent",{attrs:{content:e.comment.content,"is-dark":e.isDark,"is-login":e.isLogin}})],1),r("SettingEntry",{attrs:{"is-login":e.isLogin,"report-options":{page:e.currentPage,reportType:8,targetId:e.comment.commentId,reportedUserId:e.comment.authorId,extraPhotoId:e.currentWork.id}}})],1),e.comment&&e.comment.subComments&&e.comment.subComments.length?r("div",{staticClass:"sub-comment-wrap"},[e._l(e.bufCountList,(function(t){return r("SubItem",{key:t.content+t.timestamp,staticClass:"sub-comment-item",attrs:{comment:e.comment,"sub-comment":t,"current-work":e.currentWork,"current-author":e.currentAuthor,"can-add-comment":e.canAddComment,"input-placeholder":e.inputPlaceholder,"is-dark":e.isDark,head:!1,"log-type":e.logType},on:{"block-comment":function(t){return e.$emit("block-comment")}}})})),e._l(e.curCommentList,(function(t){return r("SubItem",{key:t.content+t.timestamp,staticClass:"sub-comment-item",attrs:{comment:e.comment,"sub-comment":t,"current-work":e.currentWork,"current-author":e.currentAuthor,"can-add-comment":e.canAddComment,"input-placeholder":e.inputPlaceholder,"is-dark":e.isDark,head:!1,"log-type":e.logType},on:{"block-comment":function(t){return e.$emit("block-comment")}}})})),e.curCommentLength?r("span",{staticClass:"more-sub"},[0===e.subCommentCurrentPage?r("span",{staticClass:"more-sub-expand",on:{click:e.loadMoreSubComments}},[e._v(" "+e._s("查看更多回复("+e.curCommentLength+")")+" ")]):r("span",{staticClass:"more-sub-collapse",on:{click:function(t){e.subCommentCurrentPage=0}}},[e._v(" 收起回复 ")])]):e._e(),e.allSubCommentShowed||0===e.subCommentCurrentPage?e._e():r("div",{staticClass:"more",on:{click:e.loadMoreSubComments}},[e._v(" 继续查看更多 ")])],2):e._e(),r("Operation",{ref:"reopt",staticClass:"sub-comment-opt",attrs:{comment:e.comment,"current-work":e.currentWork,"current-author":e.currentAuthor,"is-dark":e.isDark,"is-current":e.showReplyInput}}),r("CommentInput",{directives:[{name:"show",rawName:"v-show",value:e.showReplyInput,expression:"showReplyInput"}],staticClass:"comment-item-reply-input",attrs:{"is-reply":!0,"input-placeholder":e.inputPlaceholder,"max-length":500,disabled:1===e.canAddComment,"is-dark":e.isDark},on:{submit:e.sendComment},model:{value:e.model.replyCommentEditState.commentContent,callback:function(t){e.$set(e.model.replyCommentEditState,"commentContent",t)},expression:"model.replyCommentEditState.commentContent"}})],1)},p=[],v=n("ff22"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-input",class:{login:e.isLogin,reply:e.isReply,drak:e.isDark}},[e.head?n("router-link",{directives:[{name:"show",rawName:"v-show",value:e.isLogin,expression:"isLogin"}],staticClass:"comment-profile",attrs:{to:"/profile/"+e.user.userInfo.eid,target:"_blank"}},[n("Avatar",{staticClass:"comment-avatar",attrs:{avatar:e.user.userInfo.avatar}})],1):e._e(),n("div",{staticClass:"input-container",class:{"is-active":e.isActive}},[n("pl-textarea",{ref:"input",staticClass:"textarea",class:{"has-text":e.value},attrs:{value:e.value,disabled:e.disabled,maxlength:e.maxLength,placeholder:e.placeholder},on:{input:e.handleInput},nativeOn:{focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleSubmitComment("fromEnter"))}}}),n("div",{staticClass:"cancel",on:{click:e.handleCancel}},[e._v(" 取消 ")]),n("button",{staticClass:"submit-button",class:{valid:e.commentLengthLeft>=0},attrs:{type:"button",disabled:e.disableSubmit},on:{click:e.handleSubmitComment}},[n("span",[e._v("发送")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.commentLengthLeft,expression:"commentLengthLeft === 0"}],staticClass:"max-length-tip"},[e._v(" 已超过最大字数限制 ")])],1)],1)},m=[],b=(n("ffff"),n("4e9a")),y=n("fd5a"),g=Object(u["c"])({components:{plTextarea:b["a"],Avatar:y["a"]},props:{isReply:{type:Boolean},placeholder:{type:String,default:""},disabled:{type:Boolean},maxLength:{type:Number,default:40},isDark:{type:Boolean},value:String,head:{type:Boolean,default:!0}},model:{prop:"value",event:"input"},setup:function(e,t){var n=Object(c["f"])(s["a"]),r=Object(c["f"])(f["a"]),o=Object(u["a"])((function(){return!!n.userInfo.id})),i=Object(u["q"])(!1),a=Object(u["q"])(!0),d=Object(u["q"])(!1),p=Object(u["q"])(e.maxLength),v=Object(l["l"])();function h(e){a.value||t.emit("submit")}function m(){e.isReply&&(r.replyInputId="",v("cancel-reply",{})),t.emit("input","")}function b(e){t.emit("input",e)}return Object(u["t"])((function(){return e.value}),(function(t){var n=t.length;d.value=!(!n&&!i),p.value=e.maxLength-n,a.value=!n})),Object(u["t"])(i,(function(e){v("input-focus",e)})),Object(u["t"])((function(){return e.value}),(function(e){v("input-text",e)})),Object(l["k"])("clean-input",(function(){m()})),{user:n,isLogin:o,focused:i,isActive:d,commentLengthLeft:p,disableSubmit:a,handleSubmitComment:h,handleCancel:m,handleInput:b}}}),O=g,w=(n("267f"),n("d802")),j=Object(w["a"])(O,h,m,!1,null,"6f88ec34",null),k=j.exports,I=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{staticClass:"more-operation",class:t.isDark?"dark-mode":""},[t.status===t.model.comment.status.done?r("div",{staticClass:"comment-item-operation"},[r("span",{staticClass:"comment-item-likeicon",class:{liked:t.liked},domProps:{innerHTML:t._s(t.likeIcon)},on:{click:t.favourComment}}),r("span",{staticClass:"comment-item-operation-op likeop",class:{liked:t.liked},on:{click:t.favourComment}},[t._v(" "+t._s(t.likedCount)+" ")]),r("span",{staticClass:"comment-item-replyicon",class:{replyed:t.replyed&&t.isCurrent},domProps:{innerHTML:t._s(t.replyIcon)},on:{click:t.reply}}),r("span",{staticClass:"comment-item-operation-op replyop",class:{replyed:t.replyed&&t.isCurrent},on:{click:t.reply}},[t._v(" 回复 ")]),t._v(" "),t._t("more-comment")],2):r("div",{staticClass:"comment-item-status"},[r("span",{staticClass:"comment-item-icon",class:(e={},e[t.status]=t.status,e)}),t._v(" "),r("span",[t._v(t._s(t.statusInfo))]),t.status===t.model.comment.status.fail?r("span",{staticClass:"comment-item-status-retry",on:{click:t.retry}},[t._v(" 重新发送 ")]):t._e()])])},C=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-more"},e._l(3,(function(e){return n("span",{key:e,staticClass:"comment-more-circle"})})),0)},S=[],_=(n("f0d3"),{}),x=Object(w["a"])(_,P,S,!1,null,"4f356fa1",null),T=x.exports,L=n("71b0"),E=n("a7bc");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){$(i,r,o,a,u,"next",e)}function u(e){$(i,r,o,a,u,"throw",e)}a(void 0)}))}}var q=Object(u["c"])({components:{operationHoverIcon:T},props:{comment:{type:Object,required:!0},currentWork:{type:Object,required:!0},currentAuthor:{type:Object,required:!0},isDark:{type:Boolean},isCurrent:{type:Boolean}},setup:function(e,t){t.emit;var n=Object(E["e"])(),r=Object(u["a"])((function(){return e.comment.status})),o="",i="",d=Object(c["f"])(f["a"]),p=Object(c["f"])(s["a"]),v=Object(u["p"])({liked:!1,likedCount:0,replyed:!1});Object(u["t"])((function(){return e.comment}),(function(){v.liked=e.comment.liked,v.likedCount=e.comment.likedCount}),{immediate:!0});var h=Object(u["a"])((function(){return r.value===d.comment.status.sending?"正在发送评论...":r.value===d.comment.status.fail?"评论发送失败，点击":r.value===d.comment.status.success?"评论发送成功":""})),m=Object(l["l"])();function b(e){return!!p.userInfo.id||(m("login",{source:e}),!1)}function y(){if(b(L["b"].REPLY_COMMENT)){if(v.replyed=!v.replyed,v.replyed)return d.replyInputId=e.comment.commentId,void d.handleReply(e.comment.commentId,e.comment.authorId,e.comment.authorName);d.replyInputId=""}}function g(){v.replyed=!1}function O(){return w.apply(this,arguments)}function w(){return w=M(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(b(L["b"].COMMENT)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,d.sendComment({photoId:e.currentWork.id,photoAuthorId:e.currentAuthor.id,content:e.comment.content,replyToCommentId:e.comment.replyToCommentId||"0",expTag:e.currentWork.expTag,replyTo:e.comment.replyTo},e.comment.commentId);case 4:e.comment.status=d.comment.status.sending;case 5:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function j(){return k.apply(this,arguments)}function k(){return k=M(a.a.mark((function t(){var r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(b(L["b"].COMMENT_LIKE)){t.next=2;break}return t.abrupt("return");case 2:return n({type:"CLICK",event_name:"LIKE_COMMENT_BUTTON",event_value:{like_type:v.liked?"DISLIKE":"LIKE"}}),t.next=5,d.likeComment({photoId:e.currentWork.id,commentId:e.comment.commentId,cancel:v.liked?1:0,expTag:e.currentWork.expTag});case 5:r=d.likeCommentResult,1===r&&(isNaN(v.likedCount)||(v.liked?v.likedCount--:v.likedCount++),v.liked=!v.liked);case 7:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}return Object(l["k"])("cancel-reply",(function(e){v.replyed=!1})),D(D({model:d,user:p},Object(u["s"])(v)),{},{statusInfo:h,replyIcon:o,likeIcon:i,status:r,reply:y,retry:O,favourComment:j,restoreState:g})}}),V=q,U=(n("d8df"),Object(w["a"])(V,I,C,!1,null,"51d76cad",null)),N=U.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-sub-item",class:e.isDark?"dark-mode":""},[e.head?n("div",{staticClass:"comment-sub-item-portrait-con",on:{click:function(t){return e.useJumpToProfile(e.subComment.authorId)}}},[n("Avatar",{staticClass:"comment-sub-item-portrait",attrs:{avatar:e.subComment.headurl}})],1):e._e(),n("div",{staticClass:"comment-sub-item-body"},[n("div",{staticClass:"comment-sub-item-author inline"},[n("div",{staticClass:"router-link replyer",on:{click:function(t){return e.useJumpToProfile(e.subComment.authorId)}}},[n("span",{staticClass:"reply-name"},[e._v(e._s(e.subComment.authorName))])]),e.comment.authorId!==e.subComment.replyTo?n("span",{staticClass:"comment-sub-item-reply"},[e._v(" 回复 ")]):e._e(),e.comment.authorId!==e.subComment.replyTo?n("div",{staticClass:"router-link",on:{click:function(t){return e.useJumpToProfile(e.subComment.replyTo)}}},[n("span",{staticClass:"reply-name"},[e._v(e._s(e.subComment.replyToUserName))])]):n("span",{staticClass:"comment-sub-item-reply"},[e._v("：")])]),n("div",{staticClass:"comment-sub-item-content inline"},[n("div",{staticClass:"comment-item-warp inline"},[n("CommentContent",{staticClass:"comment-item-content inline",attrs:{content:e.subComment.content,"max-length":500,"is-dark":e.isDark}})],1)]),e.subComment.status===e.model.comment.status.success||e.subComment.status===e.model.comment.status.done?n("span",{staticClass:"comment-sub-item-time"},[e._v(" "+e._s(e.elapseTime)+" ")]):e._e(),n("CommentOperation",{ref:"reopt",staticClass:"comment-operation",attrs:{comment:e.subComment,"current-work":e.currentWork,"current-author":e.currentAuthor,"is-current":e.showReplyInput}}),n("SettingEntry",{attrs:{"is-login":e.isLogin,"report-options":{page:e.currentPage,reportType:8,targetId:e.subComment.commentId,reportedUserId:e.subComment.authorId,extraPhotoId:e.currentWork.id}}})],1),e.showReplyInput?n("CommentInput",{staticClass:"comment-sub-item-reply-input",attrs:{"current-work":e.currentWork,"current-author":e.currentAuthor,"can-add-comment":e.canAddComment,"input-placeholder":e.inputPlaceholder,"is-reply":!0,"is-dark":e.isDark,head:!1,"max-length":500},on:{submit:e.sendComment},model:{value:e.model.replyCommentEditState.commentContent,callback:function(t){e.$set(e.model.replyCommentEditState,"commentContent",t)},expression:"model.replyCommentEditState.commentContent"}}):e._e()],1)},B=[];function z(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){z(i,r,o,a,u,"next",e)}function u(e){z(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Q(e,t,n){return W.apply(this,arguments)}function W(){return W=H(a.a.mark((function e(t,n,r){var o,i,u,c,s,l;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r&&r(),o=n.photoId,i=n.photoAuthorId,u=n.isReplyInput,c=n.userInfo,s=n.replyToCommentId,l=n.expTag,e.next=4,t.addComment({photoId:o,photoAuthorId:i,content:u?t.sendReplyContent.trim():t.sendContent.trim(),replyToCommentId:s,expTag:l},c,u);case 4:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function K(e,t,n){Object(u["l"])((function(){Object(u["t"])(e,(function(){0!==e.value?1!==e.value?t.value=n.subComments.slice(0,10+20*e.value):t.value=n.subComments.slice(0,10):t.value=[]}))}))}function J(e){var t="/profile/".concat(e);window.open(t,"_blank")}var Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",e._l(e.contentAst,(function(t,r){return n("span",{key:r},["plainText"===t.type?[e._v(" "+e._s(t.value)+" ")]:e._e(),"emoticon"===t.type?[n("img",{staticClass:"emoji",style:e.emojiStyle,attrs:{src:t.url,alt:t.code}})]:e._e(),"at"===t.type?[n("a",{staticClass:"at-content",class:{dark:e.isDark},attrs:{href:t.value.userId?"/profile/"+t.value.userId:"javascript:void(0)",target:e.isLogin?"_blank":"_self"}},[e._v(e._s(t.value.content))])]:e._e()],2)})),0)},G=[],X=n("1cb9"),Z=Object(u["c"])({props:{content:{type:String,default:""},processors:{type:Array,default:function(){return[X["a"].EMOJI,X["a"].AT]}},emojiStyle:{type:Object,default:function(){return{}}},isDark:{type:Boolean},isLogin:{type:Boolean}},setup:function(e){var t=Object(c["f"])(f["a"]),n=Object(u["a"])((function(){var n=e.processors.map((function(e){return e===X["a"].EMOJI?e(t.emojiIconUrls):e}));return Object(X["b"])(e.content,n)}));return{contentAst:n}}}),ee=Z,te=(n("5acf"),Object(w["a"])(ee,Y,G,!1,null,"8d9754a2",null)),ne=te.exports,re=n("4511"),oe=n("2ef0");function ie(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ie(i,r,o,a,u,"next",e)}function u(e){ie(i,r,o,a,u,"throw",e)}a(void 0)}))}}var ue=Object(u["c"])({components:{Avatar:y["a"],CommentContent:ne,CommentOperation:N,CommentInput:k,SettingEntry:re["a"]},props:{comment:{type:Object,default:{}},subComment:{type:Object,required:!0},currentWork:{type:Object,required:!0},currentAuthor:{type:Object,required:!0},canAddComment:{type:Number},inputPlaceholder:{type:String},isDark:{type:Boolean},head:{type:Boolean,default:!0},logType:{type:String}},setup:function(e,t){var n=t.root,r=t.emit,o=Object(c["f"])(f["a"]),i=Object(c["f"])(s["a"]),d=Object(u["a"])((function(){return!!(null===i||void 0===i?void 0:i.userInfo.id)})),p=Object(u["a"])((function(){var e,t;return null===(e=n.$route)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.page})),h=Object(u["q"])(!1),m=Object(l["l"])(),b=Object(u["a"])((function(){return e.subComment.commentId===o.replyInputId})),y=Object(v["a"])({begin:new Date(e.subComment.timestamp),end:new Date(Math.max(e.subComment.timestamp,+new Date))}),g=Object(E["e"])(),O=Object(u["q"])(null),w=Object(oe["debounce"])(ae(a.a.mark((function t(){var n;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!h.value){t.next=2;break}return t.abrupt("return");case 2:return h.value=!0,t.next=5,Q(o,{photoId:e.currentWork.id,photoAuthorId:e.currentAuthor.id,isReplyInput:!0,replyToCommentId:e.subComment.commentId,userInfo:null===i||void 0===i?void 0:i.userInfo,expTag:e.currentWork.expTag},(function(){if(!(null===i||void 0===i?void 0:i.userInfo.id))return m("login",{source:L["b"].COMMENT});g({type:"CLICK",logType:e.logType||null,event_name:"POST_COMMENT_BUTTON"})}));case 5:o.isBlockedComment&&r("block-comment"),null===(n=O.value)||void 0===n||n.restoreState(),h.value=!1;case 8:case"end":return t.stop()}}),t)}))),300);return{model:o,showReplyInput:b,elapseTime:y,sendComment:w,broadcast:m,currentUserModel:i,useJumpToProfile:J,reopt:O,currentPage:p,isLogin:d}}}),ce=ue,se=(n("3768"),Object(w["a"])(ce,F,B,!1,null,"fec64468",null)),le=se.exports,fe=n("90cd");function de(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){de(i,r,o,a,u,"next",e)}function u(e){de(i,r,o,a,u,"throw",e)}a(void 0)}))}}var ve=Object(u["c"])({props:{comment:{type:Object,required:!0},bufCount:{type:Number,default:2},currentWork:{type:Object,required:!0},currentAuthor:{type:Object,required:!0},canAddComment:{type:Number},inputPlaceholder:{type:String},isDark:{type:Boolean},logType:{type:String}},components:{Operation:N,CommentInput:k,SubItem:le,CommentContent:ne,SettingEntry:re["a"]},filters:{transEmoji:l["j"],filterXss:fe["a"]},setup:function(e,t){var n,r,o=t.root,i=t.emit,d=Object(u["q"])(0),p=Object(u["q"])([]),h=Object(u["a"])((function(){var e,t;return null===(e=o.$route)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.page})),m=Object(u["q"])(null),b=Object(c["f"])(f["a"]),y=Object(c["f"])(s["a"]),g=Object(u["a"])((function(){var t;return(null===(t=e.comment)||void 0===t?void 0:t.commentId)===b.replyInputId})),O=Object(u["q"])(!1),w=Object(E["e"])(),j=Object(v["a"])({begin:new Date(null===(n=e.comment)||void 0===n?void 0:n.timestamp),end:new Date(Math.max(null===(r=e.comment)||void 0===r?void 0:r.timestamp,+new Date))}),k=Object(u["a"])((function(){var t;return(null===(t=e.comment)||void 0===t?void 0:t.subCommentsPcursor)&&"no_more"!==e.comment.subCommentsPcursor})),I=Object(u["a"])((function(){var t,n;return!k.value&&p.value.length===(null===(t=e.comment)||void 0===t||null===(n=t.subComments)||void 0===n?void 0:n.length)}));K(d,p,e.comment);var C=Object(u["a"])((function(){return p.value.slice(e.bufCount||0)}));function P(e,t){return e&&"number"===typeof e?t?Math.max(e,t.length):e||0:t&&t.length||0}var S=Object(u["a"])((function(){var t,n,r,o,i=(null===(t=e.comment)||void 0===t?void 0:t.subCommentCount)-e.bufCount,a=null!==(n=null===(r=e.comment)||void 0===r?void 0:r.subComments.slice(null!==(o=e.bufCount)&&void 0!==o?o:0))&&void 0!==n?n:[],u=P(i,a);return u>0?u:0})),_=Object(u["a"])((function(){var t,n;return 0===e.bufCount?[]:null===(t=e.comment)||void 0===t||null===(n=t.subComments)||void 0===n?void 0:n.slice(0,e.bufCount)})),x=Object(l["l"])();function T(){return A.apply(this,arguments)}function A(){return A=pe(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!k.value){t.next=3;break}return t.next=3,b.getSubCommentList({photoId:e.currentWork.id,rootCommentId:null!==(n=null===(r=e.comment)||void 0===r?void 0:r.commentId)&&void 0!==n?n:"",pcursor:null!==(o=null===(i=e.comment)||void 0===i?void 0:i.subCommentsPcursor)&&void 0!==o?o:""});case 3:d.value++;case 4:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function D(e){return x("login",{source:e})}var R=Object(oe["debounce"])(pe(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!O.value){t.next=2;break}return t.abrupt("return");case 2:return O.value=!0,t.next=5,Q(b,{photoId:e.currentWork.id,photoAuthorId:e.currentAuthor.id,isReplyInput:!0,replyToCommentId:null===(n=e.comment)||void 0===n?void 0:n.commentId,userInfo:null===y||void 0===y?void 0:y.userInfo,expTag:e.currentWork.expTag},(function(){if(!(null===y||void 0===y?void 0:y.userInfo.id))return D(L["b"].COMMENT);w({type:"CLICK",logType:e.logType||null,event_name:"POST_COMMENT_BUTTON"})}));case 5:b.isBlockedComment&&i("block-comment"),null===(r=m.value)||void 0===r||r.restoreState(),O.value=!1;case 8:case"end":return t.stop()}}),t)}))),300),$=Object(u["a"])((function(){return!!(null===y||void 0===y?void 0:y.userInfo.id)}));return{subCommentCurrentPage:d,hasMoreSubComments:k,model:b,elapseTime:j,subCommentsList:p,showReplyInput:g,allSubCommentShowed:I,loadMoreSubComments:T,currentUserModel:y,sendComment:R,useJumpToProfile:J,broadcast:x,curCommentList:C,curCommentLength:S,bufCountList:_,reopt:m,isLogin:$,currentPage:h}}}),he=ve,me=(n("beaa"),Object(w["a"])(he,d,p,!1,null,"7ac0f7be",null)),be=me.exports,ye=n("7ac2");function ge(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ge(i,r,o,a,u,"next",e)}function u(e){ge(i,r,o,a,u,"throw",e)}a(void 0)}))}}var we=Object(u["c"])({components:{commentItem:be,CommentInput:k,Loading:ye["a"],Avatar:y["a"]},props:{inputPlaceholder:{type:String,default:"说点什么..."},currentWork:{type:Object,required:!0},currentAuthor:{type:Object,required:!0},canAddComment:{type:Number},isDark:{type:Boolean},showCount:{type:Boolean},logType:{type:String}},setup:function(e,t){var n=t.emit,r=Object(c["f"])(s["a"]),o=Object(c["f"])(f["a"]),i=Object(u["q"])(!1),d=Object(u["a"])((function(){return!!r.userInfo.id})),p=Object(u["a"])((function(){return"no_more"===o.pcursor}));Object(u["t"])((function(){return e.currentWork}),(function(e){e&&(o.photoId=e.id)}),{immediate:!0});var v=Object(l["l"])(),h=Object(E["e"])(),m=Object(oe["debounce"])(Oe(a.a.mark((function t(){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(d.value){t.next=2;break}return t.abrupt("return",v("login",{source:L["b"].COMMENT}));case 2:if(""!==o.sendContent.trim()&&!i.value){t.next=4;break}return t.abrupt("return");case 4:return i.value=!0,h({type:"CLICK",logType:e.logType||null,event_name:"POST_COMMENT_BUTTON"}),t.next=8,o.addComment({photoId:e.currentWork.id,photoAuthorId:e.currentAuthor.id,content:o.sendContent.trim(),expTag:e.currentWork.expTag},r.userInfo);case 8:o.isBlockedComment&&n("block-comment"),i.value=!1;case 10:case"end":return t.stop()}}),t)}))),300),b=Object(u["q"])(null);return Object(l["r"])({el:b,cb:function(t){t.intersectionRatio>0&&!p.value&&o.getCommentList({photoId:e.currentWork.id,append:!0})},options:{rootMargin:"0px 0px 349px 0px"}}),{user:r,comment:o,isLogin:d,sendComment:m,spinning:b,noMore:p}}}),je=we,ke=(n("c534"),Object(w["a"])(je,r,o,!1,null,"3eb61bca",null));t["a"]=ke.exports},"99cd":function(e,t){function n(e){return function(t,n,r){var o=-1,i=Object(t),a=r(t),u=a.length;while(u--){var c=a[e?u:++o];if(!1===n(i[c],c,i))break}return t}}e.exports=n},"99d3":function(e,t,n){(function(e){var r=n("585a"),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,u=a&&r.process,c=function(){try{var e=i&&i.require&&i.require("util").types;return e||u&&u.binding&&u.binding("util")}catch(t){}}();e.exports=c}).call(this,n("6984")(e))},"9b02":function(e,t,n){var r=n("656b");function o(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}e.exports=o},"9cbe":function(e,t,n){},"9e69":function(e,t,n){var r=n("2b3e"),o=r.Symbol;e.exports=o},a0c4:function(e,t){function n(e,t,n,r){var o=-1,i=null==e?0:e.length;while(++o<i){var a=e[o];t(r,a,n(a),e)}return r}e.exports=n},a2be:function(e,t,n){var r=n("d612"),o=n("42845"),i=n("c584"),a=1,u=2;function c(e,t,n,c,s,l){var f=n&a,d=e.length,p=t.length;if(d!=p&&!(f&&p>d))return!1;var v=l.get(e),h=l.get(t);if(v&&h)return v==t&&h==e;var m=-1,b=!0,y=n&u?new r:void 0;l.set(e,t),l.set(t,e);while(++m<d){var g=e[m],O=t[m];if(c)var w=f?c(O,g,m,t,e,l):c(g,O,m,e,t,l);if(void 0!==w){if(w)continue;b=!1;break}if(y){if(!o(t,(function(e,t){if(!i(y,t)&&(g===e||s(g,e,n,c,l)))return y.push(t)}))){b=!1;break}}else if(g!==O&&!s(g,O,n,c,l)){b=!1;break}}return l["delete"](e),l["delete"](t),b}e.exports=c},a307:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r="\n    commentId\n    authorId\n    authorName\n    content\n    headurl\n    timestamp\n    likedCount\n    realLikedCount\n    liked\n    status\n    authorLiked\n",o="\n    ".concat(r,"\n    replyToUserName\n    replyTo\n"),i="\n    ".concat(r,"\n    subCommentCount\n    subCommentsPcursor\n    subComments {\n        ").concat(o,"\n    }\n")},a524:function(e,t,n){var r=n("4245");function o(e){return r(this,e).has(e)}e.exports=o},a6b0:function(e,t,n){"use strict";t.decode=t.parse=n("aff2"),t.encode=t.stringify=n("cc76")},a994:function(e,t,n){var r=n("7d1f"),o=n("32f4"),i=n("ec69");function a(e){return r(e,i,o)}e.exports=a},ac41:function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}e.exports=n},ac8c:function(e,t,n){},af90:function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var r=n("4795"),o=n.n(r),i=n("0f9e"),a=n("76e9"),u=n.n(a),c=n("d2ae"),s=n("9530"),l=n.n(s),f=n("a307");function d(){var e=b(["\n            mutation visionLikeComment($photoId: String, $commentId: ID, $cancel: Int, $expTag: String) {\n                visionLikeComment(photoId: $photoId, commentId: $commentId, cancel: $cancel, expTag: $expTag) {\n                    result\n                }\n            }\n        "]);return d=function(){return e},e}function p(){var e=b(["\n            mutation visionAddComment(\n                $photoId: String,\n                $photoAuthorId: String,\n                $content: String,\n                $replyToCommentId: ID,\n                $replyTo: ID,\n                $expTag: String) {\n                visionAddComment(\n                    photoId: $photoId,\n                    photoAuthorId: $photoAuthorId,\n                    content: $content,\n                    replyToCommentId: $replyToCommentId,\n                    replyTo: $replyTo,\n                    expTag: $expTag) {\n                    result\n                    commentId\n                    content\n                    timestamp\n                    status\n                }\n            }\n        "]);return p=function(){return e},e}function v(){var e=b(["\n            mutation visionSubCommentList($photoId: String, $rootCommentId: String, $pcursor: String) {\n                visionSubCommentList(photoId: $photoId, rootCommentId: $rootCommentId, pcursor: $pcursor) {\n                    pcursor\n                    subComments {\n                        ","\n                    }\n                }\n            }\n        "]);return v=function(){return e},e}function h(){var e=b(["\n            query visionBaseEmoticons{\n                visionBaseEmoticons{\n                    iconUrls\n                }\n            }\n        "]);return h=function(){return e},e}function m(){var e=b(["\n            query commentListQuery($photoId: String, $pcursor: String) {\n                visionCommentList(photoId: $photoId, pcursor: $pcursor) {\n                    commentCount\n                    pcursor\n                    rootComments {\n                        ","\n                    }\n                }\n            }\n        "]);return m=function(){return e},e}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e){return k(e)||j(e)||w(e)||O()}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function j(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function k(e){if(Array.isArray(e))return I(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,u,"next",e)}function u(e){C(i,r,o,a,u,"throw",e)}a(void 0)}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function T(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function E(e){var t=R();return function(){var n,r=$(e);if(t){var o=$(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var M=[135010],q=function(e){T(n,e);var t=E(n);function n(){var e;return S(this,n),e=t.apply(this,arguments),e.comment={fetchCursorValue:"",status:{sending:"sending",success:"success",fail:"fail",done:"done"}},e.commentEditState={commentContent:"",replyToCommentId:"",replyTo:"",replyToUserName:""},e.replyCommentEditState={commentContent:"",replyToCommentId:"",replyTo:"",replyToUserName:""},e.replyInputId="",e.photoId="",e}return x(n,[{key:"addNewComment",value:function(){var e=P(o.a.mark((function e(t){var n,r,i,a,u,c;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.photoId,r=t.photoAuthorId,i=t.content,a=t.replyToCommentId,u=t.replyTo,c=t.expTag,e.next=3,this.addNewCommentMutation.mutate({photoId:n,photoAuthorId:r,content:i,replyToCommentId:a,replyTo:u,expTag:c});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"likeComment",value:function(){var e=P(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.photoId,r=t.commentId,i=t.cancel,a=t.expTag,e.next=3,this.likeCommentMutation.mutate({photoId:n,commentId:r,cancel:i,expTag:a});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleReply",value:function(e,t,n){this.replyCommentEditState.replyToCommentId=e,this.replyCommentEditState.replyTo=t,this.replyCommentEditState.replyToUserName=n,this.replyCommentEditState.commentContent=""}},{key:"cleanComment",value:function(){this.commentEditState.commentContent="",this.commentEditState.replyToCommentId="",this.commentEditState.replyTo="",this.commentEditState.replyToUserName=""}},{key:"cleanReplyComment",value:function(){this.replyCommentEditState.commentContent="",this.replyCommentEditState.replyToCommentId="",this.replyCommentEditState.replyTo="",this.replyCommentEditState.replyToUserName=""}},{key:"addFakeComment",value:function(e){if(0===e.replyTo)e.subComments=[],this.commentList.unshift(e);else{var t=this.commentList.find((function(t){return t.commentId===e.replyToCommentId||t.subComments.some((function(t){return t.commentId===e.replyToCommentId}))}));t&&t.subComments.unshift(e)}}},{key:"updateCommentResult",value:function(e,t){var n=this,r=this.commentList.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.subComments)||void 0===n?void 0:n.length)?[].concat(g(e),g(t.subComments.filter((function(e){return e}))),[t]):[].concat(g(e),[t])}),[]),o=r.find((function(e){return e.commentId===t}));o&&(o.commentId=(null===e||void 0===e?void 0:e.commentId)||t,o.status=null===e||void 0===e?void 0:e.status,setTimeout((function(){e?(o.timestamp&&(o.status=n.comment.status.done),n.addNewCommentMutation.data.visionAddComment={}):o.status=n.comment.status.fail}),3e3))}},{key:"addComment",value:function(){var e=P(o.a.mark((function e(t,n,r){var i,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=u()(),e.next=3,this.sendComment(t,i);case 3:if(!this.isBlockedComment){e.next=5;break}return e.abrupt("return");case 5:a={authorId:n.eid,authorName:n.name,commentId:i,content:t.content,headurl:n.avatar,timestamp:+new Date,status:this.comment.status.sending,likedCount:0,replyTo:r?this.sendReplyTo:0},r&&Object.assign(a,{replyToUserName:this.replyCommentEditState.replyToUserName,replyToCommentId:this.replyCommentEditState.replyToCommentId}),this.addFakeComment(a),r&&(this.replyInputId="",this.cleanReplyComment()),this.cleanComment();case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"sendComment",value:function(){var e=P(o.a.mark((function e(t,n){var r,i=this;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.sendReplyTo&&Object.assign(t,{replyTo:this.sendReplyTo}),e.next=3,this.addNewComment(t);case 3:r=this.addCommentResult,1===(null===r||void 0===r?void 0:r.result)&&"number"===typeof this.commentCount&&(this.commentCount=this.commentCount+1),setTimeout((function(){i.updateCommentResult(i.addCommentResult,n)}),1e3);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getCommentList",value:function(){var e=P(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.photoId,r=t.append,i=void 0!==r&&r,this.pcursor!==this.comment.fetchCursorValue||!i){e.next=3;break}return e.abrupt("return");case 3:this.comment.fetchCursorValue=this.pcursor,this.commentListQuery.fetchMore({variables:{pcursor:i?this.pcursor:"",photoId:n},updateQuery:function(e,t){var n,r,o,a,u,c;return{visionCommentList:{__typename:null===(n=e.visionCommentList)||void 0===n?void 0:n.__typename,pcursor:null===t||void 0===t||null===(r=t.visionCommentList)||void 0===r?void 0:r.pcursor,commentCount:null===t||void 0===t||null===(o=t.visionCommentList)||void 0===o?void 0:o.commentCount,rootComments:i?[].concat(g((null===(a=e.visionCommentList)||void 0===a?void 0:a.rootComments)||[]),g((null===t||void 0===t||null===(u=t.visionCommentList)||void 0===u?void 0:u.rootComments)||[])):null===t||void 0===t||null===(c=t.visionCommentList)||void 0===c?void 0:c.rootComments}}}});case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubCommentList",value:function(){var e=P(o.a.mark((function e(t){var n,r,i,a,u,c,s,l;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.photoId,i=t.rootCommentId,a=t.pcursor,e.next=3,this.visionSubCommentListMutation.mutate({photoId:r,rootCommentId:i,pcursor:a});case 3:return u=null===(n=this.commentList)||void 0===n?void 0:n.find((function(e){return e.commentId===i})),u&&(u.subCommentsPcursor=null===(c=this.subCommentList)||void 0===c?void 0:c.pcursor,(s=u.subComments).push.apply(s,g((null===(l=this.subCommentList)||void 0===l?void 0:l.subComments)||[]))),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"emojiIconUrls",get:function(){var e;return(null===(e=this.emoticonsQuery.data.visionBaseEmoticons)||void 0===e?void 0:e.iconUrls)||{}}},{key:"subCommentList",get:function(){return this.visionSubCommentListMutation.data.visionSubCommentList}},{key:"addCommentResult",get:function(){return this.addNewCommentMutation.data.visionAddComment}},{key:"isBlockedComment",get:function(){var e=this;return M.some((function(t){var n;return(null===(n=e.addCommentResult)||void 0===n?void 0:n.result)===t}))}},{key:"likeCommentResult",get:function(){var e;return(null===(e=this.likeCommentMutation.data.visionLikeComment)||void 0===e?void 0:e.result)||0}},{key:"sendContent",get:function(){return this.commentEditState.commentContent}},{key:"sendReplyContent",get:function(){return this.replyCommentEditState.commentContent}},{key:"sendReplyToCommentId",get:function(){return this.replyCommentEditState.replyToUserName?this.replyCommentEditState.replyToCommentId:0}},{key:"sendReplyTo",get:function(){return this.replyCommentEditState.replyToUserName?this.replyCommentEditState.replyTo:0}},{key:"commentList",get:function(){var e;return(null===(e=this.commentListQuery.data.visionCommentList)||void 0===e?void 0:e.rootComments)||[]},set:function(e){this.commentListQuery.data.visionCommentList&&(this.commentListQuery.data.visionCommentList.rootComments=e)}},{key:"pcursor",get:function(){var e;return(null===(e=this.commentListQuery.data.visionCommentList)||void 0===e?void 0:e.pcursor)||""}},{key:"commentCount",get:function(){var e;return(null===(e=this.commentListQuery.data.visionCommentList)||void 0===e?void 0:e.commentCount)||0},set:function(e){this.commentListQuery.data.visionCommentList&&(this.commentListQuery.data.visionCommentList.commentCount=e)}}]),n}(c["a"]);Object(i["c"])([Object(c["d"])({query:l()(m(),f["a"]),variables:function(e){return{photoId:e.params.photoId||this.photoId,pcursor:""}},fetchPolicy:"cache-and-network",skip:function(e){return!e.params.photoId&&!this.photoId}})],q.prototype,"commentListQuery",void 0),Object(i["c"])([Object(c["d"])({query:l()(h()),fetchPolicy:"cache-first"})],q.prototype,"emoticonsQuery",void 0),Object(i["c"])([Object(c["c"])({mutation:l()(v(),f["b"]),variables:function(e){var t=e.photoId,n=e.rootCommentId,r=e.pcursor;return{photoId:t,rootCommentId:n,pcursor:r}}})],q.prototype,"visionSubCommentListMutation",void 0),Object(i["c"])([Object(c["c"])({mutation:l()(p()),variables:function(e){var t=e.photoId,n=e.photoAuthorId,r=e.content,o=e.replyToCommentId,i=e.replyTo,a=e.expTag;return{photoId:t,photoAuthorId:n,content:r,replyToCommentId:o,replyTo:i,expTag:a}}})],q.prototype,"addNewCommentMutation",void 0),Object(i["c"])([Object(c["c"])({mutation:l()(d()),variables:function(e){var t=e.photoId,n=e.commentId,r=e.cancel,o=e.expTag;return{photoId:t,commentId:n,cancel:r,expTag:o}}})],q.prototype,"likeCommentMutation",void 0)},aff2:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var u=/\+/g;e=e.split(t);var c=1e3;i&&"number"===typeof i.maxKeys&&(c=i.maxKeys);var s=e.length;c>0&&s>c&&(s=c);for(var l=0;l<s;++l){var f,d,p,v,h=e[l].replace(u,"%20"),m=h.indexOf(n);m>=0?(f=h.substr(0,m),d=h.substr(m+1)):(f=h,d=""),p=decodeURIComponent(f),v=decodeURIComponent(d),r(a,p)?o(a[p])?a[p].push(v):a[p]=[a[p],v]:a[p]=v}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},b047:function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},b1e5:function(e,t,n){var r=n("a994"),o=1,i=Object.prototype,a=i.hasOwnProperty;function u(e,t,n,i,u,c){var s=n&o,l=r(e),f=l.length,d=r(t),p=d.length;if(f!=p&&!s)return!1;var v=f;while(v--){var h=l[v];if(!(s?h in t:a.call(t,h)))return!1}var m=c.get(e),b=c.get(t);if(m&&b)return m==t&&b==e;var y=!0;c.set(e,t),c.set(t,e);var g=s;while(++v<f){h=l[v];var O=e[h],w=t[h];if(i)var j=s?i(w,O,h,t,e,c):i(O,w,h,e,t,c);if(!(void 0===j?O===w||u(O,w,n,i,c):j)){y=!1;break}g||(g="constructor"==h)}if(y&&!g){var k=e.constructor,I=t.constructor;k==I||!("constructor"in e)||!("constructor"in t)||"function"==typeof k&&k instanceof k&&"function"==typeof I&&I instanceof I||(y=!1)}return c["delete"](e),c["delete"](t),y}e.exports=u},b218:function(e,t){var n=9007199254740991;function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}e.exports=r},b2c7:function(e,t,n){"use strict";var r=n("4827"),o=n.n(r);o.a},b311:function(e,t,n){
/*!
 * clipboard.js v2.0.8
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
(function(t,n){e.exports=n()})(0,(function(){return function(){var e={134:function(e,t,n){"use strict";n.d(t,{default:function(){return _}});var r=n(279),o=n.n(r),i=n(370),a=n.n(i),u=n(817),c=n.n(u);function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var p=function(){function e(t){l(this,e),this.resolveOptions(t),this.initSelection()}return d(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"createFakeElement",value:function(){var e="rtl"===document.documentElement.getAttribute("dir");this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var t=window.pageYOffset||document.documentElement.scrollTop;return this.fakeElem.style.top="".concat(t,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.fakeElem}},{key:"selectFake",value:function(){var e=this,t=this.createFakeElement();this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.container.appendChild(t),this.selectedText=c()(t),this.copyText(),this.removeFake()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=c()(this.target),this.copyText()}},{key:"copyText",value:function(){var e;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==s(e)||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}(),v=p;function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function w(e){var t=I();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function P(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var S=function(e){g(n,e);var t=w(n);function n(e,r){var o;return m(this,n),o=t.call(this),o.resolveOptions(r),o.listenClick(e),o}return y(n,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof e.action?e.action:this.defaultAction,this.target="function"===typeof e.target?e.target:this.defaultTarget,this.text="function"===typeof e.text?e.text:this.defaultText,this.container="object"===h(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=a()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new v({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return P("action",e)}},{key:"defaultTarget",value:function(e){var t=P("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return P("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"===typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}]),n}(o()),_=S},828:function(e){var t=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function r(e,n){while(e&&e.nodeType!==t){if("function"===typeof e.matches&&e.matches(n))return e;e=e.parentNode}}e.exports=r},438:function(e,t,n){var r=n(828);function o(e,t,n,r,o){var i=a.apply(this,arguments);return e.addEventListener(n,i,o),{destroy:function(){e.removeEventListener(n,i,o)}}}function i(e,t,n,r,i){return"function"===typeof e.addEventListener?o.apply(null,arguments):"function"===typeof n?o.bind(null,document).apply(null,arguments):("string"===typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,n,r,i)})))}function a(e,t,n,o){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&o.call(e,n)}}e.exports=i},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"===typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},370:function(e,t,n){var r=n(879),o=n(438);function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return a(e,t,n);if(r.nodeList(e))return u(e,t,n);if(r.string(e))return c(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function a(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function u(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}function c(e,t,n){return o(document.body,e,t,n)}e.exports=i},817:function(e){function t(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}e.exports=t},279:function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),n(134)}().default}))},b4c0:function(e,t,n){var r=n("cb5a");function o(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}e.exports=o},b5a7:function(e,t,n){var r=n("0b07"),o=n("2b3e"),i=r(o,"DataView");e.exports=i},b858:function(e,t,n){"use strict";var r=n("ffdb"),o=n.n(r);o.a},b9e4:function(e,t,n){},badf:function(e,t,n){var r=n("642a"),o=n("1838"),i=n("cd9d"),a=n("6747"),u=n("f9ce");function c(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):u(e)}e.exports=c},bbc0:function(e,t,n){var r=n("6044"),o="__lodash_hash_undefined__",i=Object.prototype,a=i.hasOwnProperty;function u(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return a.call(t,e)?t[e]:void 0}e.exports=u},bc76:function(e,t,n){"use strict";var r=n("7bde"),o=n.n(r);o.a},bd9a:function(e,t,n){"use strict";var r=n("6c5a"),o=n.n(r);o.a},beaa:function(e,t,n){"use strict";var r=n("0483"),o=n.n(r);o.a},c05f:function(e,t,n){var r=n("7b97"),o=n("1310");function i(e,t,n,a,u){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:r(e,t,n,a,i,u))}e.exports=i},c098:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function o(e,t){var o=typeof e;return t=null==t?n:t,!!t&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}e.exports=o},c10c:function(e,t,n){},c23d:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n("4795"),o=n.n(r),i=n("0f9e"),a=n("d2ae"),u=n("9530"),c=n.n(u);function s(){var e=f(["\n            mutation visionVideoFeedback($photoId: String, $type: Int, $expTag: String) {\n                visionVideoFeedback(photoId: $photoId, type: $type, expTag: $expTag) {\n                    result\n                }\n            }\n        "]);return s=function(){return e},e}function l(){var e=f(["\n            mutation visionVideoLike($photoId: String, $photoAuthorId: String, $cancel: Int, $expTag: String) {\n                visionVideoLike(photoId: $photoId, photoAuthorId: $photoAuthorId, cancel: $cancel, expTag: $expTag) {\n                    result\n                }\n            }\n        "]);return l=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){p(i,r,o,a,u,"next",e)}function u(e){p(i,r,o,a,u,"throw",e)}a(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function O(e){var t=k();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var C=function(e){y(n,e);var t=O(n);function n(){return h(this,n),t.apply(this,arguments)}return b(n,[{key:"likeVideo",value:function(){var e=v(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.photoId,r=t.photoAuthorId,i=t.cancel,a=t.expTag,e.next=3,this.likeMutation.mutate({photoId:n,photoAuthorId:r,cancel:i,expTag:a});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"feedbackVideo",value:function(){var e=v(o.a.mark((function e(t,n,r){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.feedbackMutation.mutate({photoId:t,type:n,expTag:r});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"likeVideoResult",get:function(){var e;return(null===(e=this.likeMutation.data.visionVideoLike)||void 0===e?void 0:e.result)||0}},{key:"feedbackVideoResult",get:function(){var e;return(null===(e=this.feedbackMutation.data.visionVideoFeedback)||void 0===e?void 0:e.result)||0}}]),n}(a["a"]);Object(i["c"])([Object(a["c"])({mutation:c()(l()),variables:function(e){var t=e.photoId,n=e.photoAuthorId,r=e.cancel,o=e.expTag;return{photoId:t,photoAuthorId:n,cancel:r,expTag:o}}})],C.prototype,"likeMutation",void 0),Object(i["c"])([Object(a["c"])({mutation:c()(s()),variables:function(e){var t=e.photoId,n=e.type,r=e.expTag;return{photoId:t,type:n,expTag:r}}})],C.prototype,"feedbackMutation",void 0)},c534:function(e,t,n){"use strict";var r=n("5d3a"),o=n.n(r);o.a},c584:function(e,t){function n(e,t){return e.has(t)}e.exports=n},c869:function(e,t,n){var r=n("0b07"),o=n("2b3e"),i=r(o,"Set");e.exports=i},cb5a:function(e,t,n){var r=n("9638");function o(e,t){var n=e.length;while(n--)if(r(e[n][0],t))return n;return-1}e.exports=o},cc76:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,u){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?i(a(e),(function(a){var u=encodeURIComponent(r(a))+n;return o(e[a])?i(e[a],(function(e){return u+encodeURIComponent(r(e))})).join(t):u+encodeURIComponent(r(e[a]))})).join(t):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},cd9d:function(e,t){function n(e){return e}e.exports=n},ce86:function(e,t,n){var r=n("9e69"),o=n("7948"),i=n("6747"),a=n("ffd6"),u=1/0,c=r?r.prototype:void 0,s=c?c.toString:void 0;function l(e){if("string"==typeof e)return e;if(i(e))return o(e,l)+"";if(a(e))return s?s.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}e.exports=l},d02c:function(e,t,n){var r=n("5e2e"),o=n("79bc"),i=n("7b83"),a=200;function u(e,t){var n=this.__data__;if(n instanceof r){var u=n.__data__;if(!o||u.length<a-1)return u.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(u)}return n.set(e,t),this.size=n.size,this}e.exports=u},d191:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n("48d1");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u,c="danmaku-time-switch";function s(){var e,t=Object(r["q"])(Date.now()),n=Object(r["q"])(0),o=Object(r["q"])(0),i=(e={},a(e,u.START,n),a(e,u.CLOSE,o),e),c=Object(r["q"])("");function s(e){c.value=e}function l(e){var n=Date.now();e.value+=Date.now()-t.value,t.value=n}function f(e,t){var n=i[e];n&&(l(n),t&&(c.value=t))}function d(){n.value=0,o.value=0}function p(){c.value&&f(c.value)}return{initState:s,startTime:n,closeTime:o,switchTime:f,clearDate:d,getDate:p}}function l(){var e=s();return Object(r["o"])(c,i(i({},e),{},{SwitchState:u})),e}function f(){return Object(r["e"])(c)}(function(e){e["START"]="start",e["CLOSE"]="close"})(u||(u={}))},d2ec:function(e,t,n){},d327:function(e,t){function n(){return[]}e.exports=n},d370:function(e,t,n){var r=n("253c"),o=n("1310"),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=c},d45f:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interactive-container"},[e._t("fade-toast"),n("div",{staticClass:"interactive-bar-item"},[n("div",{staticClass:"interactive-item like-item",class:e.liked?"liked":"",on:{click:function(t){return e.handleVideoLike(e.liked)}}},[n("span",{staticClass:"c-icon",class:[e.liked?e.useType+"-liked":e.useType+"-like"]}),n("span",{staticClass:"item-text item-count",class:e.liked?"item-liked":""},[e._v(e._s(e.count))])])]),n("pl-tooltip",{ref:"shareTip",staticClass:"share-tooltip",attrs:{placement:"hori"===e.useType?"bottom-right":"bottom","max-width":430,trigger:"click",delay:{show:10}}},[n("div",{staticClass:"interactive-item share-item"},[n("span",{staticClass:"c-icon",class:e.useType+"-share"}),n("span",{staticClass:"item-text"},[e._v("分享")])]),e.info?n("SocialShare",{attrs:{slot:"content",id:e.info.id,"video-type":e.shareVideoType,"share-info":e.shareInfo,"share-type":"短视频","ignore-options":e.ignoreOptions,"share-base-config":e.shareBaseConfig,"log-type":e.logType,"show-share":e.showShare},on:{copy:e.copySuccess,"close-captcha":e.handleShareTooltipClose},slot:"content"}):e._e()],1),e.hasUninterested?n("div",{staticClass:"interactive-bar-item"},[n("div",{staticClass:"interactive-item uninterested-item",on:{click:function(t){return e.handleUninterested(e.info.id,e.videoType)}}},[n("span",{staticClass:"c-icon vertical-uninterested"}),n("span",{staticClass:"item-text"},[e._v("不感兴趣")])])]):e._e(),e.hasReport?n("div",{staticClass:"interactive-bar-item"},[n("div",{staticClass:"interactive-item report-item",on:{click:e.handleReportPhoto}},[n("span",{staticClass:"c-icon report-entry"}),n("span",{staticClass:"item-text"},[e._v("举报")])])]):e._e(),e.needDanmu?n("DInput",{staticClass:"danmu"}):e._e()],2)},o=[],i=n("4795"),a=n.n(i),u=(n("9a1a"),n("0d8b")),c=n("48d1"),s=n("2ea1"),l=n("77a5"),f=n("b74e"),d=n("d2ae"),p=n("c23d"),v=n("ff22"),h=n("71b0"),m=n("a7bc"),b=n("20c8");function y(e,t,n){Object(c["l"])((function(){e&&t.sendShareLog({did:Object(b["a"])("did")||"",token:e,url:location.href},n)}))}var g=n("0fa5"),O=n("90cd"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-warp"},[n("SpSwitch",{staticClass:"danmu-switch",on:{change:e.switchDanmu,"hook:mounted":e.syncDanmuShow},model:{value:e.checkDanmu,callback:function(t){e.checkDanmu=t},expression:"checkDanmu"}}),e.isLogin?n("PlInput",{staticClass:"danmu-input",attrs:{placeholder:"发条弹幕吧~",maxlength:e.MaxLimit},on:{input:e.handleInput,focus:e.handleFocus},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendDanmu(t)}},model:{value:e.danmu,callback:function(t){e.danmu=t},expression:"danmu"}},[n("div",{attrs:{slot:"append"},slot:"append"},[n("div",{staticClass:"input-pad"})])]):n("div",{staticClass:"danmu-input danmu-input-block"},[e._v(" 快去"),n("span",{staticClass:"input-block-emphasis",on:{click:e.handleLogin}},[e._v("登录")]),e._v("吧~ ")]),n("PlButton",{staticClass:"danmu-button",class:[e.sendDisable?"danmu-button-disable":"",e.isLogin?"":"danmu-button-logout"],on:{click:e.sendDanmu}},[e._v(" 发送 ")]),n("transition",{attrs:{name:"fade"}},[e.showToast?n("div",{staticClass:"info-toast"},[e._v(" "+e._s(e.toastValue)+" ")]):e._e(),e.showInputInfo?n("div",{staticClass:"input-toast"},[e._v(" "+e._s(e.inputInfo)+" ")]):e._e()])],1)},j=[],k=(n("e951"),n("3825")),I=(n("1df3"),n("5a9d")),C=n("d0a8"),P=n.n(C),S=n("93c8"),_=n("d191");function x(){var e=Object(m["e"])();function t(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e({type:"SHOW",event_name:"DAMAKU_SWITCH_BUTTON",event_value:{show_status:t?"OPEN":"CLOSED"}})}function n(t,n){e({type:"CLICK",event_name:"DAMAKU_SWITCH_BUTTON",event_value:{show_status:n?"OPEN":"CLOSED",after_click_status:t?"OPEN":"CLOSED",current_play_duration:""}})}function r(t){var n=t.type,r=t.state;e({type:n,event_name:"DAMAKU_INPUT_BUTTON",event_value:{show_status:r?"OPEN":"CLOSED"}})}function o(t){e({type:"CLICK",event_name:"DAMAKU_SEND_BUTTON",event_value:{show_status:t?"OPEN":"CLOSED"}})}function i(t,n){e({type:"CLICK",event_name:"DAMAKU_SEND_RESULT",event_value:{send_status:t?"SUCCESS":"FAIL",current_progress_time:null,current_play_duration:null,text_byte_num:Object(f["c"])(n)}})}function a(){e({type:"SHOW",event_name:"DAMAKU_BYTE_TOAST"})}return{sendDanmakuShow:t,sendDanmakuClick:n,sendInputLog:r,sendBtnLog:o,sendReulstLog:i,sendDanmakuToast:a}}var T=Object(c["c"])({components:{SpSwitch:P.a,PlInput:I["a"],PlButton:k["a"]},setup:function(e,t){var n=Object(f["l"])(),r=Object(d["f"])(l["a"]),o=Object(c["a"])((function(){return!!(null===r||void 0===r?void 0:r.userInfo.id)})),i=Object(c["q"])(!1),a=Object(_["a"])(),u=a.SwitchState,s=a.switchTime,p=a.initState,v=Object(c["q"])(!1),m=Object(c["q"])(""),b=Object(c["q"])(!1);function y(){n("change-danmaku-show",{show:b.value,canSendLog:!0}),localStorage.setItem("danmukuShow",b.value?"1":"0"),i.value&&(b.value?s(u.CLOSE,u.START):s(u.START,u.CLOSE))}var g=x(),O=g.sendDanmakuShow,w=g.sendDanmakuClick,j=g.sendInputLog,k=g.sendBtnLog,I=g.sendReulstLog,C=g.sendDanmakuToast;function P(){j({type:"CLICK",state:b.value}),n("login",{source:h["b"].PC_DAMAKU_INPUT_BUTTON})}var T=Object(c["q"])(""),L=Object(c["a"])((function(){return T.value?T.value.length:0})),E=Object(c["a"])((function(){return L.value>0}));Object(c["t"])((function(){return E.value}),(function(e){n("input-focus",e)}));var A=40,D=Object(c["a"])((function(){return L.value>A})),R=Object(c["a"])((function(){var e;return!T.value||""===(null===(e=T.value)||void 0===e?void 0:e.trim())||!o.value||L.value>A}));function $(){if(o.value){if(T.value&&""!==T.value.trim()){var e=T.value;n("send-danmu",{text:T.value,isCheck:b.value,callback:function(t){var n=t.result;I(1===n,e)}}),k(b.value),T.value="",b.value||Object(S["a"])(m,v,"开启弹幕吧～")}}else P()}var M=Object(c["a"])((function(){return L.value>A?"超出弹幕字数上限，请删减后发送":"当前总输入字数".concat(L.value,"/").concat(A)})),q=Object(c["a"])((function(){return L.value>A-10}));function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";T.value=Object(f["h"])(e)}function U(){var e=localStorage.getItem("danmukuShow");b.value="1"===e,n("change-danmaku-show",{show:b.value,canSendLog:!1}),i.value=!0,p(b.value?u.START:u.CLOSE)}function N(){j({type:"CLICK",state:b.value})}return Object(c["t"])((function(){return q.value}),(function(e){e&&C()})),Object(f["k"])("child-log",(function(){O(b.value),j({type:"SHOW",state:b.value})})),Object(c["l"])((function(){Object(c["t"])((function(){return b.value}),(function(e,t){O(e),w(e,t)}))})),Object(c["t"])((function(){return o.value}),(function(e){e?(O(b.value),j({type:"SHOW",state:b.value})):T.value=""})),{isLogin:o,danmu:T,danmuLen:L,checkDanmu:b,handleLogin:P,sendDanmu:$,switchDanmu:y,syncDanmuShow:U,showToast:v,toastValue:m,handleInput:V,sendDisable:R,MaxLimit:A,canNext:E,limitWarn:D,inputInfo:M,showInputInfo:q,handleFocus:N}}}),L=T,E=(n("84c6"),n("d802")),A=Object(E["a"])(L,w,j,!1,null,"de7e29f2",null),D=A.exports,R=n("afbc"),$=n("2ef0");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){U(i,r,o,a,u,"next",e)}function u(e){U(i,r,o,a,u,"throw",e)}a(void 0)}))}}var F=Object(c["c"])({components:{plTooltip:u["a"],SocialShare:s["a"],DInput:D},props:{info:{type:Object},author:{type:Object},useType:{type:String,default:"hori"},hasUninterested:{type:Boolean},videoType:{type:Number},ignoreOptions:{type:Array,default:function(){return[]}},shareBaseConfig:{type:Object,required:!0},logType:{type:String},supDanmaku:{type:Boolean,default:!1},hasReport:{type:Boolean,default:!0},shareVideoType:{type:String}},setup:function(e,t){var n=t.root,r=t.emit,o=Object(d["f"])(l["a"]),i=Object(d["f"])(p["a"]),u=Object(f["l"])(),s=Object(c["q"])(!1),b=Object(d["f"])(g["a"]),w=Object(c["a"])((function(){var t,n,r;return{title:Object(O["b"])(null===(t=e.info)||void 0===t?void 0:t.caption,!1),coverUrl:(null===(n=e.info)||void 0===n?void 0:n.coverUrl)||"",nickname:(null===(r=e.author)||void 0===r?void 0:r.name)||""}})),j=Object(c["a"])((function(){var e,t;return null===(e=n.$route)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.page}));y(n.$route.query.shareToken,b,e.shareBaseConfig);var k=Object(c["q"])(null),I=Object(c["a"])((function(){var e;return null===(e=k.value)||void 0===e?void 0:e.isShow}));function C(){var e;null===(e=k.value)||void 0===e||e.hide()}Object(c["t"])((function(){return n.$route.path}),(function(){C()}));var P=Object(m["e"])(),S=Object(c["q"])(!1),_=Object(c["p"])({count:"",realLikeCount:0});Object(c["t"])((function(){return e.info}),(function(e){_.count=String(Object(v["b"])(null===e||void 0===e?void 0:e.realLikeCount)),_.realLikeCount=null===e||void 0===e?void 0:e.realLikeCount,S.value=null===e||void 0===e?void 0:e.liked}),{immediate:!0});var x=function(){var t=N(a.a.mark((function t(n){var r,c,l,f,d,p,m;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null===o||void 0===o?void 0:o.userInfo.id){t.next=2;break}return t.abrupt("return",u("login",{source:h["b"].LIKE}));case 2:if(f=n?1:0,d=null===(r=e.info)||void 0===r?void 0:r.id,p=null===(c=e.author)||void 0===c?void 0:c.id,P({type:"CLICK",logType:e.logType||null,event_name:"LIKE_PHOTO_BUTTON",event_value:{like_type:S.value?"DISLIKE":"LIKE"}}),!s.value){t.next=8;break}return t.abrupt("return");case 8:return s.value=!0,t.next=11,i.likeVideo({photoId:d,photoAuthorId:p,cancel:f,expTag:null===(l=e.info)||void 0===l?void 0:l.expTag});case 11:m=i.likeVideoResult,1===m&&(S.value=!S.value,_.realLikeCount<1e4&&(_.realLikeCount=f?_.realLikeCount-1:_.realLikeCount+1),_.count=String(Object(v["b"])(_.realLikeCount)),u("video-like",{liked:S.value,count:_.realLikeCount})),s.value=!1;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function T(){r("copy-success")}function L(e,t){return E.apply(this,arguments)}function E(){return E=N(a.a.mark((function t(n,o){var u,c;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return P({type:"CLICK",logType:e.logType||null,event_name:"NO_INTEREST_BUTTON"}),t.next=3,i.feedbackVideo(n,o,null===(u=e.info)||void 0===u?void 0:u.expTag);case 3:c=i.feedbackVideoResult,1===c&&r("feedback-success");case 5:case"end":return t.stop()}}),t)}))),E.apply(this,arguments)}var A=Object($["debounce"])(N(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(P({type:"CLICK",event_name:"REPORT_BUTTON",event_value:{btn_type:"PHOTO"}}),null===o||void 0===o?void 0:o.userInfo.id){t.next=3;break}return t.abrupt("return",u("login",{}));case 3:u("change-report-panel",{reportType:1,page:j.value,targetId:null===(n=e.info)||void 0===n?void 0:n.id,reportedUserId:null===(r=e.author)||void 0===r?void 0:r.id});case 4:case"end":return t.stop()}}),t)}))),500),D=Object(c["a"])((function(){return n.$route.name!==R["a"].ShortVideo&&e.supDanmaku}));return q(q({handleVideoLike:x},Object(c["s"])(_)),{},{liked:S,copySuccess:T,handleUninterested:L,handleReportPhoto:A,needDanmu:D,shareInfo:w,shareTip:k,showShare:I,handleShareTooltipClose:C})}}),B=F,z=(n("162b"),Object(E["a"])(B,r,o,!1,null,"7152c117",null));t["a"]=z.exports},d612:function(e,t,n){var r=n("7b83"),o=n("7ed2"),i=n("dc0f");function a(e){var t=-1,n=null==e?0:e.length;this.__data__=new r;while(++t<n)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},d672:function(e,t,n){"use strict";var r=n("813e"),o=n.n(r);o.a},d8df:function(e,t,n){"use strict";var r=n("039c"),o=n.n(r);o.a},da03:function(e,t,n){var r=n("2b3e"),o=r["__core-js_shared__"];e.exports=o},dc0f:function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},dc57:function(e,t){var n=Function.prototype,r=n.toString;function o(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}e.exports=o},dd53:function(e,t,n){},e24b:function(e,t,n){var r=n("49f4"),o=n("1efc"),i=n("bbc0"),a=n("7a48"),u=n("2524");function c(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype["delete"]=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=u,e.exports=c},e2c0:function(e,t,n){var r=n("e2e4"),o=n("d370"),i=n("6747"),a=n("c098"),u=n("b218"),c=n("f4d6");function s(e,t,n){t=r(t,e);var s=-1,l=t.length,f=!1;while(++s<l){var d=c(t[s]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++s!=l?f:(l=null==e?0:e.length,!!l&&u(l)&&a(d,l)&&(i(e)||o(e)))}e.exports=s},e2e4:function(e,t,n){var r=n("6747"),o=n("f608"),i=n("18d8"),a=n("76dd");function u(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}e.exports=u},e380:function(e,t,n){var r=n("7b83"),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},e3f8:function(e,t,n){var r=n("656b");function o(e){return function(t){return r(t,e)}}e.exports=o},ea95:function(e,t,n){},eac5:function(e,t){var n=Object.prototype;function r(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||n;return e===r}e.exports=r},ec69:function(e,t,n){var r=n("6fcd"),o=n("03dd"),i=n("30c9");function a(e){return i(e)?r(e):o(e)}e.exports=a},edfa:function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}e.exports=n},ef5d:function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},efb6:function(e,t,n){var r=n("5e2e");function o(){this.__data__=new r,this.size=0}e.exports=o},f0d3:function(e,t,n){"use strict";var r=n("f9cb"),o=n.n(r);o.a},f337:function(e,t,n){"use strict";var r=n("ea95"),o=n.n(r);o.a},f4d6:function(e,t,n){var r=n("ffd6"),o=1/0;function i(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=i},f608:function(e,t,n){var r=n("6747"),o=n("ffd6"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function u(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(a.test(e)||!i.test(e)||null!=t&&e in Object(t))}e.exports=u},f9cb:function(e,t,n){},f9ce:function(e,t,n){var r=n("ef5d"),o=n("e3f8"),i=n("f608"),a=n("f4d6");function u(e){return i(e)?r(a(e)):o(e)}e.exports=u},fa88:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n("0f9e"),o=n("d2ae"),i=n("9530"),a=n.n(i),u=n("b74e"),c=n("afbc"),s=n("90cd"),l=n("2bbe");function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){var e=k(["\n            ","\n            query hotVideoQuery($trendingId: String, $page: String, $webPageArea: String, $photoIds: [String]) {\n                hotVideoData(trendingId: $trendingId, page: $page, webPageArea: $webPageArea, photoIds: $photoIds) {\n                    result\n                    llsid\n                    expTag\n                    serverExpTag\n                    pcursor\n                    webPageArea\n                    trendingId\n                    feeds {\n                        type\n                        trendingId\n                        author {\n                            id\n                            name\n                            headerUrl\n                            following\n                            headerUrls {\n                                url\n                            }\n                        }\n                        photo {\n                            ...photoContent\n                        }\n                        canAddComment\n                        llsid\n                        status\n                        currentPcursor\n                    }\n                }\n            }\n        "]);return d=function(){return e},e}function p(e){return b(e)||m(e)||h(e)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function m(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function b(e){if(Array.isArray(e))return y(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(){var e=k(["\n            query hotRankQuery($page: String) {\n                visionHotRank(page: $page) {\n                    result\n                    pcursor\n                    webPageArea\n                    items {\n                        rank\n                        id\n                        name\n                        viewCount\n                        hotValue\n                        iconUrl,\n                        poster,\n                        tagType,\n                        photoIds\n                    }\n                }\n            }\n        "]);return j=function(){return e},e}function k(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function x(e){var t=E();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var D=function(e){S(n,e);var t=x(n);function n(){return I(this,n),t.apply(this,arguments)}return P(n,[{key:"getCurrentHotRankList",value:function(e,t){var n=(e-1)*t,r=e*t;return this.hotRankList.slice(n,r)||[]}},{key:"area",get:function(){var e;return(null===(e=this.hotRank.data.visionHotRank)||void 0===e?void 0:e.webPageArea)||""}},{key:"hotRankList",get:function(){var e,t;return(null===(e=this.hotRank.data.visionHotRank)||void 0===e||null===(t=e.items)||void 0===t?void 0:t.slice(0,50))||[]}},{key:"hotRankIdList",get:function(){return this.hotRankList.map((function(e){return e.id}))}},{key:"hotRankMap",get:function(){var e={};return this.hotRankList.forEach((function(t){(null===t||void 0===t?void 0:t.id)&&(e[t.id]=t)})),e}}]),n}(o["a"]);Object(r["c"])([Object(o["d"])({query:a()(j()),variables:function(e){return{page:Object(u["d"])(e.name),webPageArea:e.query.area}},prefetch:!0,skip:function(e){return e.name===c["a"].ShortVideo&&!!this.hotRankList.length},fetchPolicy:"cache-first"})],D.prototype,"hotRank",void 0);var R=function(e){S(n,e);var t=x(n);function n(){var e;return I(this,n),e=t.apply(this,arguments),e.trendingId="",e.webPageArea=null,e.canFetch=!1,e}return P(n,[{key:"fetchMorePhoto",value:function(e){var t,n=this,r=e.direction,o=e.curId,i=e.webPageArea,a=e.canNextIfEmpty,u=e.hasRankList,c="last"===r,s=this.hotRankIdList&&0===this.hotRankIdList.indexOf(o);if(!(this.hotVideo.loading&&!c||c&&s)){var l=c&&this.hotRankIdList&&this.hotRankIdList.indexOf(o)>0;e&&(this.trendingId=this.getNextRankId(o,l,u)||o),this.hotVideo.fetchMore({variables:{trendingId:this.trendingId,webPageArea:i,photoIds:null===(t=this.hotRankMap[this.trendingId])||void 0===t?void 0:t.photoIds},updateQuery:function(e,t){var n,r,o=(null===e||void 0===e||null===(n=e.hotVideoData)||void 0===n?void 0:n.feeds)||[],i=(null===t||void 0===t||null===(r=t.hotVideoData)||void 0===r?void 0:r.feeds)||[];return{hotVideoData:O(O({},(null===t||void 0===t?void 0:t.hotVideoData)||{}),{},{feeds:l?[].concat(p(i),p(o)):[].concat(p(o),p(i))})}}}).then((function(e){if(e&&e.data){var t=e.data.hotVideoData,o=t.feeds,u=void 0===o?[]:o,c=t.trendingId;!u.length&&a&&n.fetchMorePhoto({curId:c,direction:r,webPageArea:i})}}))}}},{key:"getNextRankId",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=decodeURIComponent(e),i=(null===(t=this.hotRankIdList)||void 0===t?void 0:t.length)||0;if(this.hotRankIdList&&i){var a=this.hotRankIdList.indexOf(o);if(n&&a>0)return this.hotRankIdList[a-1];if(a>-1)return a<i-1?this.hotRankIdList[a+1]:this.hotRankIdList[i-1];if(!r)return this.hotRankIdList[0]}return o}},{key:"hotVideoList",get:function(){var e=this.hotVideo.data.hotVideoData;return((null===e||void 0===e?void 0:e.feeds)||[]).map((function(e){var t;return Object(u["p"])(e,{videoPhotoCaption:Object(s["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})}))}},{key:"feedVideoList",get:function(){return this.hotVideoList}},{key:"feedVideoListLength",get:function(){return this.hotVideoList.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.hotVideo.data.hotVideoData)||void 0===e?void 0:e.llsid}}]),n}(D);Object(r["c"])([Object(o["d"])({query:a()(d(),l["a"]),variables:function(e){var t;return this.trendingId=e.query.trendingId?decodeURIComponent(e.query.trendingId):this.trendingId,{trendingId:this.trendingId,page:Object(u["d"])(e.name),webPageArea:this.webPageArea||e.query.area,photoIds:null===(t=this.hotRankMap[this.trendingId])||void 0===t?void 0:t.photoIds}},fetchPolicy:"cache-first",skip:function(e){return e.name===c["a"].ShortVideo&&!!this.feedVideoListLength||!this.canFetch}})],R.prototype,"hotVideo",void 0)},fba5:function(e,t,n){var r=n("cb5a");function o(e){return r(this.__data__,e)>-1}e.exports=o},fe89:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n("4795"),o=n.n(r),i=n("0f9e"),a=n("9530"),u=n.n(a),c=n("d2ae"),s=n("b74e"),l=n("afbc"),f=n("90cd"),d=n("b765");function p(){var e=y(["\n            mutation visionFollow($touid: String, $ftype: Int) {\n                visionFollow(touid: $touid, ftype: $ftype) {\n                    result\n                    followStatus\n                    hostName\n                }\n            }\n        "]);return p=function(){return e},e}function v(){var e=y(["\n        ","\n        query visionProfilePhotoList($pcursor: String, $userId: String, $page: String, $webPageArea: String) {\n            visionProfilePhotoList(pcursor: $pcursor, userId: $userId, page: $page, webPageArea: $webPageArea) {\n                    result\n                    llsid\n                    webPageArea\n                    feeds {\n                        ...feedContent\n                    }\n                    hostName\n                    pcursor\n                }\n            }\n        "]);return v=function(){return e},e}function h(){var e=y(["\n            query visionProfileUserList($pcursor: String, $ftype: Int) {\n                visionProfileUserList(pcursor: $pcursor, ftype: $ftype) {\n                    result\n                    fols {\n                        user_name\n                        headurl\n                        user_text\n                        isFollowing\n                        user_id\n                    }\n                    hostName\n                    pcursor\n                }\n            }\n        "]);return h=function(){return e},e}function m(){var e=y(["\n            query visionProfileUserList($pcursor: String, $ftype: Int) {\n                visionProfileUserList(pcursor: $pcursor, ftype: $ftype) {\n                    result\n                    fols {\n                        user_name\n                        headurl\n                        user_text\n                        isFollowing\n                        user_id\n                    }\n                    hostName\n                    pcursor\n                }\n            }\n        "]);return m=function(){return e},e}function b(){var e=y(["\n            query visionProfile($userId: String) {\n                visionProfile(userId: $userId) {\n                    result\n                    hostName\n                    userProfile {\n                        ownerCount {\n                            fan\n                            photo\n                            follow\n                            photo_public\n                        }\n                        profile {\n                            gender\n                            user_name\n                            user_id\n                            headurl\n                            user_text\n                            user_profile_bg_url\n                        }\n                        isFollowing\n                    }\n                }\n            }\n        "]);return b=function(){return e},e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function g(e){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function O(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){O(i,r,o,a,u,"next",e)}function u(e){O(i,r,o,a,u,"throw",e)}a(void 0)}))}}function j(e){return P(e)||C(e)||I(e)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){if(e){if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function C(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function P(e){if(Array.isArray(e))return S(e)}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function D(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function $(e){var t=V();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==g(t)&&"function"!==typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function N(e,t){return e===t}var F=function(e){D(n,e);var t=$(n);function n(){var e;return L(this,n),e=t.apply(this,arguments),e.isGuest=!0,e.photoLimit=-1,e.canFetch=!1,e}return A(n,[{key:"fetchMoreFansUser",value:function(){this.fansListPcursor&&"no_more"!==this.fansListPcursor&&this.graphqlFansList.fetchMore({variables:{ftype:2,pcursor:this.fansListPcursor},updateQuery:function(e,t){var n,r;return{visionProfileUserList:x(x(x({},e.visionProfileUserList),null===t||void 0===t?void 0:t.visionProfileUserList),{},{fols:[].concat(j((null===(n=e.visionProfileUserList)||void 0===n?void 0:n.fols)||[]),j((null===t||void 0===t||null===(r=t.visionProfileUserList)||void 0===r?void 0:r.fols)||[]))})}}})}},{key:"fetchMoreFollowUser",value:function(){this.followListPcursor&&"no_more"!==this.followListPcursor&&this.graphqlFollowList.fetchMore({variables:{ftype:1,pcursor:this.followListPcursor},updateQuery:function(e,t){var n,r;return{visionProfileUserList:x(x(x({},e.visionProfileUserList),null===t||void 0===t?void 0:t.visionProfileUserList),{},{fols:[].concat(j((null===(n=e.visionProfileUserList)||void 0===n?void 0:n.fols)||[]),j((null===t||void 0===t||null===(r=t.visionProfileUserList)||void 0===r?void 0:r.fols)||[]))})}}})}},{key:"fetchMorePhoto",value:function(){var e=this;this.photoPcursor&&!this.graphqlPhoto.loading&&"no_more"!==this.photoPcursor&&this.graphqlPhoto.fetchMore({variables:{pcursor:this.photoPcursor},updateQuery:function(t,n){var r,o,i=null===n||void 0===n||null===(r=n.visionProfilePhotoList)||void 0===r?void 0:r.feeds,a=e.$route.params.uid||e.$route.query.userId||e.$route.query.authorId;if(i&&i.length){var u,c,s=(null===(u=i[0])||void 0===u||null===(c=u.author)||void 0===c?void 0:c.id)||"";if(!N(a,s))return t}return{visionProfilePhotoList:x(x({},null===n||void 0===n?void 0:n.visionProfilePhotoList),{},{feeds:[].concat(j((null===(o=t.visionProfilePhotoList)||void 0===o?void 0:o.feeds)||[]),j(i||[]))})}}})}},{key:"follow",value:function(){var e=w(o.a.mark((function e(t){var n;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.isFollowing?2:1,e.next=3,this.followMutation.mutate({touid:t.user_id,ftype:n});case 3:this.followMutation.data.visionFollow&&1===this.followMutation.data.visionFollow.result&&t&&(t.isFollowing=1===this.followMutation.data.visionFollow.followStatus);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dataError",get:function(){return this.graphqlPhoto.error}},{key:"canNext",get:function(){return-1!==this.photoLimit&&this.photoLimit>this.feedVideoListLength}},{key:"photoPcursor",get:function(){var e;return null===(e=this.graphqlPhoto.data.visionProfilePhotoList)||void 0===e?void 0:e.pcursor}},{key:"area",get:function(){var e;return null===(e=this.graphqlPhoto.data.visionProfilePhotoList)||void 0===e?void 0:e.webPageArea}},{key:"ownerCount",get:function(){var e,t;return(null===(e=this.graphqlUserDetail.data.visionProfile)||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.ownerCount)||{}}},{key:"isFollowing",get:function(){var e,t;return(null===(e=this.graphqlUserDetail.data.visionProfile)||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.isFollowing)||!1}},{key:"author",get:function(){var e,t;return(null===(e=this.graphqlUserDetail.data.visionProfile)||void 0===e||null===(t=e.userProfile)||void 0===t?void 0:t.profile)||{}}},{key:"authorProfile",get:function(){var e;return null===(e=this.graphqlUserDetail.data.visionProfile)||void 0===e?void 0:e.userProfile}},{key:"authorPhoto",get:function(){var e,t=this.graphqlPhoto.data.visionProfilePhotoList||{};return x(x({},t),{},{feeds:(null===(e=t.feeds)||void 0===e?void 0:e.map((function(e){var t;return Object(s["p"])(e,{videoPhotoCaption:Object(f["c"])(null===e||void 0===e||null===(t=e.photo)||void 0===t?void 0:t.caption)})})))||[]})}},{key:"fansList",get:function(){return this.graphqlFansList.data.visionProfileUserList||{}}},{key:"followList",get:function(){return this.graphqlFollowList.data.visionProfileUserList||{}}},{key:"feedVideoList",get:function(){return this.authorPhoto.feeds}},{key:"feedVideoListLength",get:function(){return this.authorPhoto.feeds.length||0}},{key:"llsid",get:function(){var e;return null===(e=this.graphqlPhoto.data.visionProfilePhotoList)||void 0===e?void 0:e.llsid}},{key:"followListPcursor",get:function(){var e;return null===(e=this.graphqlFollowList.data.visionProfileUserList)||void 0===e?void 0:e.pcursor}},{key:"fansListPcursor",get:function(){var e;return null===(e=this.graphqlFansList.data.visionProfileUserList)||void 0===e?void 0:e.pcursor}},{key:"hasNoProfilePhoto",get:function(){return 0===this.feedVideoListLength&&("no_more"===this.photoPcursor||null===this.photoPcursor)}},{key:"hasNoFans",get:function(){var e;return 0===(null===(e=this.fansList.fols)||void 0===e?void 0:e.length)&&("no_more"===this.fansListPcursor||null===this.fansListPcursor)}},{key:"hasNoFollow",get:function(){var e;return 0===(null===(e=this.followList.fols)||void 0===e?void 0:e.length)&&("no_more"===this.followListPcursor||null===this.followListPcursor)}}]),n}(c["a"]);Object(i["c"])([Object(c["d"])({query:u()(b()),variables:function(e){return{userId:e.params.uid}},prefetch:!0,skip:function(e){return e.name===l["a"].ShortVideo}})],F.prototype,"graphqlUserDetail",void 0),Object(i["c"])([Object(c["d"])({query:u()(m()),variables:function(){return{ftype:2}},skip:function(e){return e.name===l["a"].ShortVideo||this.isGuest}})],F.prototype,"graphqlFansList",void 0),Object(i["c"])([Object(c["d"])({query:u()(h()),variables:function(){return{ftype:1}},skip:function(e){return e.name===l["a"].ShortVideo||this.isGuest}})],F.prototype,"graphqlFollowList",void 0),Object(i["c"])([Object(c["d"])({query:u()(v(),d["a"]),variables:function(e){return{userId:e.params.uid||e.query.userId||e.query.authorId,pcursor:e.name===l["a"].ShortVideo&&e.query.currentPcursor||"",page:Object(s["d"])(e.name),webPageArea:e.query.area}},skip:function(e){return e.name===l["a"].ShortVideo&&!this.canFetch}})],F.prototype,"graphqlPhoto",void 0),Object(i["c"])([Object(c["c"])({mutation:u()(p()),variables:function(e){var t=e.touid,n=e.ftype;return{touid:t,ftype:n}}})],F.prototype,"followMutation",void 0)},ffd6:function(e,t,n){var r=n("3729"),o=n("1310"),i="[object Symbol]";function a(e){return"symbol"==typeof e||o(e)&&r(e)==i}e.exports=a},ffdb:function(e,t,n){}}]);
//# sourceMappingURL=short-video.a5c823e0.js.map